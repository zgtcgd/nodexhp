const _0x240b0a=_0x217d;(function(_0x50e5af,_0x5edf82){const _0x3059c7=_0x217d,_0x41ca2c=_0x50e5af();while(!![]){try{const _0x2a566a=parseInt(_0x3059c7(0x14a))/0x1+parseInt(_0x3059c7(0x188))/0x2+-parseInt(_0x3059c7(0x165))/0x3*(parseInt(_0x3059c7(0x171))/0x4)+parseInt(_0x3059c7(0x235))/0x5*(-parseInt(_0x3059c7(0x191))/0x6)+-parseInt(_0x3059c7(0x1d0))/0x7+-parseInt(_0x3059c7(0x208))/0x8+parseInt(_0x3059c7(0x1ae))/0x9*(parseInt(_0x3059c7(0x13f))/0xa);if(_0x2a566a===_0x5edf82)break;else _0x41ca2c['push'](_0x41ca2c['shift']());}catch(_0x2483d2){_0x41ca2c['push'](_0x41ca2c['shift']());}}}(_0x1de8,0x45bf2));const FILE_PATH=process[_0x240b0a(0x23c)][_0x240b0a(0x177)]||_0x240b0a(0x144),intervalInseconds=process[_0x240b0a(0x23c)][_0x240b0a(0x1d4)]||0x64,SUB_PATH=process['env']['SUB_PATH']||_0x240b0a(0x19b),PORT=process['env'][_0x240b0a(0x1a4)]||0xbb8,CFPORT=process[_0x240b0a(0x23c)]['CFPORT']||0x1bb,CFIP=process['env'][_0x240b0a(0x173)]||_0x240b0a(0x166),KEEPALIVE=process[_0x240b0a(0x23c)][_0x240b0a(0x1db)]||![],SUB_URL=process[_0x240b0a(0x23c)][_0x240b0a(0x19e)]||'',UUID=process['env']['UUID']||_0x240b0a(0x1f9),XPATH=process[_0x240b0a(0x23c)][_0x240b0a(0x189)]||UUID[_0x240b0a(0x22e)](0x0,0x8),HTTPSTLS=process[_0x240b0a(0x23c)]['HTTPSTLS']||!![],NEZHA_VERSION=process[_0x240b0a(0x23c)][_0x240b0a(0x22c)]||'V0',NEZHA_SERVER=process[_0x240b0a(0x23c)][_0x240b0a(0x157)]||'',NEZHA_PORT=process[_0x240b0a(0x23c)][_0x240b0a(0x233)]||'443',NEZHA_KEY=process['env'][_0x240b0a(0x1c4)]||'',SUB_NAME=process[_0x240b0a(0x23c)][_0x240b0a(0x18c)]||'',MY_DOMAIN=process['env'][_0x240b0a(0x149)]||'',os=require('os'),fs=require('fs'),net=require(_0x240b0a(0x168)),path=require(_0x240b0a(0x13b)),http=require(_0x240b0a(0x1b8)),https=require(_0x240b0a(0x1d9)),axios=require(_0x240b0a(0x1f3)),{pipeline}=require(_0x240b0a(0x14c)),{Buffer}=require(_0x240b0a(0x1a2)),exec=require(_0x240b0a(0x1f8))[_0x240b0a(0x1f5)],delay=_0x18c4b7=>new Promise(_0x4e2116=>setTimeout(_0x4e2116,_0x18c4b7)),SETTINGS={[_0x240b0a(0x1a1)]:UUID,[_0x240b0a(0x1f7)]:_0x240b0a(0x228),[_0x240b0a(0x1b6)]:_0x240b0a(0x1d2),[_0x240b0a(0x189)]:'%2F'+XPATH,['MAX_BUFFERED_POSTS']:0x1e,[_0x240b0a(0x190)]:0xf4240,[_0x240b0a(0x199)]:0x7530,[_0x240b0a(0x1b1)]:0x400*0x400,[_0x240b0a(0x21c)]:!![],[_0x240b0a(0x232)]:!![]};function validate_uuid(_0x3e8e7c,_0x152048){for(let _0x33bd16=0x0;_0x33bd16<0x10;_0x33bd16++){if(_0x3e8e7c[_0x33bd16]!==_0x152048[_0x33bd16])return![];}return!![];}function concat_typed_arrays(_0x58740d,..._0x153317){const _0x118bb1=_0x240b0a;if(!_0x153317||_0x153317[_0x118bb1(0x23d)]<0x1)return _0x58740d;let _0x5034f5=_0x58740d[_0x118bb1(0x23d)];for(let _0x5bb585 of _0x153317)_0x5034f5+=_0x5bb585[_0x118bb1(0x23d)];const _0x2f200b=new _0x58740d[(_0x118bb1(0x1c8))](_0x5034f5);_0x2f200b[_0x118bb1(0x1c3)](_0x58740d,0x0),_0x5034f5=_0x58740d[_0x118bb1(0x23d)];for(let _0x4f205c of _0x153317){_0x2f200b[_0x118bb1(0x1c3)](_0x4f205c,_0x5034f5),_0x5034f5+=_0x4f205c[_0x118bb1(0x23d)];}return _0x2f200b;}function log(_0x2dfea3,..._0x3c7f63){const _0x4f0431=_0x240b0a;if(SETTINGS[_0x4f0431(0x1f7)]===_0x4f0431(0x228))return;const _0x382c03={'debug':0x0,'info':0x1,'warn':0x2,'error':0x3},_0x3787da={'debug':'\x1b[36m','info':'\x1b[32m','warn':_0x4f0431(0x17e),'error':_0x4f0431(0x206),'reset':_0x4f0431(0x158)},_0x2d9a9c=_0x382c03[SETTINGS['LOG_LEVEL']]||0x1,_0x44df6f=_0x382c03[_0x2dfea3]||0x0;if(_0x44df6f>=_0x2d9a9c){const _0x40bff7=new Date()[_0x4f0431(0x159)](),_0x307f7a=_0x3787da[_0x2dfea3]||_0x3787da[_0x4f0431(0x1c0)];console[_0x4f0431(0x176)](_0x307f7a+'['+_0x40bff7+_0x4f0431(0x1c9)+_0x2dfea3+']',..._0x3c7f63,_0x3787da[_0x4f0431(0x1c0)]);}}function cleanupOldFiles(){const _0x532821=_0x240b0a;try{if(fs[_0x532821(0x1fb)](path[_0x532821(0x1a9)](FILE_PATH)))fs[_0x532821(0x153)](path[_0x532821(0x1a9)](FILE_PATH),{'recursive':!![]});else{}}catch(_0x111a6b){}}function createFolder(_0x48e37b){if(!fs['existsSync'](_0x48e37b))fs['mkdirSync'](_0x48e37b);else{}}function execPromise(_0x3739e0,_0x2a2227={}){return new Promise((_0x1755bb,_0x3139e2)=>{const _0x54dea0=exec(_0x3739e0,_0x2a2227,(_0x3cd1a3,_0x1b3774,_0x1f0174)=>{const _0x5d4c9a=_0x217d;if(_0x3cd1a3){const _0x343be8=new Error('Command\x20failed:\x20'+_0x3cd1a3[_0x5d4c9a(0x138)]);_0x343be8['code']=_0x3cd1a3[_0x5d4c9a(0x1cb)],_0x343be8[_0x5d4c9a(0x23b)]=_0x1f0174[_0x5d4c9a(0x194)](),_0x3139e2(_0x343be8);}else _0x1755bb(_0x1b3774[_0x5d4c9a(0x194)]());});});}async function detectProcess(_0x21ffba){const _0x2e86f6=_0x240b0a,_0x28134e=[{'cmd':_0x2e86f6(0x192)+_0x21ffba+'\x22','name':_0x2e86f6(0x19a)},{'cmd':_0x2e86f6(0x1e2)+_0x21ffba+'\x22','name':_0x2e86f6(0x15e)},{'cmd':_0x2e86f6(0x198)+_0x21ffba+'\x22\x20\x27$2\x20==\x20name\x20{print\x20$1}\x27','name':_0x2e86f6(0x201)}];for(const _0xbd16cc of _0x28134e){try{const _0x269375=await execPromise(_0xbd16cc['cmd']);if(_0x269375)return _0x269375[_0x2e86f6(0x207)](/\n/g,'\x20')[_0x2e86f6(0x194)]();}catch(_0x4bd8c1){_0x4bd8c1[_0x2e86f6(0x1cb)]!==0x7f&&_0x4bd8c1[_0x2e86f6(0x1cb)]!==0x1&&console[_0x2e86f6(0x18b)](_0x2e86f6(0x1b2)+_0xbd16cc[_0x2e86f6(0x1ff)]+'\x20error:',_0x4bd8c1[_0x2e86f6(0x138)]);}}return'';}async function killProcess(_0x3bd573){const _0x4adb2a=_0x240b0a;console[_0x4adb2a(0x176)](_0x4adb2a(0x216)+_0x3bd573);try{const _0x36902d=await detectProcess(_0x3bd573);if(!_0x36902d)return console[_0x4adb2a(0x227)](_0x4adb2a(0x17c)+_0x3bd573+_0x4adb2a(0x239)),{'success':!![],'message':'Process\x20not\x20found'};await execPromise(_0x4adb2a(0x154)+_0x36902d);const _0x508cc5=_0x4adb2a(0x241)+_0x36902d+')';return console[_0x4adb2a(0x176)](_0x508cc5),{'success':!![],'message':_0x508cc5};}catch(_0x33435f){const _0x558479='Kill\x20failed:\x20'+_0x33435f[_0x4adb2a(0x138)];return console[_0x4adb2a(0x186)](_0x558479),{'success':![],'message':_0x558479};}}function generateRandomString(_0x5e5bbd){const _0x6c0f06=_0x240b0a,_0x15a913=_0x6c0f06(0x234);let _0x3bc320='';for(let _0x4bdc4a=0x0;_0x4bdc4a<_0x5e5bbd;_0x4bdc4a++){_0x3bc320+=_0x15a913[_0x6c0f06(0x136)](Math[_0x6c0f06(0x185)](Math[_0x6c0f06(0x1cd)]()*_0x15a913['length']));}return _0x3bc320;}function getSystemArchitecture(){const _0x101db5=_0x240b0a,_0x566d01=os[_0x101db5(0x242)]();return _0x566d01===_0x101db5(0x1e9)||_0x566d01==='arm64'||_0x566d01===_0x101db5(0x215)?'arm':_0x101db5(0x178);}function getFilesForArchitecture(_0x532533){const _0x13c22a=_0x240b0a,_0x1744d0={'app':{'V0':{'arm':_0x13c22a(0x16d),'amd':_0x13c22a(0x183)},'V1':{'arm':_0x13c22a(0x16c),'amd':_0x13c22a(0x196)}}};if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION){const _0xf165f0=[{'fileName':'tmp'+generateRandomString(0x5),'originalName':'app','fileUrl':_0x1744d0['app'][NEZHA_VERSION][_0x532533]}];return _0xf165f0;}else return[];}async function download_function(_0x1fdb35,_0x4a04b5,_0x52cd5a){const _0x344b45=_0x240b0a,_0x133c75=path[_0x344b45(0x1a9)](FILE_PATH,_0x1fdb35);let _0x12789=![];try{const _0x5f40af=await axios({'method':_0x344b45(0x1dc),'url':_0x52cd5a,'responseType':_0x344b45(0x1ec)});await pipeline(_0x5f40af[_0x344b45(0x147)],fs[_0x344b45(0x184)](_0x133c75)),_0x12789=!![];}catch(_0x363d8c){}return{'fileName':_0x1fdb35,'originalName':_0x4a04b5,'filePath':_0x133c75,'success':_0x12789};}let fileMapping={};async function downloadFiles(){const _0x265d05=_0x240b0a;try{const _0x1d0d45=getSystemArchitecture();if(!_0x1d0d45)return console[_0x265d05(0x176)](_0x265d05(0x170)),fileMapping;const _0x3296ee=getFilesForArchitecture(_0x1d0d45);if(_0x3296ee['length']===0x0)return console[_0x265d05(0x176)](_0x265d05(0x175)),fileMapping;const _0x2fc4fa=_0x3296ee[_0x265d05(0x20a)](_0x11e206=>download_function(_0x11e206[_0x265d05(0x214)],_0x11e206[_0x265d05(0x231)],_0x11e206[_0x265d05(0x143)])),_0x1f4e1d=await Promise['all'](_0x2fc4fa);return _0x1f4e1d['forEach'](_0xa188aa=>{const _0x5008dd=_0x265d05;if(_0xa188aa[_0x5008dd(0x200)])try{fs[_0x5008dd(0x140)](_0xa188aa['filePath'],0x1ed),fileMapping[_0xa188aa[_0x5008dd(0x231)]]=_0xa188aa['fileName'];}catch(_0x4dd9f8){}}),fileMapping;}catch(_0x22ffbb){return console[_0x265d05(0x186)](_0x265d05(0x1f0),_0x22ffbb),fileMapping;}}let NEZHA_TLS;function nezconfig(){const _0x406a77=_0x240b0a,_0x5f4079=[_0x406a77(0x18e),_0x406a77(0x23a),'2096',_0x406a77(0x163),_0x406a77(0x1c6),_0x406a77(0x1ca)];if(NEZHA_VERSION==='V0')return _0x5f4079[_0x406a77(0x145)](NEZHA_PORT)?NEZHA_TLS=_0x406a77(0x13d):NEZHA_TLS='',NEZHA_TLS;else{if(NEZHA_VERSION==='V1'){_0x5f4079[_0x406a77(0x145)](NEZHA_PORT)?NEZHA_TLS=_0x406a77(0x1e6):NEZHA_TLS=_0x406a77(0x226);const _0x1e3085=path[_0x406a77(0x1a9)](FILE_PATH,_0x406a77(0x20d)),_0x4491a2='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x406a77(0x14f)+NEZHA_TLS+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;try{fs[_0x406a77(0x20e)](_0x1e3085,_0x4491a2);}catch(_0x3e1c96){}}}}async function runapp(){const _0x47d711=_0x240b0a;if(fileMapping[_0x47d711(0x146)]&&fs[_0x47d711(0x1fb)](path['join'](FILE_PATH,fileMapping[_0x47d711(0x146)]))){if(NEZHA_VERSION==='V0'){const _0x2918bd=_0x47d711(0x1dd)+FILE_PATH+'/'+fileMapping[_0x47d711(0x146)]+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x47d711(0x18a)+NEZHA_KEY+'\x20'+NEZHA_TLS+_0x47d711(0x225);try{await execPromise(_0x2918bd);}catch(_0x53b6f5){console[_0x47d711(0x186)](fileMapping[_0x47d711(0x146)]+_0x47d711(0x219)+_0x53b6f5);}}else{if(NEZHA_VERSION==='V1'){const _0x2d8139=_0x47d711(0x1dd)+FILE_PATH+'/'+fileMapping[_0x47d711(0x146)]+_0x47d711(0x16a)+FILE_PATH+'/config.yml\x20>/dev/null\x202>&1\x20&';try{await execPromise(_0x2d8139);}catch(_0x2e4e58){console['error'](fileMapping[_0x47d711(0x146)]+'\x20running\x20error:\x20'+_0x2e4e58);}}}}else console['log'](_0x47d711(0x20f));}async function run(){if(NEZHA_VERSION&&NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){nezconfig();const _0x15b307=await detectProcess(''+fileMapping['app']);if(_0x15b307){}else await runapp();await delay(0x3e8);}else console['log']('Node\x20variable\x20is\x20empty,\x20skip\x20running');}async function keep_alive(){const _0x52a610=_0x240b0a;if(NEZHA_VERSION&&NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x54ded6=await detectProcess(''+fileMapping[_0x52a610(0x146)]);if(_0x54ded6){}else await runapp();}}function parse_uuid(_0x2efb85){const _0x41ed5c=_0x240b0a;_0x2efb85=_0x2efb85[_0x41ed5c(0x211)]('-','');const _0x4cd90a=[];for(let _0x41f76b=0x0;_0x41f76b<0x10;_0x41f76b++){_0x4cd90a[_0x41ed5c(0x1d1)](parseInt(_0x2efb85[_0x41ed5c(0x245)](_0x41f76b*0x2,0x2),0x10));}return _0x4cd90a;}function _0x217d(_0x9b9626,_0x5efa70){const _0x1de8c4=_0x1de8();return _0x217d=function(_0x217dd7,_0x47bfc1){_0x217dd7=_0x217dd7-0x133;let _0x507fa7=_0x1de8c4[_0x217dd7];return _0x507fa7;},_0x217d(_0x9b9626,_0x5efa70);}async function read_vless_header(_0x289f09,_0x14016c){const _0x3610ca=_0x240b0a;let _0x1e0f79=0x0,_0x5ee157=new Uint8Array(),_0x51f170={'value':_0x5ee157,'done':![]};async function _0x567407(_0x58ab75){const _0x257501=_0x217d;if(_0x51f170[_0x257501(0x197)])throw new Error('header\x20length\x20too\x20short');const _0x58da7d=_0x58ab75-_0x1e0f79;if(_0x58da7d<0x1)return;_0x51f170=await read_atleast(_0x289f09,_0x58da7d),_0x1e0f79+=_0x51f170[_0x257501(0x160)][_0x257501(0x23d)],_0x5ee157=concat_typed_arrays(_0x5ee157,_0x51f170[_0x257501(0x160)]);}await _0x567407(0x1+0x10+0x1);const _0x53ac96=_0x5ee157[0x0],_0x463997=_0x5ee157[_0x3610ca(0x22e)](0x1,0x1+0x10),_0x1e2704=parse_uuid(_0x14016c);if(!validate_uuid(_0x463997,_0x1e2704))throw new Error(_0x3610ca(0x19d));const _0x47cabd=_0x5ee157[0x1+0x10],_0x5d6d19=0x1+0x10+0x1+_0x47cabd+0x1+0x2+0x1;await _0x567407(_0x5d6d19+0x1);const _0x3870d5=_0x5ee157[0x1+0x10+0x1+_0x47cabd],_0x4517ee=0x1;if(_0x3870d5!==_0x4517ee)throw new Error(_0x3610ca(0x139)+_0x3870d5);const _0x17b44e=(_0x5ee157[_0x5d6d19-0x1-0x2]<<0x8)+_0x5ee157[_0x5d6d19-0x1-0x1],_0x393e00=_0x5ee157[_0x5d6d19-0x1],_0x2d21de=0x1,_0x3cb2d5=0x2,_0x22876b=0x3;let _0x277d71=-0x1;if(_0x393e00===_0x2d21de)_0x277d71=_0x5d6d19+0x4;else{if(_0x393e00===_0x22876b)_0x277d71=_0x5d6d19+0x10;else _0x393e00===_0x3cb2d5&&(_0x277d71=_0x5d6d19+0x1+_0x5ee157[_0x5d6d19]);}if(_0x277d71<0x0)throw new Error(_0x3610ca(0x1ad));await _0x567407(_0x277d71);const _0x43d144=_0x5d6d19;let _0x38e109='';if(_0x393e00===_0x2d21de)_0x38e109=_0x5ee157[_0x3610ca(0x22e)](_0x43d144,_0x43d144+0x4)['join']('.');else{if(_0x393e00===_0x3cb2d5)_0x38e109=new TextDecoder()[_0x3610ca(0x1aa)](_0x5ee157[_0x3610ca(0x22e)](_0x43d144+0x1,_0x43d144+0x1+_0x5ee157[_0x43d144]));else _0x393e00===_0x22876b&&(_0x38e109=_0x5ee157[_0x3610ca(0x22e)](_0x43d144,_0x43d144+0x10)[_0x3610ca(0x135)]((_0x42fc1d,_0x142447,_0x5289e6,_0x4e8d8d)=>_0x5289e6%0x2?_0x42fc1d[_0x3610ca(0x213)](((_0x4e8d8d[_0x5289e6-0x1]<<0x8)+_0x142447)[_0x3610ca(0x240)](0x10)):_0x42fc1d,[])[_0x3610ca(0x1a9)](':'));}if(!_0x38e109){log('error',_0x3610ca(0x217));throw new Error(_0x3610ca(0x1bf));}return log('info',_0x3610ca(0x19c)+_0x38e109+':'+_0x17b44e),{'hostname':_0x38e109,'port':_0x17b44e,'data':_0x5ee157[_0x3610ca(0x22e)](_0x277d71),'resp':new Uint8Array([_0x53ac96,0x0])};}async function read_atleast(_0x368fbd,_0x2e460f){const _0x30e634=_0x240b0a,_0x5c109d=[];let _0x36143a=![];while(_0x2e460f>0x0&&!_0x36143a){const _0x434cac=await _0x368fbd[_0x30e634(0x1ac)]();if(_0x434cac['value']){const _0x63cc66=new Uint8Array(_0x434cac[_0x30e634(0x160)]);_0x5c109d[_0x30e634(0x1d1)](_0x63cc66),_0x2e460f-=_0x63cc66[_0x30e634(0x23d)];}_0x36143a=_0x434cac[_0x30e634(0x197)];}if(_0x2e460f>0x0)throw new Error('not\x20enough\x20data\x20to\x20read');return{'value':concat_typed_arrays(..._0x5c109d),'done':_0x36143a};}async function parse_header(_0x10e1e4,_0x443856){const _0x3f555a=_0x240b0a;log(_0x3f555a(0x18b),_0x3f555a(0x223));const _0x1a6945=_0x443856['readable']['getReader']();try{const _0x4b4928=await read_vless_header(_0x1a6945,_0x10e1e4);return log(_0x3f555a(0x18b),_0x3f555a(0x182)),_0x4b4928;}catch(_0x20758b){log('error',_0x3f555a(0x1a7)+_0x20758b['message']);throw new Error(_0x3f555a(0x243)+_0x20758b[_0x3f555a(0x138)]);}finally{_0x1a6945[_0x3f555a(0x1d6)]();}}async function connect_remote(_0x4c37ba,_0x412200){const _0x1b0b40=_0x240b0a,_0x3d7043=0x1f40;try{const _0x5c60c4=await timed_connect(_0x4c37ba,_0x412200,_0x3d7043);return _0x5c60c4[_0x1b0b40(0x141)](!![]),_0x5c60c4[_0x1b0b40(0x204)](!![],0x3e8),_0x5c60c4['bufferSize']=parseInt(SETTINGS[_0x1b0b40(0x1b6)])*0x400,log(_0x1b0b40(0x137),_0x1b0b40(0x150)+_0x4c37ba+':'+_0x412200),_0x5c60c4;}catch(_0x2f3351){log(_0x1b0b40(0x186),_0x1b0b40(0x1b3)+_0x2f3351[_0x1b0b40(0x138)]);throw _0x2f3351;}}function timed_connect(_0x51471b,_0x189dbd,_0x3e2207){return new Promise((_0x135d67,_0x33d3f6)=>{const _0x49ec02=_0x217d,_0x43ad82=net['createConnection']({'host':_0x51471b,'port':_0x189dbd}),_0x3968cd=setTimeout(()=>{const _0x5b1fb5=_0x217d;_0x33d3f6(new Error(_0x5b1fb5(0x13c)));},_0x3e2207);_0x43ad82['on']('connect',()=>{clearTimeout(_0x3968cd),_0x135d67(_0x43ad82);}),_0x43ad82['on'](_0x49ec02(0x186),_0x43ac69=>{clearTimeout(_0x3968cd),_0x33d3f6(_0x43ac69);});});}function pipe_relay(){async function _0x3b785b(_0x37539e,_0x5c1f98,_0x4c72cd){const _0xd227d1=_0x217d,_0x4a63a1=parseInt(SETTINGS[_0xd227d1(0x1b1)]);if(_0x4c72cd['length']>0x0){if(_0x5c1f98[_0xd227d1(0x212)])_0x5c1f98[_0xd227d1(0x179)](),_0x5c1f98[_0xd227d1(0x212)](_0x4c72cd),process['nextTick'](()=>_0x5c1f98[_0xd227d1(0x172)]());else{const _0x5eda29=_0x5c1f98[_0xd227d1(0x1df)][_0xd227d1(0x1f4)]();try{await _0x5eda29[_0xd227d1(0x212)](_0x4c72cd);}finally{_0x5eda29[_0xd227d1(0x1d6)]();}}}try{_0x37539e[_0xd227d1(0x14d)]?(_0x37539e[_0xd227d1(0x22f)](),_0x37539e[_0xd227d1(0x14d)](_0x5c1f98,{'end':!![],'highWaterMark':_0x4a63a1}),_0x37539e['resume']()):await _0x37539e[_0xd227d1(0x1bd)][_0xd227d1(0x1d3)](_0x5c1f98['writable'],{'preventClose':![],'preventAbort':![],'preventCancel':![],'signal':AbortSignal[_0xd227d1(0x222)](SETTINGS[_0xd227d1(0x199)])});}catch(_0x1c9139){!_0x1c9139[_0xd227d1(0x138)][_0xd227d1(0x145)](_0xd227d1(0x21d))&&log(_0xd227d1(0x186),_0xd227d1(0x1e4),_0x1c9139[_0xd227d1(0x138)]);throw _0x1c9139;}}return _0x3b785b;}function socketToWebStream(_0x31553c){const _0x1c5cc7=_0x240b0a;let _0x53a9d3,_0x587db1;return _0x31553c['on'](_0x1c5cc7(0x186),_0x5ccdb2=>{const _0x3c07d5=_0x1c5cc7;log(_0x3c07d5(0x186),_0x3c07d5(0x236),_0x5ccdb2[_0x3c07d5(0x138)]),_0x53a9d3?.[_0x3c07d5(0x186)](_0x5ccdb2),_0x587db1?.['error'](_0x5ccdb2);}),{'readable':new ReadableStream({'start'(_0x51e6f6){const _0x34d1ff=_0x1c5cc7;_0x53a9d3=_0x51e6f6,_0x31553c['on'](_0x34d1ff(0x147),_0x1f858f=>{const _0x9b4439=_0x34d1ff;try{_0x51e6f6[_0x9b4439(0x1b9)](_0x1f858f);}catch(_0x46dc45){log(_0x9b4439(0x186),_0x9b4439(0x1b7),_0x46dc45['message']);}}),_0x31553c['on'](_0x34d1ff(0x14e),()=>{const _0x4d098f=_0x34d1ff;try{_0x51e6f6[_0x4d098f(0x1ed)]();}catch(_0xa6161f){log(_0x4d098f(0x186),_0x4d098f(0x1a0),_0xa6161f[_0x4d098f(0x138)]);}});},'cancel'(){_0x31553c['destroy']();}}),'writable':new WritableStream({'start'(_0xbd9e56){_0x587db1=_0xbd9e56;},'write'(_0xa61a46){return new Promise((_0x37eb88,_0x3778bf)=>{if(_0x31553c['destroyed']){_0x3778bf(new Error('Socket\x20is\x20destroyed'));return;}_0x31553c['write'](_0xa61a46,_0x33fc35=>{if(_0x33fc35)_0x3778bf(_0x33fc35);else _0x37eb88();});});},'close'(){const _0x1d85bc=_0x1c5cc7;!_0x31553c[_0x1d85bc(0x193)]&&_0x31553c[_0x1d85bc(0x14e)]();},'abort'(_0x17222a){_0x31553c['destroy'](_0x17222a);}})};}function relay(_0x3104d9,_0xa775aa,_0x41b0ad,_0x4da94a){const _0x15c020=_0x240b0a,_0x3598f2=pipe_relay();let _0x42f9b9=![];const _0x47a132=socketToWebStream(_0x41b0ad);function _0x3db4de(){const _0x3143f3=_0x217d;if(!_0x42f9b9){_0x42f9b9=!![];try{_0x41b0ad[_0x3143f3(0x174)]();}catch(_0x2b7e26){!_0x2b7e26[_0x3143f3(0x138)][_0x3143f3(0x145)]('aborted')&&!_0x2b7e26['message'][_0x3143f3(0x145)]('socket\x20hang\x20up')&&log(_0x3143f3(0x186),_0x3143f3(0x20c)+_0x2b7e26[_0x3143f3(0x138)]);}}}const _0x4acbf9=_0x3598f2(_0xa775aa,_0x47a132,_0x4da94a[_0x15c020(0x147)])[_0x15c020(0x1fc)](_0x356c62=>{const _0x593375=_0x15c020;!_0x356c62['message'][_0x593375(0x145)](_0x593375(0x21d))&&!_0x356c62[_0x593375(0x138)][_0x593375(0x145)]('socket\x20hang\x20up')&&log('error',_0x593375(0x1e7)+_0x356c62[_0x593375(0x138)]);})[_0x15c020(0x220)](()=>{const _0xfeb230=_0x15c020;_0xa775aa[_0xfeb230(0x244)]&&_0xa775aa[_0xfeb230(0x244)]();}),_0x43ab8e=_0x3598f2(_0x47a132,_0xa775aa,_0x4da94a[_0x15c020(0x21a)])[_0x15c020(0x1fc)](_0x3dc41a=>{const _0x2f701c=_0x15c020;!_0x3dc41a[_0x2f701c(0x138)][_0x2f701c(0x145)](_0x2f701c(0x21d))&&!_0x3dc41a[_0x2f701c(0x138)][_0x2f701c(0x145)](_0x2f701c(0x167))&&log(_0x2f701c(0x186),_0x2f701c(0x133)+_0x3dc41a[_0x2f701c(0x138)]);});_0x43ab8e[_0x15c020(0x220)](()=>_0x4acbf9)['finally'](_0x3db4de);}const sessions=new Map();class Session{constructor(_0x40df4c){const _0x1e19d2=_0x240b0a;this['uuid']=_0x40df4c,this[_0x1e19d2(0x248)]=0x0,this[_0x1e19d2(0x1a8)]=![],this[_0x1e19d2(0x151)]=Date[_0x1e19d2(0x1eb)](),this[_0x1e19d2(0x1c1)]=null,this['remote']=null,this[_0x1e19d2(0x21f)]=![],this[_0x1e19d2(0x23f)]=null,this['headerSent']=![],this[_0x1e19d2(0x1e3)]=new Map(),this[_0x1e19d2(0x1f6)]=![],this['pendingPackets']=[],this[_0x1e19d2(0x164)]=null,this[_0x1e19d2(0x205)]=new Map(),log(_0x1e19d2(0x18b),_0x1e19d2(0x162)+_0x40df4c);}async['initializeVLESS'](_0x2a5f3e){const _0x4af776=_0x240b0a;if(this[_0x4af776(0x21f)])return!![];try{log(_0x4af776(0x18b),'Initializing\x20VLESS\x20connection\x20from\x20first\x20packet');const _0x1099c1=new ReadableStream({'start'(_0xdb3f87){const _0x52e51b=_0x4af776;_0xdb3f87[_0x52e51b(0x1b9)](_0x2a5f3e),_0xdb3f87[_0x52e51b(0x1ed)]();}}),_0x3b87a8={'readable':_0x1099c1,'writable':new WritableStream()};return this['vlessHeader']=await parse_header(SETTINGS[_0x4af776(0x1a1)],_0x3b87a8),log('info',_0x4af776(0x1b0)+this[_0x4af776(0x1c1)][_0x4af776(0x13e)]+':'+this[_0x4af776(0x1c1)][_0x4af776(0x230)]),this[_0x4af776(0x17f)]=await connect_remote(this[_0x4af776(0x1c1)][_0x4af776(0x13e)],this[_0x4af776(0x1c1)][_0x4af776(0x230)]),log(_0x4af776(0x137),_0x4af776(0x1da)),this[_0x4af776(0x21f)]=!![],!![];}catch(_0x511e2b){return log('error',_0x4af776(0x152)+_0x511e2b[_0x4af776(0x138)]),![];}}async['processPacket'](_0x178b88,_0xd15da9){const _0x14737d=_0x240b0a;try{this[_0x14737d(0x205)]['set'](_0x178b88,_0xd15da9),log('debug',_0x14737d(0x21b)+_0x178b88+_0x14737d(0x1d5)+_0xd15da9[_0x14737d(0x23d)]);while(this[_0x14737d(0x205)]['has'](this[_0x14737d(0x248)])){const _0x7f0e85=this[_0x14737d(0x205)][_0x14737d(0x1dc)](this['nextSeq']);this[_0x14737d(0x205)]['delete'](this[_0x14737d(0x248)]);if(!this['initialized']&&this[_0x14737d(0x248)]===0x0){if(!await this[_0x14737d(0x161)](_0x7f0e85))throw new Error(_0x14737d(0x203));this[_0x14737d(0x23f)]=Buffer[_0x14737d(0x156)](this[_0x14737d(0x1c1)]['resp']),await this[_0x14737d(0x1e0)](this[_0x14737d(0x1c1)]['data']),this[_0x14737d(0x164)]&&this[_0x14737d(0x1d8)]();}else{if(!this[_0x14737d(0x21f)]){log(_0x14737d(0x227),_0x14737d(0x17a)+_0x178b88+_0x14737d(0x142));continue;}await this[_0x14737d(0x1e0)](_0x7f0e85);}this[_0x14737d(0x248)]++,log(_0x14737d(0x18b),_0x14737d(0x1f1)+(this[_0x14737d(0x248)]-0x1));}if(this['pendingBuffers']['size']>SETTINGS[_0x14737d(0x15b)])throw new Error('Too\x20many\x20buffered\x20packets');return!![];}catch(_0x529703){log(_0x14737d(0x186),'Process\x20packet\x20error:\x20'+_0x529703[_0x14737d(0x138)]);throw _0x529703;}}[_0x240b0a(0x1d8)](){const _0x5e0715=_0x240b0a;if(!this[_0x5e0715(0x164)]||!this[_0x5e0715(0x23f)])return;try{const _0x3761c1=this[_0x5e0715(0x164)][_0x5e0715(0x1d7)]?.[_0x5e0715(0x1a6)]||_0x5e0715(0x1be),_0x519eb5=_0x3761c1==='h2';!this[_0x5e0715(0x15f)]&&(log(_0x5e0715(0x18b),_0x5e0715(0x1a3)+_0x3761c1+_0x5e0715(0x1de)+this[_0x5e0715(0x23f)][_0x5e0715(0x23d)]+_0x5e0715(0x1ab)),this[_0x5e0715(0x164)][_0x5e0715(0x212)](this[_0x5e0715(0x23f)]),this['headerSent']=!![]);if(_0x519eb5){this[_0x5e0715(0x164)][_0x5e0715(0x1d7)][_0x5e0715(0x141)](!![]);const _0x41f949=new require(_0x5e0715(0x1ec))[_0x5e0715(0x1cc)]({'transform'(_0x503d8b,_0x48ce90,_0x1e7c2b){const _0x372859=_0x5e0715,_0x7929f9=0x4000;for(let _0x19c3cb=0x0;_0x19c3cb<_0x503d8b[_0x372859(0x23d)];_0x19c3cb+=_0x7929f9){this[_0x372859(0x1d1)](_0x503d8b[_0x372859(0x22e)](_0x19c3cb,_0x19c3cb+_0x7929f9));}_0x1e7c2b();}});this['remote'][_0x5e0715(0x14d)](_0x41f949)[_0x5e0715(0x14d)](this['currentStreamRes']);}else this[_0x5e0715(0x17f)][_0x5e0715(0x14d)](this['currentStreamRes']);this[_0x5e0715(0x17f)]['on']('end',()=>{const _0x56ea80=_0x5e0715;!this[_0x56ea80(0x164)][_0x56ea80(0x1b5)]&&this['currentStreamRes'][_0x56ea80(0x14e)]();}),this[_0x5e0715(0x17f)]['on'](_0x5e0715(0x186),_0x15fd17=>{const _0x4b33f1=_0x5e0715;log(_0x4b33f1(0x186),_0x4b33f1(0x1fe)+_0x15fd17[_0x4b33f1(0x138)]),!this[_0x4b33f1(0x164)][_0x4b33f1(0x1b5)]&&this[_0x4b33f1(0x164)]['end']();});}catch(_0x1c2b7f){log(_0x5e0715(0x186),'Error\x20starting\x20downstream:\x20'+_0x1c2b7f[_0x5e0715(0x138)]),this[_0x5e0715(0x17b)]();}}[_0x240b0a(0x1c2)](_0x2b22e9,_0x115f80){const _0x4c27ee=_0x240b0a;return!_0x2b22e9[_0x4c27ee(0x209)]&&_0x2b22e9[_0x4c27ee(0x1ef)](0xc8,_0x115f80),this['currentStreamRes']=_0x2b22e9,this['initialized']&&this[_0x4c27ee(0x23f)]&&this['_startDownstreamResponse'](),_0x2b22e9['on'](_0x4c27ee(0x1ed),()=>{const _0x117b3f=_0x4c27ee;log(_0x117b3f(0x137),_0x117b3f(0x238)),this['cleanup']();}),!![];}async['_writeToRemote'](_0x1900c4){const _0x21de24=_0x240b0a;if(!this[_0x21de24(0x17f)]||this[_0x21de24(0x17f)][_0x21de24(0x193)])throw new Error(_0x21de24(0x1fa));return new Promise((_0x3882c1,_0x503332)=>{const _0x463e88=_0x21de24;this[_0x463e88(0x17f)][_0x463e88(0x212)](_0x1900c4,_0x3d13be=>{const _0x443009=_0x463e88;_0x3d13be?(log(_0x443009(0x186),_0x443009(0x15d)+_0x3d13be[_0x443009(0x138)]),_0x503332(_0x3d13be)):_0x3882c1();});});}[_0x240b0a(0x1d8)](){const _0x286ddf=_0x240b0a;if(!this['currentStreamRes']||!this[_0x286ddf(0x23f)])return;try{!this[_0x286ddf(0x15f)]&&(this[_0x286ddf(0x164)][_0x286ddf(0x212)](this[_0x286ddf(0x23f)]),this[_0x286ddf(0x15f)]=!![]),this['remote'][_0x286ddf(0x14d)](this['currentStreamRes']),this['remote']['on'](_0x286ddf(0x14e),()=>{const _0x7516e1=_0x286ddf;!this['currentStreamRes'][_0x7516e1(0x1b5)]&&this['currentStreamRes'][_0x7516e1(0x14e)]();}),this[_0x286ddf(0x17f)]['on'](_0x286ddf(0x186),_0x4e189d=>{const _0x4f05fe=_0x286ddf;log(_0x4f05fe(0x186),_0x4f05fe(0x1fe)+_0x4e189d[_0x4f05fe(0x138)]),!this['currentStreamRes'][_0x4f05fe(0x1b5)]&&this[_0x4f05fe(0x164)][_0x4f05fe(0x14e)]();});}catch(_0x8f9fe0){log(_0x286ddf(0x186),_0x286ddf(0x1a5)+_0x8f9fe0[_0x286ddf(0x138)]),this['cleanup']();}}['cleanup'](){const _0x20e024=_0x240b0a;!this[_0x20e024(0x1f6)]&&(this[_0x20e024(0x1f6)]=!![],log(_0x20e024(0x18b),_0x20e024(0x1bc)+this[_0x20e024(0x1b4)]),this['remote']&&(this[_0x20e024(0x17f)][_0x20e024(0x174)](),this[_0x20e024(0x17f)]=null),this[_0x20e024(0x21f)]=![],this['headerSent']=![]);}}async function getCloudflareMeta(){return new Promise((_0x2791ed,_0x6ff15a)=>{const _0x4f3c99=_0x217d,_0x3e0f07={'hostname':_0x4f3c99(0x15a),'path':'/meta','method':_0x4f3c99(0x16b)},_0x3f348c=https[_0x4f3c99(0x1cf)](_0x3e0f07,_0x27484b=>{const _0x20d4a2=_0x4f3c99;let _0x3346b8='';_0x27484b['on'](_0x20d4a2(0x147),_0x401d95=>{_0x3346b8+=_0x401d95;}),_0x27484b['on'](_0x20d4a2(0x14e),()=>{const _0x1c7d56=JSON['parse'](_0x3346b8);_0x2791ed(_0x1c7d56);});});_0x3f348c['on'](_0x4f3c99(0x186),_0x43f9e1=>{_0x6ff15a(_0x43f9e1);}),_0x3f348c['end']();});}let UPLOAD_DATA;async function getipandisp(){const _0x1d18a9=_0x240b0a;let _0x5de0ff=await getCloudflareMeta(),_0x36da37=_0x5de0ff[_0x1d18a9(0x169)],_0x514f3e=_0x5de0ff[_0x1d18a9(0x22a)],_0x3443fd=_0x5de0ff[_0x1d18a9(0x187)];ISP=(_0x514f3e+'-'+_0x3443fd)[_0x1d18a9(0x207)](/ /g,'_');let _0x17c1b8=MY_DOMAIN;return!MY_DOMAIN&&(_0x36da37['includes'](':')?_0x17c1b8='['+_0x36da37+']':_0x17c1b8=''+_0x36da37),HTTPSTLS==!![]?UPLOAD_DATA=_0x1d18a9(0x246)+UUID+'@'+CFIP+':'+CFPORT+_0x1d18a9(0x22b)+_0x17c1b8+_0x1d18a9(0x1ba)+_0x17c1b8+'&path='+SETTINGS['XPATH']+_0x1d18a9(0x22d)+ISP+'-'+SUB_NAME:UPLOAD_DATA=_0x1d18a9(0x246)+UUID+'@'+_0x17c1b8+':'+PORT+'?encryption=none&security=none&sni='+_0x17c1b8+_0x1d18a9(0x1ba)+_0x17c1b8+'&path='+SETTINGS[_0x1d18a9(0x189)]+_0x1d18a9(0x22d)+ISP+'-'+SUB_NAME,UPLOAD_DATA;}const server=http[_0x240b0a(0x23e)]((_0x32c35c,_0x56d181)=>{const _0x27279a=_0x240b0a,_0x3440a0={'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':'GET,\x20POST','Cache-Control':'no-store','X-Accel-Buffering':'no','X-Padding':generatePadding(0x64,0x3e8)};if(_0x32c35c[_0x27279a(0x1e8)]==='/'){_0x56d181[_0x27279a(0x1ef)](0xc8,{'Content-Type':'text/plain'}),_0x56d181[_0x27279a(0x14e)](_0x27279a(0x221));return;}if(_0x32c35c[_0x27279a(0x1e8)]==='/'+SUB_PATH){const _0x1d07f8=''+UPLOAD_DATA,_0x14191e=Buffer['from'](_0x1d07f8)[_0x27279a(0x240)]('base64');_0x56d181['writeHead'](0xc8,{'Content-Type':_0x27279a(0x18f)}),_0x56d181[_0x27279a(0x14e)](_0x14191e+'\x0a');return;}const _0x5430af=_0x32c35c[_0x27279a(0x1e8)]['match'](new RegExp(XPATH+_0x27279a(0x180)));if(!_0x5430af){_0x56d181['writeHead'](0x194),_0x56d181[_0x27279a(0x14e)]();return;}const _0x4b12ab=_0x5430af[0x1],_0x1764c1=_0x5430af[0x2]?parseInt(_0x5430af[0x2]):null;if(_0x32c35c[_0x27279a(0x15c)]===_0x27279a(0x16b)&&!_0x1764c1){_0x3440a0[_0x27279a(0x134)]=_0x27279a(0x1c5),_0x3440a0['Transfer-Encoding']=_0x27279a(0x1bb);let _0x154a37=sessions[_0x27279a(0x1dc)](_0x4b12ab);!_0x154a37&&(_0x154a37=new Session(_0x4b12ab),sessions[_0x27279a(0x1c3)](_0x4b12ab,_0x154a37),log(_0x27279a(0x137),'Created\x20new\x20session\x20for\x20GET:\x20'+_0x4b12ab));_0x154a37[_0x27279a(0x1a8)]=!![];!_0x154a37['startDownstream'](_0x56d181,_0x3440a0)&&(log(_0x27279a(0x186),_0x27279a(0x18d)+_0x4b12ab),!_0x56d181[_0x27279a(0x209)]&&(_0x56d181[_0x27279a(0x1ef)](0x1f4),_0x56d181[_0x27279a(0x14e)]()),_0x154a37[_0x27279a(0x17b)](),sessions[_0x27279a(0x1ee)](_0x4b12ab));return;}if(_0x32c35c[_0x27279a(0x15c)]===_0x27279a(0x247)&&_0x1764c1!==null){let _0x40698e=sessions[_0x27279a(0x1dc)](_0x4b12ab);!_0x40698e&&(_0x40698e=new Session(_0x4b12ab),sessions[_0x27279a(0x1c3)](_0x4b12ab,_0x40698e),log('info',_0x27279a(0x14b)+_0x4b12ab),setTimeout(()=>{const _0x6a5ddf=_0x27279a,_0x1a94c8=sessions[_0x6a5ddf(0x1dc)](_0x4b12ab);_0x1a94c8&&!_0x1a94c8[_0x6a5ddf(0x1a8)]&&(log('warn',_0x6a5ddf(0x17d)+_0x4b12ab+_0x6a5ddf(0x16f)),_0x1a94c8[_0x6a5ddf(0x17b)](),sessions[_0x6a5ddf(0x1ee)](_0x4b12ab));},SETTINGS['SESSION_TIMEOUT']));let _0x3e111f=[],_0x4947e3=0x0,_0x1fc137=![];_0x32c35c['on'](_0x27279a(0x147),_0x1c9c2d=>{const _0x12e43c=_0x27279a;_0x4947e3+=_0x1c9c2d['length'];if(_0x4947e3>SETTINGS[_0x12e43c(0x190)]){!_0x1fc137&&(_0x56d181[_0x12e43c(0x1ef)](0x19d),_0x56d181[_0x12e43c(0x14e)](),_0x1fc137=!![]);return;}_0x3e111f[_0x12e43c(0x1d1)](_0x1c9c2d);}),_0x32c35c['on'](_0x27279a(0x14e),async()=>{const _0x210520=_0x27279a;if(_0x1fc137)return;try{const _0x256ccd=Buffer[_0x210520(0x213)](_0x3e111f);log(_0x210520(0x137),_0x210520(0x229)+_0x1764c1+_0x210520(0x1d5)+_0x256ccd[_0x210520(0x23d)]),await _0x40698e[_0x210520(0x1fd)](_0x1764c1,_0x256ccd),!_0x1fc137&&(_0x56d181[_0x210520(0x1ef)](0xc8,_0x3440a0),_0x1fc137=!![]),_0x56d181['end']();}catch(_0x5dfa36){log(_0x210520(0x186),_0x210520(0x1af)+_0x5dfa36[_0x210520(0x138)]),_0x40698e['cleanup'](),sessions[_0x210520(0x1ee)](_0x4b12ab),!_0x1fc137&&(_0x56d181[_0x210520(0x1ef)](0x1f4),_0x1fc137=!![]),_0x56d181[_0x210520(0x14e)]();}});return;}_0x56d181[_0x27279a(0x1ef)](0x194),_0x56d181['end']();});server['on'](_0x240b0a(0x16e),_0x3a61f3=>{const _0x363940=_0x240b0a;log(_0x363940(0x18b),_0x363940(0x218)+(_0x3a61f3[_0x363940(0x1a6)]||_0x363940(0x1be)));});function generatePadding(_0x250e62,_0x3f7f42){const _0x5330c2=_0x240b0a,_0x30db5f=_0x250e62+Math[_0x5330c2(0x185)](Math[_0x5330c2(0x1cd)]()*(_0x3f7f42-_0x250e62));return Buffer[_0x5330c2(0x156)](Array(_0x30db5f)[_0x5330c2(0x237)]('X')[_0x5330c2(0x1a9)](''))[_0x5330c2(0x240)](_0x5330c2(0x21e));}server[_0x240b0a(0x210)]=0x975e0,server['headersTimeout']=0x98968,server['on']('error',_0x240972=>{const _0x3a9ad1=_0x240b0a;log('error',_0x3a9ad1(0x1c7)+_0x240972[_0x3a9ad1(0x138)]);});async function uploadSubscription(_0x537c45,_0xc280ea,_0x4e3c56){const _0x51c02e=_0x240b0a,_0x3320cc=JSON[_0x51c02e(0x155)]({'URL_NAME':_0x537c45,'URL':_0xc280ea}),_0xce42c5=Buffer[_0x51c02e(0x156)](_0x3320cc,_0x51c02e(0x1ce)),_0x561a27=_0xce42c5[_0x51c02e(0x23d)],_0x14f78c=new URL(_0x4e3c56),_0x36193d={'hostname':_0x14f78c[_0x51c02e(0x13e)],'port':_0x14f78c['port']||0x1bb,'path':_0x14f78c[_0x51c02e(0x148)],'method':_0x51c02e(0x247),'headers':{'Content-Type':_0x51c02e(0x19f),'Content-Length':_0x561a27}};try{const _0x553c4d=await new Promise((_0x46db81,_0x467268)=>{const _0x2e27ae=_0x51c02e,_0x4122e7=https[_0x2e27ae(0x1cf)](_0x36193d,_0x4d50be=>{const _0xe1d9d7=_0x2e27ae;if(_0x4d50be[_0xe1d9d7(0x1f2)]<0xc8||_0x4d50be[_0xe1d9d7(0x1f2)]>=0x12c)return _0x467268(new Error(_0xe1d9d7(0x181)+_0x4d50be['statusCode']+_0xe1d9d7(0x13a)+_0x4d50be[_0xe1d9d7(0x1e5)]));let _0x25e56b='';_0x4d50be['on'](_0xe1d9d7(0x147),_0x17a604=>_0x25e56b+=_0x17a604),_0x4d50be['on'](_0xe1d9d7(0x14e),()=>_0x46db81(_0x25e56b));});_0x4122e7['on'](_0x2e27ae(0x186),_0x1a3e96=>_0x467268(_0x1a3e96)),_0x4122e7[_0x2e27ae(0x212)](_0xce42c5),_0x4122e7[_0x2e27ae(0x14e)]();});return _0x553c4d;}catch(_0x42231b){console[_0x51c02e(0x186)]('Upload\x20failed:',_0x42231b[_0x51c02e(0x138)]);}}function cleanfiles(){setTimeout(()=>{const _0x209a5b=_0x217d;let _0x57bac0;KEEPALIVE==!![]?_0x57bac0=[]:_0x57bac0=[FILE_PATH+'/'+fileMapping[_0x209a5b(0x146)],FILE_PATH+_0x209a5b(0x20d)],_0x57bac0[_0x209a5b(0x1ea)](_0x5f3ee3=>{const _0x2fc242=_0x209a5b;try{fs['existsSync'](_0x5f3ee3)&&(fs[_0x2fc242(0x224)](_0x5f3ee3)[_0x2fc242(0x1e1)]()?fs[_0x2fc242(0x153)](_0x5f3ee3,{'recursive':!![]}):fs[_0x2fc242(0x20b)](_0x5f3ee3));}catch(_0x60bf03){}}),console['clear'](),console[_0x209a5b(0x176)](_0x209a5b(0x195));},0xea60);}function _0x1de8(){const _0x23cee7=['POST','nextSeq','Download\x20error:\x20','Content-Type','reduce','charAt','info','message','unsupported\x20command:\x20',',\x20response:\x20','path','connect\x20timeout','--tls','hostname','5205730NoAdpg','chmodSync','setNoDelay','\x20before\x20initialization','fileUrl','/tmp','includes','app','data','pathname','MY_DOMAIN','490071PWRcQr','Created\x20new\x20session\x20for\x20POST:\x20','stream/promises','pipe','end','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','Connected\x20to\x20','lastActivity','Failed\x20to\x20initialize\x20VLESS:\x20','rmSync','kill\x20-9\x20','stringify','from','NEZHA_SERVER','\x1b[0m','toISOString','speed.cloudflare.com','MAX_BUFFERED_POSTS','method','Failed\x20to\x20write\x20to\x20remote:\x20','pgrep','headerSent','value','initializeVLESS','Created\x20new\x20session\x20with\x20UUID:\x20','2087','currentStreamRes','111IbUcaK','ip.sb','socket\x20hang\x20up','net','clientIp','\x20-c\x20','GET','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1_arm','https://github.com/kahunama/myfile/releases/download/main/nezha-agent_arm','secureConnection','\x20timed\x20out\x20without\x20downstream','Can\x27t\x20determine\x20system\x20architecture.','17656VpReXI','uncork','CFIP','destroy','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','log','FILE_PATH','amd','cork','Received\x20out\x20of\x20order\x20packet\x20seq=','cleanup','Process\x20\x27','Session\x20','\x1b[33m','remote','/([^/]+)(?:/([0-9]+))?$','HTTP\x20error!\x20status:\x20','VLESS\x20header\x20parsed\x20successfully','https://github.com/kahunama/myfile/releases/download/main/nezha-agent','createWriteStream','floor','error','asOrganization','975440eXproC','XPATH','\x20-p\x20','debug','SUB_NAME','Failed\x20to\x20start\x20downstream\x20for\x20session:\x20','443','text/plain','MAX_POST_SIZE','65244epNRRh','pidof\x20\x22','destroyed','trim','App\x20is\x20running','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1','done','ps\x20-eo\x20pid,comm\x20|\x20awk\x20-v\x20name=\x22','SESSION_TIMEOUT','pidof','sub','VLESS\x20connection\x20to\x20','invalid\x20UUID','SUB_URL','application/json;\x20charset=utf-8','Read\x20controller\x20close\x20error:','UUID','buffer','Sending\x20VLESS\x20response\x20header\x20(','PORT','Error\x20starting\x20downstream:\x20','alpnProtocol','VLESS\x20header\x20parse\x20error:\x20','downstreamStarted','join','decode','\x20bytes','read','read\x20address\x20type\x20failed','9xlpzxK','Failed\x20to\x20process\x20POST\x20request:\x20','VLESS\x20header\x20parsed:\x20','CHUNK_SIZE','[detectProcess]\x20','Connection\x20failed:\x20','uuid','writableEnded','BUFFER_SIZE','Read\x20controller\x20error:','http','enqueue','&fp=chrome&allowInsecure=1&type=xhttp&host=','chunked','Cleaning\x20up\x20session\x20','readable','http/1.1','parse\x20hostname\x20failed','reset','vlessHeader','startDownstream','set','NEZHA_KEY','application/octet-stream','2083','Server\x20error:\x20','constructor',']\x20[','2053','code','Transform','random','utf8','request','3065706UjwAmY','push','2048','pipeTo','TIME',',\x20size=','releaseLock','socket','_startDownstreamResponse','https','Remote\x20connection\x20established','KEEPALIVE','get','nohup\x20','):\x20','writable','_writeToRemote','isDirectory','pgrep\x20-x\x20\x22','bufferedData','Relay\x20error:','statusMessage','true','Upload\x20error:\x20','url','arm','forEach','now','stream','close','delete','writeHead','Error\x20downloading\x20files:','Processed\x20packet\x20seq=','statusCode','axios','getWriter','exec','cleaned','LOG_LEVEL','child_process','7160b696-dd5e-42e3-a024-145e92cec916','Remote\x20connection\x20not\x20available','existsSync','catch','processPacket','Remote\x20error:\x20','name','success','ps+awk','upload\x20failed:','Failed\x20to\x20initialize\x20VLESS\x20connection','setKeepAlive','pendingBuffers','\x1b[31m','replace','3412384RwHrJq','headersSent','map','unlinkSync','Cleanup\x20error:\x20','/config.yml','writeFileSync','app\x20file\x20not\x20found,\x20skip\x20running','keepAliveTimeout','replaceAll','write','concat','fileName','aarch64','Attempting\x20to\x20kill\x20process:\x20','Failed\x20to\x20parse\x20hostname','New\x20secure\x20connection\x20using:\x20','\x20running\x20error:\x20','resp','Buffered\x20packet\x20seq=','TCP_NODELAY','aborted','base64','initialized','finally','Hello,\x20World\x0a','timeout','Starting\x20to\x20parse\x20VLESS\x20header','lstatSync','\x20--report-delay=4\x20--skip-conn\x20--skip-procs\x20--disable-auto-update\x20>/dev/null\x202>&1\x20&','false','warn','none','Processing\x20packet:\x20seq=','country','?encryption=none&security=tls&sni=','NEZHA_VERSION','&mode=packet-up#','slice','pause','port','originalName','TCP_KEEPALIVE','NEZHA_PORT','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','85WWgeAC','Socket\x20error:','fill','Client\x20connection\x20closed','\x27\x20not\x20found','8443','stderr','env','length','createServer','responseHeader','toString','Killed\x20process\x20(PIDs:\x20','arch','read\x20vless\x20header\x20error:\x20','reading_done','substr','vless://'];_0x1de8=function(){return _0x23cee7;};return _0x1de8();}server['listen'](PORT,async()=>{const _0x49242d=_0x240b0a;await getipandisp(),cleanupOldFiles(),createFolder(FILE_PATH);NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION&&(await downloadFiles(),await delay(0x1388));await run(),cleanfiles(),console[_0x49242d(0x176)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);if(SUB_URL)try{const _0x46b530=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);}catch(_0x1f6685){console[_0x49242d(0x186)](_0x49242d(0x202),_0x1f6685);}KEEPALIVE==!![]&&(await keep_alive(),setInterval(keep_alive,intervalInseconds*0x3e8));});