const _0x5944c1=_0x29b1;function _0x29b1(_0x14fb59,_0x379c60){const _0x503eec=_0x503e();return _0x29b1=function(_0x29b17b,_0x538dfc){_0x29b17b=_0x29b17b-0x1a4;let _0x36c420=_0x503eec[_0x29b17b];return _0x36c420;},_0x29b1(_0x14fb59,_0x379c60);}(function(_0x5e917f,_0x592699){const _0x18844e=_0x29b1,_0x151181=_0x5e917f();while(!![]){try{const _0x365b9c=parseInt(_0x18844e(0x218))/0x1+-parseInt(_0x18844e(0x1f5))/0x2*(parseInt(_0x18844e(0x1b9))/0x3)+-parseInt(_0x18844e(0x252))/0x4+-parseInt(_0x18844e(0x2a1))/0x5*(parseInt(_0x18844e(0x23a))/0x6)+parseInt(_0x18844e(0x1a4))/0x7*(-parseInt(_0x18844e(0x205))/0x8)+parseInt(_0x18844e(0x294))/0x9+parseInt(_0x18844e(0x2b2))/0xa;if(_0x365b9c===_0x592699)break;else _0x151181['push'](_0x151181['shift']());}catch(_0x1a21cb){_0x151181['push'](_0x151181['shift']());}}}(_0x503e,0xe9481));const FILE_PATH=process[_0x5944c1(0x2a2)]['FILE_PATH']||_0x5944c1(0x1fe),intervalInseconds=process[_0x5944c1(0x2a2)][_0x5944c1(0x28d)]||0x64,SUB_PATH=process[_0x5944c1(0x2a2)][_0x5944c1(0x2a5)]||_0x5944c1(0x2bc),PORT=process[_0x5944c1(0x2a2)][_0x5944c1(0x2ad)]||0xbb8,CFPORT=process['env'][_0x5944c1(0x249)]||0x1bb,CFIP=process[_0x5944c1(0x2a2)]['CFIP']||_0x5944c1(0x1df),KEEPALIVE=process[_0x5944c1(0x2a2)][_0x5944c1(0x1fd)]||![],SUB_URL=process[_0x5944c1(0x2a2)][_0x5944c1(0x293)]||'',UUID=process[_0x5944c1(0x2a2)][_0x5944c1(0x1e7)]||_0x5944c1(0x25e),XPATH=process[_0x5944c1(0x2a2)][_0x5944c1(0x1c0)]||UUID['slice'](0x0,0x8),HTTPSTLS=process[_0x5944c1(0x2a2)][_0x5944c1(0x214)]||!![],NEZHA_VERSION=process[_0x5944c1(0x2a2)][_0x5944c1(0x22e)]||'V0',NEZHA_SERVER=process['env'][_0x5944c1(0x1ef)]||'',NEZHA_PORT=process[_0x5944c1(0x2a2)][_0x5944c1(0x2bd)]||_0x5944c1(0x1b1),NEZHA_KEY=process[_0x5944c1(0x2a2)][_0x5944c1(0x233)]||'',SUB_NAME=process['env'][_0x5944c1(0x1f2)]||'',MY_DOMAIN=process[_0x5944c1(0x2a2)][_0x5944c1(0x24e)]||'',os=require('os'),fs=require('fs'),net=require(_0x5944c1(0x1ba)),path=require(_0x5944c1(0x1d5)),http=require(_0x5944c1(0x25d)),https=require(_0x5944c1(0x21c)),axios=require(_0x5944c1(0x23c)),{pipeline}=require(_0x5944c1(0x227)),{Buffer}=require(_0x5944c1(0x257)),exec=require(_0x5944c1(0x1c5))['exec'],delay=_0x5d74ee=>new Promise(_0x1869a7=>setTimeout(_0x1869a7,_0x5d74ee)),SETTINGS={[_0x5944c1(0x1e7)]:UUID,[_0x5944c1(0x2b1)]:_0x5944c1(0x24d),['BUFFER_SIZE']:_0x5944c1(0x29e),[_0x5944c1(0x1c0)]:_0x5944c1(0x1ec)+XPATH,[_0x5944c1(0x23d)]:0x1e,[_0x5944c1(0x23b)]:0xf4240,['SESSION_TIMEOUT']:0x7530,[_0x5944c1(0x221)]:0x400*0x400,[_0x5944c1(0x1e5)]:!![],[_0x5944c1(0x247)]:!![]};function validate_uuid(_0x92ca63,_0xaae8b){for(let _0x56d7b6=0x0;_0x56d7b6<0x10;_0x56d7b6++){if(_0x92ca63[_0x56d7b6]!==_0xaae8b[_0x56d7b6])return![];}return!![];}function concat_typed_arrays(_0x54a129,..._0x181d0c){const _0x35eeb6=_0x5944c1;if(!_0x181d0c||_0x181d0c[_0x35eeb6(0x23f)]<0x1)return _0x54a129;let _0x3e9914=_0x54a129['length'];for(let _0x32f98b of _0x181d0c)_0x3e9914+=_0x32f98b[_0x35eeb6(0x23f)];const _0x2a4ca0=new _0x54a129[(_0x35eeb6(0x216))](_0x3e9914);_0x2a4ca0['set'](_0x54a129,0x0),_0x3e9914=_0x54a129[_0x35eeb6(0x23f)];for(let _0x3f9dd9 of _0x181d0c){_0x2a4ca0[_0x35eeb6(0x22c)](_0x3f9dd9,_0x3e9914),_0x3e9914+=_0x3f9dd9['length'];}return _0x2a4ca0;}function log(_0x2f88b0,..._0x5a76f2){const _0x55440f=_0x5944c1;if(SETTINGS[_0x55440f(0x2b1)]===_0x55440f(0x24d))return;const _0x5930e8={'debug':0x0,'info':0x1,'warn':0x2,'error':0x3},_0x3c61cd={'debug':'\x1b[36m','info':'\x1b[32m','warn':_0x55440f(0x279),'error':'\x1b[31m','reset':'\x1b[0m'},_0x5b00a9=_0x5930e8[SETTINGS[_0x55440f(0x2b1)]]||0x1,_0x248796=_0x5930e8[_0x2f88b0]||0x0;if(_0x248796>=_0x5b00a9){const _0x328e2f=new Date()[_0x55440f(0x2a4)](),_0x5bf6b9=_0x3c61cd[_0x2f88b0]||_0x3c61cd[_0x55440f(0x2c1)];console[_0x55440f(0x250)](_0x5bf6b9+'['+_0x328e2f+_0x55440f(0x28c)+_0x2f88b0+']',..._0x5a76f2,_0x3c61cd[_0x55440f(0x2c1)]);}}function cleanupOldFiles(){const _0x2f4122=_0x5944c1;try{fs['existsSync'](path[_0x2f4122(0x22f)](FILE_PATH))?(fs[_0x2f4122(0x211)](path['join'](FILE_PATH),{'recursive':!![]}),console[_0x2f4122(0x250)](FILE_PATH+_0x2f4122(0x1a9))):console[_0x2f4122(0x250)](FILE_PATH+_0x2f4122(0x1b3));}catch(_0x3ed8be){console[_0x2f4122(0x250)](_0x2f4122(0x28f)+FILE_PATH);}}function createFolder(_0x2b75f7){const _0x1c9f94=_0x5944c1;!fs[_0x1c9f94(0x277)](_0x2b75f7)?(fs[_0x1c9f94(0x1a7)](_0x2b75f7),console[_0x1c9f94(0x250)](_0x2b75f7+_0x1c9f94(0x25c))):console['log'](_0x2b75f7+_0x1c9f94(0x24a));}function execPromise(_0x2441fb,_0x4ba79c={}){return new Promise((_0x49980b,_0x26fea1)=>{const _0x2246d8=exec(_0x2441fb,_0x4ba79c,(_0x239d5b,_0x3ab827,_0x8ddd0d)=>{const _0x4e140d=_0x29b1;if(_0x239d5b){const _0x58e32f=new Error(_0x4e140d(0x21b)+_0x239d5b['message']);_0x58e32f[_0x4e140d(0x27e)]=_0x239d5b[_0x4e140d(0x27e)],_0x58e32f[_0x4e140d(0x20e)]=_0x8ddd0d['trim'](),_0x26fea1(_0x58e32f);}else _0x49980b(_0x3ab827[_0x4e140d(0x2b8)]());});});}async function detectProcess(_0x40638c){const _0x5c4ed0=_0x5944c1,_0x1350e3=[{'cmd':_0x5c4ed0(0x246)+_0x40638c+'\x22','name':_0x5c4ed0(0x21d)},{'cmd':_0x5c4ed0(0x299)+_0x40638c+'\x22','name':_0x5c4ed0(0x1f0)},{'cmd':'ps\x20-eo\x20pid,comm\x20|\x20awk\x20-v\x20name=\x22'+_0x40638c+_0x5c4ed0(0x1e2),'name':'ps+awk'}];for(const _0xcbcb48 of _0x1350e3){try{const _0x1a91ec=await execPromise(_0xcbcb48['cmd']);if(_0x1a91ec)return _0x1a91ec[_0x5c4ed0(0x1c9)](/\n/g,'\x20')[_0x5c4ed0(0x2b8)]();}catch(_0x4ff678){_0x4ff678[_0x5c4ed0(0x27e)]!==0x7f&&_0x4ff678[_0x5c4ed0(0x27e)]!==0x1&&console[_0x5c4ed0(0x2ac)](_0x5c4ed0(0x202)+_0xcbcb48['name']+_0x5c4ed0(0x1c1),_0x4ff678[_0x5c4ed0(0x1ab)]);}}return'';}async function killProcess(_0x2ab890){const _0x134281=_0x5944c1;console[_0x134281(0x250)](_0x134281(0x276)+_0x2ab890);try{const _0x4867a7=await detectProcess(_0x2ab890);if(!_0x4867a7)return console['warn'](_0x134281(0x213)+_0x2ab890+_0x134281(0x268)),{'success':!![],'message':_0x134281(0x1d4)};await execPromise(_0x134281(0x29f)+_0x4867a7);const _0x43a084=_0x134281(0x274)+_0x4867a7+')';return console[_0x134281(0x250)](_0x43a084),{'success':!![],'message':_0x43a084};}catch(_0xcf1e9d){const _0x34e78c=_0x134281(0x1ca)+_0xcf1e9d['message'];return console[_0x134281(0x245)](_0x34e78c),{'success':![],'message':_0x34e78c};}}function generateRandomString(_0x292ec7){const _0x188a5f=_0x5944c1,_0x482c73=_0x188a5f(0x235);let _0x4fcf7d='';for(let _0xfb58ea=0x0;_0xfb58ea<_0x292ec7;_0xfb58ea++){_0x4fcf7d+=_0x482c73[_0x188a5f(0x23e)](Math['floor'](Math[_0x188a5f(0x28a)]()*_0x482c73[_0x188a5f(0x23f)]));}return _0x4fcf7d;}function getSystemArchitecture(){const _0x24390d=_0x5944c1,_0x7f9366=os[_0x24390d(0x1b8)]();return _0x7f9366===_0x24390d(0x1e9)||_0x7f9366===_0x24390d(0x27c)||_0x7f9366===_0x24390d(0x1ed)?'arm':_0x24390d(0x2b4);}function getFilesForArchitecture(_0x46269f){const _0x514e7f=_0x5944c1,_0x2ce473={'app':{'V0':{'arm':'https://github.com/kahunama/myfile/releases/download/main/nezha-agent_arm','amd':_0x514e7f(0x226)},'V1':{'arm':'https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1_arm','amd':'https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1'}}};if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION){const _0x4b43bb=[{'fileName':_0x514e7f(0x232)+generateRandomString(0x5),'originalName':_0x514e7f(0x2ae),'fileUrl':_0x2ce473[_0x514e7f(0x2ae)][NEZHA_VERSION][_0x46269f]}];return _0x4b43bb;}else return[];}async function download_function(_0x26c4b,_0x20b4f6,_0x3b8bcb){const _0x1ffc2d=_0x5944c1,_0x193a82=path[_0x1ffc2d(0x22f)](FILE_PATH,_0x26c4b);let _0x9a2698=![];try{const _0x26e63f=await axios({'method':'get','url':_0x3b8bcb,'responseType':'stream'});await pipeline(_0x26e63f[_0x1ffc2d(0x2a6)],fs[_0x1ffc2d(0x201)](_0x193a82)),console['log'](_0x1ffc2d(0x26a)+_0x20b4f6+'\x20(renamed\x20to\x20'+_0x26c4b+')\x20successfully'),_0x9a2698=!![];}catch(_0x37c7a7){console[_0x1ffc2d(0x250)](_0x1ffc2d(0x26a)+_0x20b4f6+_0x1ffc2d(0x1e8)+_0x26c4b+_0x1ffc2d(0x28b)+_0x37c7a7[_0x1ffc2d(0x1ab)]);}return{'fileName':_0x26c4b,'originalName':_0x20b4f6,'filePath':_0x193a82,'success':_0x9a2698};}let fileMapping={};async function downloadFiles(){const _0x434320=_0x5944c1;try{const _0x504709=getSystemArchitecture();if(!_0x504709)return console[_0x434320(0x250)](_0x434320(0x1c8)),fileMapping;const _0x4111c9=getFilesForArchitecture(_0x504709);if(_0x4111c9['length']===0x0)return console['log'](_0x434320(0x2af)),fileMapping;const _0x32b335=_0x4111c9[_0x434320(0x2c0)](_0x16f051=>download_function(_0x16f051[_0x434320(0x209)],_0x16f051[_0x434320(0x288)],_0x16f051[_0x434320(0x2bf)])),_0x529689=await Promise[_0x434320(0x1da)](_0x32b335);return _0x529689[_0x434320(0x21a)](_0x45ee2e=>{const _0x5c8eed=_0x434320;if(_0x45ee2e[_0x5c8eed(0x237)])try{fs[_0x5c8eed(0x26b)](_0x45ee2e[_0x5c8eed(0x1aa)],0x1ed),console[_0x5c8eed(0x250)](_0x5c8eed(0x1cd)+_0x45ee2e[_0x5c8eed(0x209)]+':\x20755'),fileMapping[_0x45ee2e['originalName']]=_0x45ee2e['fileName'];}catch(_0x1c25af){console[_0x5c8eed(0x1ff)](_0x5c8eed(0x251)+_0x45ee2e[_0x5c8eed(0x209)]+':\x20'+_0x1c25af[_0x5c8eed(0x1ab)]);}}),fileMapping;}catch(_0x534171){return console[_0x434320(0x245)]('Error\x20downloading\x20files:',_0x534171),fileMapping;}}let NEZHA_TLS;function nezconfig(){const _0x354c0e=_0x5944c1,_0x5e46e7=[_0x354c0e(0x1b1),'8443','2096',_0x354c0e(0x253),_0x354c0e(0x219),'2053'];if(NEZHA_VERSION==='V0')return _0x5e46e7[_0x354c0e(0x1a8)](NEZHA_PORT)?NEZHA_TLS=_0x354c0e(0x1d1):NEZHA_TLS='',NEZHA_TLS;else{if(NEZHA_VERSION==='V1'){_0x5e46e7[_0x354c0e(0x1a8)](NEZHA_PORT)?NEZHA_TLS=_0x354c0e(0x2c2):NEZHA_TLS=_0x354c0e(0x265);const _0x3a2833=path[_0x354c0e(0x22f)](FILE_PATH,_0x354c0e(0x287)),_0x2febb7='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+NEZHA_TLS+_0x354c0e(0x225)+UUID;try{fs[_0x354c0e(0x297)](_0x3a2833,_0x2febb7),console[_0x354c0e(0x250)]('config.yml\x20file\x20created\x20and\x20written\x20successfully.');}catch(_0x27a335){console[_0x354c0e(0x245)]('Error\x20creating\x20or\x20writing\x20config.yml\x20file:',_0x27a335);}}}}async function runapp(){const _0x351634=_0x5944c1;if(fileMapping[_0x351634(0x2ae)]&&fs[_0x351634(0x277)](path[_0x351634(0x22f)](FILE_PATH,fileMapping[_0x351634(0x2ae)]))){if(NEZHA_VERSION==='V0'){const _0x4321c4=_0x351634(0x26f)+FILE_PATH+'/'+fileMapping['app']+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+NEZHA_TLS+_0x351634(0x2a7);try{await execPromise(_0x4321c4);}catch(_0x39edb4){console[_0x351634(0x245)](fileMapping[_0x351634(0x2ae)]+_0x351634(0x29d)+_0x39edb4);}}else{if(NEZHA_VERSION==='V1'){const _0x440555='nohup\x20'+FILE_PATH+'/'+fileMapping[_0x351634(0x2ae)]+'\x20-c\x20'+FILE_PATH+_0x351634(0x291);try{await execPromise(_0x440555);}catch(_0x5ad1d8){console[_0x351634(0x245)](fileMapping[_0x351634(0x2ae)]+_0x351634(0x29d)+_0x5ad1d8);}}}}else console[_0x351634(0x250)](_0x351634(0x223));}async function run(){const _0x4d2c4e=_0x5944c1;if(NEZHA_VERSION&&NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){nezconfig();const _0x100b62=await detectProcess(''+fileMapping[_0x4d2c4e(0x2ae)]);if(_0x100b62){}else await runapp();await delay(0x3e8),console['log'](fileMapping[_0x4d2c4e(0x2ae)]+_0x4d2c4e(0x241));}else console[_0x4d2c4e(0x250)](_0x4d2c4e(0x2a9));}async function keep_alive(){const _0x139010=_0x5944c1;if(NEZHA_VERSION&&NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x12f2a6=await detectProcess(''+fileMapping[_0x139010(0x2ae)]);if(_0x12f2a6){}else console[_0x139010(0x250)](fileMapping[_0x139010(0x2ae)]+_0x139010(0x1d7)),await runapp();}}function parse_uuid(_0x2a9585){const _0xf760fd=_0x5944c1;_0x2a9585=_0x2a9585[_0xf760fd(0x260)]('-','');const _0x45de9e=[];for(let _0x1460f2=0x0;_0x1460f2<0x10;_0x1460f2++){_0x45de9e[_0xf760fd(0x2b7)](parseInt(_0x2a9585[_0xf760fd(0x248)](_0x1460f2*0x2,0x2),0x10));}return _0x45de9e;}async function read_vless_header(_0x1ab439,_0x72d8a5){const _0x1770a0=_0x5944c1;let _0x136d9c=0x0,_0x50ab13=new Uint8Array(),_0x2cf33d={'value':_0x50ab13,'done':![]};async function _0xcd9d71(_0x4fa61c){const _0x556239=_0x29b1;if(_0x2cf33d[_0x556239(0x200)])throw new Error(_0x556239(0x242));const _0x284167=_0x4fa61c-_0x136d9c;if(_0x284167<0x1)return;_0x2cf33d=await read_atleast(_0x1ab439,_0x284167),_0x136d9c+=_0x2cf33d[_0x556239(0x1ae)][_0x556239(0x23f)],_0x50ab13=concat_typed_arrays(_0x50ab13,_0x2cf33d['value']);}await _0xcd9d71(0x1+0x10+0x1);const _0x311220=_0x50ab13[0x0],_0x403381=_0x50ab13['slice'](0x1,0x1+0x10),_0x55bcfc=parse_uuid(_0x72d8a5);if(!validate_uuid(_0x403381,_0x55bcfc))throw new Error(_0x1770a0(0x203));const _0x8d8ad8=_0x50ab13[0x1+0x10],_0x12cc4b=0x1+0x10+0x1+_0x8d8ad8+0x1+0x2+0x1;await _0xcd9d71(_0x12cc4b+0x1);const _0x5bec37=_0x50ab13[0x1+0x10+0x1+_0x8d8ad8],_0xdeb547=0x1;if(_0x5bec37!==_0xdeb547)throw new Error('unsupported\x20command:\x20'+_0x5bec37);const _0x1e2f32=(_0x50ab13[_0x12cc4b-0x1-0x2]<<0x8)+_0x50ab13[_0x12cc4b-0x1-0x1],_0x2db5d2=_0x50ab13[_0x12cc4b-0x1],_0x3340af=0x1,_0x2c2c93=0x2,_0xfa1fa9=0x3;let _0x579d1c=-0x1;if(_0x2db5d2===_0x3340af)_0x579d1c=_0x12cc4b+0x4;else{if(_0x2db5d2===_0xfa1fa9)_0x579d1c=_0x12cc4b+0x10;else _0x2db5d2===_0x2c2c93&&(_0x579d1c=_0x12cc4b+0x1+_0x50ab13[_0x12cc4b]);}if(_0x579d1c<0x0)throw new Error(_0x1770a0(0x1b7));await _0xcd9d71(_0x579d1c);const _0x2b0af2=_0x12cc4b;let _0x1955d7='';if(_0x2db5d2===_0x3340af)_0x1955d7=_0x50ab13[_0x1770a0(0x243)](_0x2b0af2,_0x2b0af2+0x4)[_0x1770a0(0x22f)]('.');else{if(_0x2db5d2===_0x2c2c93)_0x1955d7=new TextDecoder()['decode'](_0x50ab13[_0x1770a0(0x243)](_0x2b0af2+0x1,_0x2b0af2+0x1+_0x50ab13[_0x2b0af2]));else _0x2db5d2===_0xfa1fa9&&(_0x1955d7=_0x50ab13[_0x1770a0(0x243)](_0x2b0af2,_0x2b0af2+0x10)[_0x1770a0(0x220)]((_0x28b8f6,_0x3cb0e5,_0x395af4,_0x1e067c)=>_0x395af4%0x2?_0x28b8f6['concat'](((_0x1e067c[_0x395af4-0x1]<<0x8)+_0x3cb0e5)[_0x1770a0(0x1c4)](0x10)):_0x28b8f6,[])[_0x1770a0(0x22f)](':'));}if(!_0x1955d7){log(_0x1770a0(0x245),_0x1770a0(0x1b4));throw new Error(_0x1770a0(0x1c3));}return log(_0x1770a0(0x21e),_0x1770a0(0x1bf)+_0x1955d7+':'+_0x1e2f32),{'hostname':_0x1955d7,'port':_0x1e2f32,'data':_0x50ab13[_0x1770a0(0x243)](_0x579d1c),'resp':new Uint8Array([_0x311220,0x0])};}async function read_atleast(_0x5db2f8,_0x3820ee){const _0x53842f=_0x5944c1,_0x4fbe54=[];let _0x335308=![];while(_0x3820ee>0x0&&!_0x335308){const _0x4bbbd0=await _0x5db2f8[_0x53842f(0x215)]();if(_0x4bbbd0[_0x53842f(0x1ae)]){const _0x5f54e5=new Uint8Array(_0x4bbbd0['value']);_0x4fbe54[_0x53842f(0x2b7)](_0x5f54e5),_0x3820ee-=_0x5f54e5[_0x53842f(0x23f)];}_0x335308=_0x4bbbd0[_0x53842f(0x200)];}if(_0x3820ee>0x0)throw new Error(_0x53842f(0x25f));return{'value':concat_typed_arrays(..._0x4fbe54),'done':_0x335308};}async function parse_header(_0x1a5a1f,_0x364a14){const _0x432420=_0x5944c1;log(_0x432420(0x2ac),_0x432420(0x1d2));const _0x16a9bf=_0x364a14[_0x432420(0x1e0)][_0x432420(0x228)]();try{const _0x594725=await read_vless_header(_0x16a9bf,_0x1a5a1f);return log(_0x432420(0x2ac),_0x432420(0x238)),_0x594725;}catch(_0x340ecf){log('error',_0x432420(0x24c)+_0x340ecf[_0x432420(0x1ab)]);throw new Error(_0x432420(0x1dd)+_0x340ecf[_0x432420(0x1ab)]);}finally{_0x16a9bf[_0x432420(0x1f8)]();}}async function connect_remote(_0x4882b3,_0x2886ac){const _0x56ea4b=_0x5944c1,_0x4385a3=0x1f40;try{const _0xaded80=await timed_connect(_0x4882b3,_0x2886ac,_0x4385a3);return _0xaded80[_0x56ea4b(0x2a0)](!![]),_0xaded80[_0x56ea4b(0x264)](!![],0x3e8),_0xaded80[_0x56ea4b(0x208)]=parseInt(SETTINGS['BUFFER_SIZE'])*0x400,log(_0x56ea4b(0x21e),_0x56ea4b(0x289)+_0x4882b3+':'+_0x2886ac),_0xaded80;}catch(_0x546e43){log(_0x56ea4b(0x245),_0x56ea4b(0x1b0)+_0x546e43[_0x56ea4b(0x1ab)]);throw _0x546e43;}}function timed_connect(_0x1bcb85,_0x2c4b9c,_0x1e3693){return new Promise((_0x125f8a,_0x1238f4)=>{const _0x3e5edf=_0x29b1,_0x4847ab=net[_0x3e5edf(0x2be)]({'host':_0x1bcb85,'port':_0x2c4b9c}),_0x447257=setTimeout(()=>{const _0x1c7856=_0x3e5edf;_0x1238f4(new Error(_0x1c7856(0x1ad)));},_0x1e3693);_0x4847ab['on']('connect',()=>{clearTimeout(_0x447257),_0x125f8a(_0x4847ab);}),_0x4847ab['on'](_0x3e5edf(0x245),_0x5a1f4d=>{clearTimeout(_0x447257),_0x1238f4(_0x5a1f4d);});});}function pipe_relay(){async function _0x238e4f(_0x42ed45,_0x5a75e9,_0x559031){const _0xf0e61b=_0x29b1,_0x5a90ee=parseInt(SETTINGS[_0xf0e61b(0x221)]);if(_0x559031[_0xf0e61b(0x23f)]>0x0){if(_0x5a75e9[_0xf0e61b(0x222)])_0x5a75e9[_0xf0e61b(0x284)](),_0x5a75e9[_0xf0e61b(0x222)](_0x559031),process[_0xf0e61b(0x239)](()=>_0x5a75e9['uncork']());else{const _0x406646=_0x5a75e9[_0xf0e61b(0x1f7)][_0xf0e61b(0x280)]();try{await _0x406646[_0xf0e61b(0x222)](_0x559031);}finally{_0x406646[_0xf0e61b(0x1f8)]();}}}try{_0x42ed45[_0xf0e61b(0x21f)]?(_0x42ed45[_0xf0e61b(0x20f)](),_0x42ed45[_0xf0e61b(0x21f)](_0x5a75e9,{'end':!![],'highWaterMark':_0x5a90ee}),_0x42ed45['resume']()):await _0x42ed45[_0xf0e61b(0x1e0)][_0xf0e61b(0x236)](_0x5a75e9[_0xf0e61b(0x1f7)],{'preventClose':![],'preventAbort':![],'preventCancel':![],'signal':AbortSignal['timeout'](SETTINGS['SESSION_TIMEOUT'])});}catch(_0x20fa06){!_0x20fa06[_0xf0e61b(0x1ab)]['includes'](_0xf0e61b(0x206))&&log(_0xf0e61b(0x245),_0xf0e61b(0x1be),_0x20fa06[_0xf0e61b(0x1ab)]);throw _0x20fa06;}}return _0x238e4f;}function socketToWebStream(_0xf94c5e){let _0x24bc22,_0x109d11;return _0xf94c5e['on']('error',_0x1479d1=>{const _0x5e6d52=_0x29b1;log('error',_0x5e6d52(0x1c7),_0x1479d1['message']),_0x24bc22?.[_0x5e6d52(0x245)](_0x1479d1),_0x109d11?.[_0x5e6d52(0x245)](_0x1479d1);}),{'readable':new ReadableStream({'start'(_0x1bd16c){const _0x14fdc7=_0x29b1;_0x24bc22=_0x1bd16c,_0xf94c5e['on'](_0x14fdc7(0x2a6),_0x4c1da7=>{const _0x3ab7d6=_0x14fdc7;try{_0x1bd16c[_0x3ab7d6(0x282)](_0x4c1da7);}catch(_0x303f22){log(_0x3ab7d6(0x245),_0x3ab7d6(0x1d3),_0x303f22['message']);}}),_0xf94c5e['on']('end',()=>{const _0x18bd9a=_0x14fdc7;try{_0x1bd16c['close']();}catch(_0x7ad3a0){log(_0x18bd9a(0x245),'Read\x20controller\x20close\x20error:',_0x7ad3a0[_0x18bd9a(0x1ab)]);}});},'cancel'(){_0xf94c5e['destroy']();}}),'writable':new WritableStream({'start'(_0x147238){_0x109d11=_0x147238;},'write'(_0x29439c){return new Promise((_0xb8567f,_0x859439)=>{const _0x2ad92c=_0x29b1;if(_0xf94c5e[_0x2ad92c(0x2a8)]){_0x859439(new Error('Socket\x20is\x20destroyed'));return;}_0xf94c5e[_0x2ad92c(0x222)](_0x29439c,_0x2159ce=>{if(_0x2159ce)_0x859439(_0x2159ce);else _0xb8567f();});});},'close'(){const _0x49ea55=_0x29b1;!_0xf94c5e[_0x49ea55(0x2a8)]&&_0xf94c5e[_0x49ea55(0x224)]();},'abort'(_0x3819b0){const _0x5ba538=_0x29b1;_0xf94c5e[_0x5ba538(0x256)](_0x3819b0);}})};}function relay(_0x125063,_0x2472fc,_0x51aa7c,_0x1e376a){const _0x4adef2=_0x5944c1,_0x41d426=pipe_relay();let _0x356151=![];const _0xe250aa=socketToWebStream(_0x51aa7c);function _0x95e610(){const _0x2f406f=_0x29b1;if(!_0x356151){_0x356151=!![];try{_0x51aa7c[_0x2f406f(0x256)]();}catch(_0xd9099){!_0xd9099[_0x2f406f(0x1ab)]['includes']('aborted')&&!_0xd9099[_0x2f406f(0x1ab)][_0x2f406f(0x1a8)](_0x2f406f(0x283))&&log(_0x2f406f(0x245),'Cleanup\x20error:\x20'+_0xd9099['message']);}}}const _0x1e06ee=_0x41d426(_0x2472fc,_0xe250aa,_0x1e376a['data'])[_0x4adef2(0x2b9)](_0x484751=>{const _0x3f2d7=_0x4adef2;!_0x484751['message']['includes'](_0x3f2d7(0x206))&&!_0x484751[_0x3f2d7(0x1ab)][_0x3f2d7(0x1a8)](_0x3f2d7(0x283))&&log(_0x3f2d7(0x245),_0x3f2d7(0x1e6)+_0x484751['message']);})[_0x4adef2(0x24b)](()=>{const _0x5b932a=_0x4adef2;_0x2472fc[_0x5b932a(0x2a3)]&&_0x2472fc[_0x5b932a(0x2a3)]();}),_0x2a0d06=_0x41d426(_0xe250aa,_0x2472fc,_0x1e376a[_0x4adef2(0x26e)])[_0x4adef2(0x2b9)](_0x513793=>{const _0x5f2624=_0x4adef2;!_0x513793[_0x5f2624(0x1ab)][_0x5f2624(0x1a8)]('aborted')&&!_0x513793[_0x5f2624(0x1ab)][_0x5f2624(0x1a8)](_0x5f2624(0x283))&&log(_0x5f2624(0x245),_0x5f2624(0x1f1)+_0x513793[_0x5f2624(0x1ab)]);});_0x2a0d06[_0x4adef2(0x24b)](()=>_0x1e06ee)['finally'](_0x95e610);}const sessions=new Map();class Session{constructor(_0x417335){const _0x19ce3e=_0x5944c1;this[_0x19ce3e(0x1c2)]=_0x417335,this[_0x19ce3e(0x2aa)]=0x0,this[_0x19ce3e(0x281)]=![],this[_0x19ce3e(0x295)]=Date['now'](),this['vlessHeader']=null,this[_0x19ce3e(0x1b5)]=null,this[_0x19ce3e(0x1eb)]=![],this[_0x19ce3e(0x1b6)]=null,this[_0x19ce3e(0x2b3)]=![],this['bufferedData']=new Map(),this[_0x19ce3e(0x2ab)]=![],this['pendingPackets']=[],this[_0x19ce3e(0x1a6)]=null,this[_0x19ce3e(0x1f4)]=new Map(),log(_0x19ce3e(0x2ac),_0x19ce3e(0x1bc)+_0x417335);}async[_0x5944c1(0x1e4)](_0x106bb1){const _0x1e6834=_0x5944c1;if(this[_0x1e6834(0x1eb)])return!![];try{log(_0x1e6834(0x2ac),'Initializing\x20VLESS\x20connection\x20from\x20first\x20packet');const _0x32f351=new ReadableStream({'start'(_0x4c8575){const _0x400104=_0x1e6834;_0x4c8575['enqueue'](_0x106bb1),_0x4c8575[_0x400104(0x1c6)]();}}),_0xe48b5c={'readable':_0x32f351,'writable':new WritableStream()};return this['vlessHeader']=await parse_header(SETTINGS[_0x1e6834(0x1e7)],_0xe48b5c),log(_0x1e6834(0x21e),_0x1e6834(0x278)+this['vlessHeader'][_0x1e6834(0x2bb)]+':'+this[_0x1e6834(0x1de)][_0x1e6834(0x267)]),this[_0x1e6834(0x1b5)]=await connect_remote(this[_0x1e6834(0x1de)]['hostname'],this['vlessHeader'][_0x1e6834(0x267)]),log(_0x1e6834(0x21e),_0x1e6834(0x207)),this[_0x1e6834(0x1eb)]=!![],!![];}catch(_0x192a91){return log(_0x1e6834(0x245),_0x1e6834(0x1ce)+_0x192a91[_0x1e6834(0x1ab)]),![];}}async[_0x5944c1(0x270)](_0x23e752,_0x275c84){const _0x11df23=_0x5944c1;try{this[_0x11df23(0x1f4)][_0x11df23(0x22c)](_0x23e752,_0x275c84),log(_0x11df23(0x2ac),_0x11df23(0x1cc)+_0x23e752+_0x11df23(0x2b6)+_0x275c84[_0x11df23(0x23f)]);while(this[_0x11df23(0x1f4)][_0x11df23(0x27f)](this[_0x11df23(0x2aa)])){const _0x3d4e2c=this[_0x11df23(0x1f4)][_0x11df23(0x29c)](this['nextSeq']);this[_0x11df23(0x1f4)][_0x11df23(0x29b)](this[_0x11df23(0x2aa)]);if(!this[_0x11df23(0x1eb)]&&this[_0x11df23(0x2aa)]===0x0){if(!await this[_0x11df23(0x1e4)](_0x3d4e2c))throw new Error('Failed\x20to\x20initialize\x20VLESS\x20connection');this[_0x11df23(0x1b6)]=Buffer[_0x11df23(0x1af)](this['vlessHeader'][_0x11df23(0x26e)]),await this[_0x11df23(0x262)](this['vlessHeader'][_0x11df23(0x2a6)]),this[_0x11df23(0x1a6)]&&this['_startDownstreamResponse']();}else{if(!this['initialized']){log(_0x11df23(0x1ff),_0x11df23(0x26c)+_0x23e752+_0x11df23(0x290));continue;}await this[_0x11df23(0x262)](_0x3d4e2c);}this[_0x11df23(0x2aa)]++,log(_0x11df23(0x2ac),_0x11df23(0x258)+(this[_0x11df23(0x2aa)]-0x1));}if(this[_0x11df23(0x1f4)][_0x11df23(0x229)]>SETTINGS[_0x11df23(0x23d)])throw new Error('Too\x20many\x20buffered\x20packets');return!![];}catch(_0x219781){log(_0x11df23(0x245),'Process\x20packet\x20error:\x20'+_0x219781[_0x11df23(0x1ab)]);throw _0x219781;}}[_0x5944c1(0x244)](){const _0x495015=_0x5944c1;if(!this[_0x495015(0x1a6)]||!this[_0x495015(0x1b6)])return;try{const _0x2c7c4f=this[_0x495015(0x1a6)][_0x495015(0x240)]?.['alpnProtocol']||_0x495015(0x1fb),_0x3d7050=_0x2c7c4f==='h2';!this[_0x495015(0x2b3)]&&(log('debug',_0x495015(0x298)+_0x2c7c4f+_0x495015(0x285)+this[_0x495015(0x1b6)][_0x495015(0x23f)]+_0x495015(0x2b5)),this[_0x495015(0x1a6)][_0x495015(0x222)](this[_0x495015(0x1b6)]),this['headerSent']=!![]);if(_0x3d7050){this[_0x495015(0x1a6)]['socket'][_0x495015(0x2a0)](!![]);const _0x3f6a4b=new require(_0x495015(0x20c))[_0x495015(0x1f6)]({'transform'(_0x3defc0,_0x22dae4,_0x47d7f5){const _0x3e9343=_0x495015,_0x15cbdc=0x4000;for(let _0x25f557=0x0;_0x25f557<_0x3defc0[_0x3e9343(0x23f)];_0x25f557+=_0x15cbdc){this[_0x3e9343(0x2b7)](_0x3defc0['slice'](_0x25f557,_0x25f557+_0x15cbdc));}_0x47d7f5();}});this[_0x495015(0x1b5)]['pipe'](_0x3f6a4b)[_0x495015(0x21f)](this['currentStreamRes']);}else this['remote'][_0x495015(0x21f)](this['currentStreamRes']);this[_0x495015(0x1b5)]['on']('end',()=>{const _0x2794ee=_0x495015;!this[_0x2794ee(0x1a6)][_0x2794ee(0x1d9)]&&this[_0x2794ee(0x1a6)][_0x2794ee(0x224)]();}),this[_0x495015(0x1b5)]['on'](_0x495015(0x245),_0x3e6f63=>{const _0xd37ab3=_0x495015;log(_0xd37ab3(0x245),_0xd37ab3(0x254)+_0x3e6f63[_0xd37ab3(0x1ab)]),!this[_0xd37ab3(0x1a6)]['writableEnded']&&this[_0xd37ab3(0x1a6)][_0xd37ab3(0x224)]();});}catch(_0x5b1ee5){log(_0x495015(0x245),_0x495015(0x22b)+_0x5b1ee5[_0x495015(0x1ab)]),this['cleanup']();}}[_0x5944c1(0x266)](_0x2b98d7,_0xe93401){const _0x1b3d02=_0x5944c1;return!_0x2b98d7[_0x1b3d02(0x20a)]&&_0x2b98d7[_0x1b3d02(0x263)](0xc8,_0xe93401),this[_0x1b3d02(0x1a6)]=_0x2b98d7,this[_0x1b3d02(0x1eb)]&&this[_0x1b3d02(0x1b6)]&&this[_0x1b3d02(0x244)](),_0x2b98d7['on'](_0x1b3d02(0x1c6),()=>{const _0x3e4ba4=_0x1b3d02;log(_0x3e4ba4(0x21e),'Client\x20connection\x20closed'),this[_0x3e4ba4(0x1cb)]();}),!![];}async[_0x5944c1(0x262)](_0x3bf42a){const _0x494b49=_0x5944c1;if(!this[_0x494b49(0x1b5)]||this['remote']['destroyed'])throw new Error(_0x494b49(0x1b2));return new Promise((_0x4ca687,_0x8084e2)=>{const _0x12e9c2=_0x494b49;this[_0x12e9c2(0x1b5)][_0x12e9c2(0x222)](_0x3bf42a,_0x4d01d8=>{const _0xe8169a=_0x12e9c2;_0x4d01d8?(log('error',_0xe8169a(0x1fa)+_0x4d01d8['message']),_0x8084e2(_0x4d01d8)):_0x4ca687();});});}['_startDownstreamResponse'](){const _0x2d6841=_0x5944c1;if(!this[_0x2d6841(0x1a6)]||!this[_0x2d6841(0x1b6)])return;try{!this[_0x2d6841(0x2b3)]&&(this[_0x2d6841(0x1a6)][_0x2d6841(0x222)](this[_0x2d6841(0x1b6)]),this[_0x2d6841(0x2b3)]=!![]),this[_0x2d6841(0x1b5)][_0x2d6841(0x21f)](this[_0x2d6841(0x1a6)]),this[_0x2d6841(0x1b5)]['on'](_0x2d6841(0x224),()=>{const _0x254600=_0x2d6841;!this[_0x254600(0x1a6)][_0x254600(0x1d9)]&&this['currentStreamRes'][_0x254600(0x224)]();}),this['remote']['on'](_0x2d6841(0x245),_0x56eb5c=>{const _0x35d0e3=_0x2d6841;log(_0x35d0e3(0x245),_0x35d0e3(0x254)+_0x56eb5c[_0x35d0e3(0x1ab)]),!this[_0x35d0e3(0x1a6)][_0x35d0e3(0x1d9)]&&this[_0x35d0e3(0x1a6)][_0x35d0e3(0x224)]();});}catch(_0x36802b){log(_0x2d6841(0x245),_0x2d6841(0x22b)+_0x36802b[_0x2d6841(0x1ab)]),this[_0x2d6841(0x1cb)]();}}[_0x5944c1(0x1cb)](){const _0x238c98=_0x5944c1;!this['cleaned']&&(this[_0x238c98(0x2ab)]=!![],log(_0x238c98(0x2ac),_0x238c98(0x1bb)+this[_0x238c98(0x1c2)]),this['remote']&&(this[_0x238c98(0x1b5)]['destroy'](),this['remote']=null),this[_0x238c98(0x1eb)]=![],this[_0x238c98(0x2b3)]=![]);}}async function getCloudflareMeta(){return new Promise((_0x10564d,_0x190089)=>{const _0x3ccfba=_0x29b1,_0x1dcbc7={'hostname':'speed.cloudflare.com','path':_0x3ccfba(0x210),'method':_0x3ccfba(0x272)},_0x23ce0a=https[_0x3ccfba(0x286)](_0x1dcbc7,_0x2529be=>{const _0x102e64=_0x3ccfba;let _0x4ef4d2='';_0x2529be['on'](_0x102e64(0x2a6),_0x2860ef=>{_0x4ef4d2+=_0x2860ef;}),_0x2529be['on'](_0x102e64(0x224),()=>{const _0x22a520=_0x102e64,_0x2ce918=JSON[_0x22a520(0x24f)](_0x4ef4d2);_0x10564d(_0x2ce918);});});_0x23ce0a['on'](_0x3ccfba(0x245),_0x3fc31c=>{_0x190089(_0x3fc31c);}),_0x23ce0a[_0x3ccfba(0x224)]();});}let UPLOAD_DATA;async function getipandisp(){const _0x138cfb=_0x5944c1;let _0x1689d4=await getCloudflareMeta(),_0x39fb9d=_0x1689d4[_0x138cfb(0x275)],_0x5cd53b=_0x1689d4['country'],_0x19495a=_0x1689d4[_0x138cfb(0x212)];ISP=(_0x5cd53b+'-'+_0x19495a)[_0x138cfb(0x1c9)](/ /g,'_');let _0x13a9ec=MY_DOMAIN;return!MY_DOMAIN&&(_0x39fb9d['includes'](':')?_0x13a9ec='['+_0x39fb9d+']':_0x13a9ec=''+_0x39fb9d),HTTPSTLS==!![]?UPLOAD_DATA=_0x138cfb(0x292)+UUID+'@'+CFIP+':'+CFPORT+_0x138cfb(0x22a)+_0x13a9ec+'&fp=chrome&allowInsecure=1&type=xhttp&host='+_0x13a9ec+'&path='+SETTINGS[_0x138cfb(0x1c0)]+_0x138cfb(0x1e1)+ISP+'-'+SUB_NAME:UPLOAD_DATA=_0x138cfb(0x292)+UUID+'@'+_0x13a9ec+':'+PORT+_0x138cfb(0x27b)+_0x13a9ec+_0x138cfb(0x273)+_0x13a9ec+_0x138cfb(0x1ac)+SETTINGS[_0x138cfb(0x1c0)]+_0x138cfb(0x1e1)+ISP+'-'+SUB_NAME,UPLOAD_DATA;}const server=http[_0x5944c1(0x27d)]((_0x3af132,_0x458403)=>{const _0x23ad04=_0x5944c1,_0xcdee58={'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':_0x23ad04(0x2ba),'Cache-Control':'no-store','X-Accel-Buffering':'no','X-Padding':generatePadding(0x64,0x3e8)};if(_0x3af132['url']==='/'){_0x458403[_0x23ad04(0x263)](0xc8,{'Content-Type':_0x23ad04(0x261)}),_0x458403['end']('Hello,\x20World\x0a');return;}if(_0x3af132[_0x23ad04(0x1d8)]==='/'+SUB_PATH){const _0xdc0190=''+UPLOAD_DATA,_0xb8ecb2=Buffer['from'](_0xdc0190)[_0x23ad04(0x1c4)](_0x23ad04(0x2b0));_0x458403[_0x23ad04(0x263)](0xc8,{'Content-Type':_0x23ad04(0x261)}),_0x458403['end'](_0xb8ecb2+'\x0a');return;}const _0x1fe947=_0x3af132[_0x23ad04(0x1d8)][_0x23ad04(0x29a)](new RegExp(XPATH+_0x23ad04(0x1fc)));if(!_0x1fe947){_0x458403[_0x23ad04(0x263)](0x194),_0x458403[_0x23ad04(0x224)]();return;}const _0x22083d=_0x1fe947[0x1],_0xa62861=_0x1fe947[0x2]?parseInt(_0x1fe947[0x2]):null;if(_0x3af132[_0x23ad04(0x25b)]==='GET'&&!_0xa62861){_0xcdee58['Content-Type']='application/octet-stream',_0xcdee58[_0x23ad04(0x204)]='chunked';let _0x3f6a57=sessions[_0x23ad04(0x29c)](_0x22083d);!_0x3f6a57&&(_0x3f6a57=new Session(_0x22083d),sessions[_0x23ad04(0x22c)](_0x22083d,_0x3f6a57),log(_0x23ad04(0x21e),_0x23ad04(0x259)+_0x22083d));_0x3f6a57[_0x23ad04(0x281)]=!![];!_0x3f6a57['startDownstream'](_0x458403,_0xcdee58)&&(log(_0x23ad04(0x245),_0x23ad04(0x234)+_0x22083d),!_0x458403[_0x23ad04(0x20a)]&&(_0x458403[_0x23ad04(0x263)](0x1f4),_0x458403[_0x23ad04(0x224)]()),_0x3f6a57['cleanup'](),sessions[_0x23ad04(0x29b)](_0x22083d));return;}if(_0x3af132[_0x23ad04(0x25b)]===_0x23ad04(0x1cf)&&_0xa62861!==null){let _0x4fdcc0=sessions[_0x23ad04(0x29c)](_0x22083d);!_0x4fdcc0&&(_0x4fdcc0=new Session(_0x22083d),sessions['set'](_0x22083d,_0x4fdcc0),log(_0x23ad04(0x21e),_0x23ad04(0x27a)+_0x22083d),setTimeout(()=>{const _0x3043ae=_0x23ad04,_0x3f767f=sessions[_0x3043ae(0x29c)](_0x22083d);_0x3f767f&&!_0x3f767f[_0x3043ae(0x281)]&&(log('warn',_0x3043ae(0x217)+_0x22083d+_0x3043ae(0x296)),_0x3f767f['cleanup'](),sessions[_0x3043ae(0x29b)](_0x22083d));},SETTINGS[_0x23ad04(0x231)]));let _0x599e5c=[],_0xf450dd=0x0,_0x569ec4=![];_0x3af132['on'](_0x23ad04(0x2a6),_0x43939d=>{const _0x550bd8=_0x23ad04;_0xf450dd+=_0x43939d['length'];if(_0xf450dd>SETTINGS['MAX_POST_SIZE']){!_0x569ec4&&(_0x458403[_0x550bd8(0x263)](0x19d),_0x458403[_0x550bd8(0x224)](),_0x569ec4=!![]);return;}_0x599e5c['push'](_0x43939d);}),_0x3af132['on'](_0x23ad04(0x224),async()=>{const _0x4688f5=_0x23ad04;if(_0x569ec4)return;try{const _0x201ce8=Buffer[_0x4688f5(0x1a5)](_0x599e5c);log('info',_0x4688f5(0x255)+_0xa62861+_0x4688f5(0x2b6)+_0x201ce8['length']),await _0x4fdcc0[_0x4688f5(0x270)](_0xa62861,_0x201ce8),!_0x569ec4&&(_0x458403['writeHead'](0xc8,_0xcdee58),_0x569ec4=!![]),_0x458403[_0x4688f5(0x224)]();}catch(_0x407e14){log(_0x4688f5(0x245),_0x4688f5(0x22d)+_0x407e14[_0x4688f5(0x1ab)]),_0x4fdcc0[_0x4688f5(0x1cb)](),sessions[_0x4688f5(0x29b)](_0x22083d),!_0x569ec4&&(_0x458403[_0x4688f5(0x263)](0x1f4),_0x569ec4=!![]),_0x458403[_0x4688f5(0x224)]();}});return;}_0x458403['writeHead'](0x194),_0x458403[_0x23ad04(0x224)]();});server['on'](_0x5944c1(0x269),_0x1a85fd=>{const _0x166369=_0x5944c1;log(_0x166369(0x2ac),'New\x20secure\x20connection\x20using:\x20'+(_0x1a85fd[_0x166369(0x1d6)]||'http/1.1'));});function generatePadding(_0x45c9c2,_0x120cc0){const _0x303b87=_0x5944c1,_0x3f60d1=_0x45c9c2+Math[_0x303b87(0x20d)](Math[_0x303b87(0x28a)]()*(_0x120cc0-_0x45c9c2));return Buffer[_0x303b87(0x1af)](Array(_0x3f60d1)[_0x303b87(0x20b)]('X')[_0x303b87(0x22f)](''))[_0x303b87(0x1c4)](_0x303b87(0x2b0));}server[_0x5944c1(0x1e3)]=0x975e0,server[_0x5944c1(0x1bd)]=0x98968,server['on']('error',_0x364b43=>{const _0x2fbe85=_0x5944c1;log(_0x2fbe85(0x245),_0x2fbe85(0x230)+_0x364b43[_0x2fbe85(0x1ab)]);});async function uploadSubscription(_0x3ffacc,_0x3ec2d2,_0x41c156){const _0x4086e8=_0x5944c1,_0x5520f6=JSON[_0x4086e8(0x26d)]({'URL_NAME':_0x3ffacc,'URL':_0x3ec2d2}),_0x4120b0=Buffer['from'](_0x5520f6,'utf8'),_0x2093ff=_0x4120b0[_0x4086e8(0x23f)],_0x4b9ee3=new URL(_0x41c156),_0x32ddfb={'hostname':_0x4b9ee3[_0x4086e8(0x2bb)],'port':_0x4b9ee3[_0x4086e8(0x267)]||0x1bb,'path':_0x4b9ee3[_0x4086e8(0x1db)],'method':_0x4086e8(0x1cf),'headers':{'Content-Type':'application/json;\x20charset=utf-8','Content-Length':_0x2093ff}};try{const _0x17bb50=await new Promise((_0x564c4e,_0xca2c32)=>{const _0x38fd06=_0x4086e8,_0x3b6b31=https[_0x38fd06(0x286)](_0x32ddfb,_0x190fa2=>{const _0xf50fa7=_0x38fd06;if(_0x190fa2['statusCode']<0xc8||_0x190fa2['statusCode']>=0x12c)return _0xca2c32(new Error('HTTP\x20error!\x20status:\x20'+_0x190fa2[_0xf50fa7(0x1ea)]+',\x20response:\x20'+_0x190fa2[_0xf50fa7(0x1d0)]));let _0x391424='';_0x190fa2['on'](_0xf50fa7(0x2a6),_0x5cfc49=>_0x391424+=_0x5cfc49),_0x190fa2['on'](_0xf50fa7(0x224),()=>_0x564c4e(_0x391424));});_0x3b6b31['on'](_0x38fd06(0x245),_0x39bee7=>_0xca2c32(_0x39bee7)),_0x3b6b31[_0x38fd06(0x222)](_0x4120b0),_0x3b6b31[_0x38fd06(0x224)]();});return _0x17bb50;}catch(_0x48d8d1){console[_0x4086e8(0x245)]('Upload\x20failed:',_0x48d8d1[_0x4086e8(0x1ab)]);}}function _0x503e(){const _0x47bb8f=['port','\x27\x20not\x20found','secureConnection','Download\x20','chmodSync','Received\x20out\x20of\x20order\x20packet\x20seq=','stringify','resp','nohup\x20','processPacket','clear','GET','&fp=chrome&allowInsecure=1&type=xhttp&host=','Killed\x20process\x20(PIDs:\x20','clientIp','Attempting\x20to\x20kill\x20process:\x20','existsSync','VLESS\x20header\x20parsed:\x20','\x1b[33m','Created\x20new\x20session\x20for\x20POST:\x20','?encryption=none&security=none&sni=','arm64','createServer','code','has','getWriter','downstreamStarted','enqueue','socket\x20hang\x20up','cork','):\x20','request','/config.yml','originalName','Connected\x20to\x20','random',')\x20failed:\x20',']\x20[','TIME','lstatSync','unable\x20to\x20rm\x20','\x20before\x20initialization','/config.yml\x20>/dev/null\x202>&1\x20&','vless://','SUB_URL','1923633oYfhCm','lastActivity','\x20timed\x20out\x20without\x20downstream','writeFileSync','Sending\x20VLESS\x20response\x20header\x20(','pgrep\x20-x\x20\x22','match','delete','get','\x20running\x20error:\x20','2048','kill\x20-9\x20','setNoDelay','10KWWVUX','env','reading_done','toISOString','SUB_PATH','data','\x20--report-delay=4\x20--skip-conn\x20--skip-procs\x20--disable-auto-update\x20>/dev/null\x202>&1\x20&','destroyed','app\x20variable\x20is\x20empty,\x20skip\x20running','nextSeq','cleaned','debug','PORT','app','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','base64','LOG_LEVEL','43168790zoeYSJ','headerSent','amd','\x20bytes',',\x20size=','push','trim','catch','GET,\x20POST','hostname','sub','NEZHA_PORT','createConnection','fileUrl','map','reset','true','5773873wqXWxF','concat','currentStreamRes','mkdirSync','includes','\x20deleted','filePath','message','&path=','connect\x20timeout','value','from','Connection\x20failed:\x20','443','Remote\x20connection\x20not\x20available','\x20not\x20created','Failed\x20to\x20parse\x20hostname','remote','responseHeader','read\x20address\x20type\x20failed','arch','6cgzzez','net','Cleaning\x20up\x20session\x20','Created\x20new\x20session\x20with\x20UUID:\x20','headersTimeout','Relay\x20error:','VLESS\x20connection\x20to\x20','XPATH','\x20error:','uuid','parse\x20hostname\x20failed','toString','child_process','close','Socket\x20error:','Can\x27t\x20determine\x20system\x20architecture.','replace','Kill\x20failed:\x20','cleanup','Buffered\x20packet\x20seq=','Empowerment\x20success\x20for\x20','Failed\x20to\x20initialize\x20VLESS:\x20','POST','statusMessage','--tls','Starting\x20to\x20parse\x20VLESS\x20header','Read\x20controller\x20error:','Process\x20not\x20found','path','alpnProtocol','\x20runs\x20again\x20!','url','writableEnded','all','pathname','unlinkSync','read\x20vless\x20header\x20error:\x20','vlessHeader','ip.sb','readable','&mode=packet-up#','\x22\x20\x27$2\x20==\x20name\x20{print\x20$1}\x27','keepAliveTimeout','initializeVLESS','TCP_NODELAY','Upload\x20error:\x20','UUID','\x20(renamed\x20to\x20','arm','statusCode','initialized','%2F','aarch64','isDirectory','NEZHA_SERVER','pgrep','Download\x20error:\x20','SUB_NAME','App\x20is\x20running','pendingBuffers','1482692pwOFTq','Transform','writable','releaseLock','upload\x20failed:','Failed\x20to\x20write\x20to\x20remote:\x20','http/1.1','/([^/]+)(?:/([0-9]+))?$','KEEPALIVE','./.npm','warn','done','createWriteStream','[detectProcess]\x20','invalid\x20UUID','Transfer-Encoding','16OaceSm','aborted','Remote\x20connection\x20established','bufferSize','fileName','headersSent','fill','stream','floor','stderr','pause','/meta','rmSync','asOrganization','Process\x20\x27','HTTPSTLS','read','constructor','Session\x20','1219085MDLqwi','2083','forEach','Command\x20failed:\x20','https','pidof','info','pipe','reduce','CHUNK_SIZE','write','app\x20file\x20not\x20found,\x20skip\x20running','end','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https://github.com/kahunama/myfile/releases/download/main/nezha-agent','stream/promises','getReader','size','?encryption=none&security=tls&sni=','Error\x20starting\x20downstream:\x20','set','Failed\x20to\x20process\x20POST\x20request:\x20','NEZHA_VERSION','join','Server\x20error:\x20','SESSION_TIMEOUT','tmp','NEZHA_KEY','Failed\x20to\x20start\x20downstream\x20for\x20session:\x20','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','pipeTo','success','VLESS\x20header\x20parsed\x20successfully','nextTick','2655924HKKKup','MAX_POST_SIZE','axios','MAX_BUFFERED_POSTS','charAt','length','socket','\x20is\x20running','header\x20length\x20too\x20short','slice','_startDownstreamResponse','error','pidof\x20\x22','TCP_KEEPALIVE','substr','CFPORT','\x20already\x20exists','finally','VLESS\x20header\x20parse\x20error:\x20','none','MY_DOMAIN','parse','log','Empowerment\x20failed\x20for\x20','3106008XoVjGi','2087','Remote\x20error:\x20','Processing\x20packet:\x20seq=','destroy','buffer','Processed\x20packet\x20seq=','Created\x20new\x20session\x20for\x20GET:\x20','listen','method','\x20is\x20created','http','7160b696-dd5e-42e3-a024-145e92cec916','not\x20enough\x20data\x20to\x20read','replaceAll','text/plain','_writeToRemote','writeHead','setKeepAlive','false','startDownstream'];_0x503e=function(){return _0x47bb8f;};return _0x503e();}function cleanfiles(){setTimeout(()=>{const _0x2b0503=_0x29b1;let _0x466790;KEEPALIVE==!![]?_0x466790=[]:_0x466790=[FILE_PATH+'/'+fileMapping['app'],FILE_PATH+_0x2b0503(0x287)],_0x466790[_0x2b0503(0x21a)](_0x2ab352=>{const _0x2adfe6=_0x2b0503;try{fs[_0x2adfe6(0x277)](_0x2ab352)&&(fs[_0x2adfe6(0x28e)](_0x2ab352)[_0x2adfe6(0x1ee)]()?fs[_0x2adfe6(0x211)](_0x2ab352,{'recursive':!![]}):fs[_0x2adfe6(0x1dc)](_0x2ab352));}catch(_0x361f5c){}}),console[_0x2b0503(0x271)](),console[_0x2b0503(0x250)](_0x2b0503(0x1f3));},0xea60);}server[_0x5944c1(0x25a)](PORT,async()=>{const _0x55aece=_0x5944c1;await getipandisp(),cleanupOldFiles(),createFolder(FILE_PATH);NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION&&(await downloadFiles(),await delay(0x1388));await run(),cleanfiles();if(SUB_URL)try{const _0x47b32c=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);}catch(_0x2ab010){console[_0x55aece(0x245)](_0x55aece(0x1f9),_0x2ab010);}KEEPALIVE==!![]&&(await keep_alive(),setInterval(keep_alive,intervalInseconds*0x3e8));});