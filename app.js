const _0x4a46cc=_0x2d60;(function(_0x2573f7,_0x2b7d34){const _0x341aa4=_0x2d60,_0x4e8e65=_0x2573f7();while(!![]){try{const _0x20d444=parseInt(_0x341aa4(0x285))/0x1*(-parseInt(_0x341aa4(0x1a8))/0x2)+-parseInt(_0x341aa4(0x1cd))/0x3+parseInt(_0x341aa4(0x243))/0x4*(parseInt(_0x341aa4(0x1cc))/0x5)+-parseInt(_0x341aa4(0x214))/0x6*(-parseInt(_0x341aa4(0x186))/0x7)+-parseInt(_0x341aa4(0x202))/0x8*(parseInt(_0x341aa4(0x1c7))/0x9)+parseInt(_0x341aa4(0x280))/0xa*(-parseInt(_0x341aa4(0x29d))/0xb)+-parseInt(_0x341aa4(0x1c0))/0xc*(-parseInt(_0x341aa4(0x1ba))/0xd);if(_0x20d444===_0x2b7d34)break;else _0x4e8e65['push'](_0x4e8e65['shift']());}catch(_0x2fde04){_0x4e8e65['push'](_0x4e8e65['shift']());}}}(_0x3af8,0x707e1));const FILE_PATH=process[_0x4a46cc(0x2a2)][_0x4a46cc(0x25c)]||_0x4a46cc(0x1d6),intervalInseconds=process[_0x4a46cc(0x2a2)][_0x4a46cc(0x219)]||0x64,SUB_PATH=process[_0x4a46cc(0x2a2)][_0x4a46cc(0x299)]||_0x4a46cc(0x22e),PORT=process[_0x4a46cc(0x2a2)][_0x4a46cc(0x235)]||0xbb8,CFPORT=process[_0x4a46cc(0x2a2)][_0x4a46cc(0x28f)]||0x1bb,CFIP=process[_0x4a46cc(0x2a2)][_0x4a46cc(0x199)]||_0x4a46cc(0x1f4),KEEPALIVE=process[_0x4a46cc(0x2a2)][_0x4a46cc(0x28b)]||![],SUB_URL=process[_0x4a46cc(0x2a2)][_0x4a46cc(0x191)]||'',UUID=process[_0x4a46cc(0x2a2)][_0x4a46cc(0x1a9)]||_0x4a46cc(0x221),XPATH=process[_0x4a46cc(0x2a2)][_0x4a46cc(0x26e)]||UUID[_0x4a46cc(0x2a3)](0x0,0x8),HTTPSTLS=process['env']['HTTPSTLS']||!![],NEZHA_VERSION=process[_0x4a46cc(0x2a2)]['NEZHA_VERSION']||'V0',NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x4a46cc(0x2a2)]['NEZHA_PORT']||_0x4a46cc(0x25e),NEZHA_KEY=process[_0x4a46cc(0x2a2)][_0x4a46cc(0x20b)]||'',SUB_NAME=process[_0x4a46cc(0x2a2)]['SUB_NAME']||'',MY_DOMAIN=process['env'][_0x4a46cc(0x266)]||'',LOCAL_DOMAIN=process[_0x4a46cc(0x2a2)]['LOCAL_DOMAIN']||'',os=require('os'),fs=require('fs'),net=require(_0x4a46cc(0x1d5)),path=require(_0x4a46cc(0x1d8)),http=require(_0x4a46cc(0x1de)),https=require('https'),axios=require(_0x4a46cc(0x23b)),{pipeline}=require(_0x4a46cc(0x216)),{Buffer}=require(_0x4a46cc(0x230)),{exec,execSync}=require(_0x4a46cc(0x1e5)),delay=_0x10c23f=>new Promise(_0x17bee3=>setTimeout(_0x17bee3,_0x10c23f)),SETTINGS={[_0x4a46cc(0x1a9)]:UUID,[_0x4a46cc(0x21e)]:'none',[_0x4a46cc(0x277)]:_0x4a46cc(0x274),[_0x4a46cc(0x26e)]:_0x4a46cc(0x1b4)+XPATH,[_0x4a46cc(0x27a)]:0x1e,[_0x4a46cc(0x25f)]:0xf4240,['SESSION_TIMEOUT']:0x7530,[_0x4a46cc(0x1d1)]:0x400*0x400,[_0x4a46cc(0x1a7)]:!![],[_0x4a46cc(0x1a0)]:!![]};function validate_uuid(_0x57e1a5,_0x1c1765){for(let _0x19764d=0x0;_0x19764d<0x10;_0x19764d++){if(_0x57e1a5[_0x19764d]!==_0x1c1765[_0x19764d])return![];}return!![];}function concat_typed_arrays(_0x35854d,..._0x5aea23){const _0x3a73a1=_0x4a46cc;if(!_0x5aea23||_0x5aea23[_0x3a73a1(0x23e)]<0x1)return _0x35854d;let _0x36674d=_0x35854d['length'];for(let _0x5d215f of _0x5aea23)_0x36674d+=_0x5d215f['length'];const _0x13a05d=new _0x35854d[(_0x3a73a1(0x1cb))](_0x36674d);_0x13a05d[_0x3a73a1(0x19d)](_0x35854d,0x0),_0x36674d=_0x35854d[_0x3a73a1(0x23e)];for(let _0x47c98a of _0x5aea23){_0x13a05d['set'](_0x47c98a,_0x36674d),_0x36674d+=_0x47c98a[_0x3a73a1(0x23e)];}return _0x13a05d;}function log(_0x2e8bb5,..._0x5a9b52){const _0x626bc4=_0x4a46cc;if(SETTINGS['LOG_LEVEL']===_0x626bc4(0x29a))return;const _0xf3e879={'debug':0x0,'info':0x1,'warn':0x2,'error':0x3},_0x308b91={'debug':'\x1b[36m','info':_0x626bc4(0x1c8),'warn':_0x626bc4(0x1a1),'error':_0x626bc4(0x286),'reset':_0x626bc4(0x24b)},_0x5029eb=_0xf3e879[SETTINGS['LOG_LEVEL']]||0x1,_0x1b8a74=_0xf3e879[_0x2e8bb5]||0x0;if(_0x1b8a74>=_0x5029eb){const _0xb6ee48=new Date()[_0x626bc4(0x1e7)](),_0x722eb2=_0x308b91[_0x2e8bb5]||_0x308b91[_0x626bc4(0x18e)];console[_0x626bc4(0x257)](_0x722eb2+'['+_0xb6ee48+']\x20['+_0x2e8bb5+']',..._0x5a9b52,_0x308b91['reset']);}}function cleanupOldFiles(){const _0x26c737=_0x4a46cc;try{if(fs[_0x26c737(0x24e)](path['join'](FILE_PATH)))fs['rmSync'](path[_0x26c737(0x29e)](FILE_PATH),{'recursive':!![]});else{}}catch(_0x209536){}}function createFolder(_0x461be0){const _0x3c2379=_0x4a46cc;if(!fs[_0x3c2379(0x24e)](_0x461be0))fs['mkdirSync'](_0x461be0);else{}}function execPromise(_0x312e2d,_0x3ab7fb={}){return new Promise((_0x24bb4d,_0xd25038)=>{const _0x42a6d5=exec(_0x312e2d,_0x3ab7fb,(_0x29013e,_0x2d69b7,_0x451457)=>{const _0x89d5ed=_0x2d60;if(_0x29013e){const _0x28462d=new Error('Command\x20failed:\x20'+_0x29013e[_0x89d5ed(0x260)]);_0x28462d['code']=_0x29013e[_0x89d5ed(0x22c)],_0x28462d[_0x89d5ed(0x288)]=_0x451457[_0x89d5ed(0x261)](),_0xd25038(_0x28462d);}else _0x24bb4d(_0x2d69b7['trim']());});});}async function detectProcess(_0x1aecaf){const _0x2ab688=_0x4a46cc,_0x35db88=[{'cmd':_0x2ab688(0x289)+_0x1aecaf+'\x22','name':'pidof'},{'cmd':_0x2ab688(0x187)+_0x1aecaf+'\x22','name':_0x2ab688(0x190)},{'cmd':_0x2ab688(0x1e9)+_0x1aecaf+_0x2ab688(0x1a4),'name':_0x2ab688(0x26b)}];for(const _0x4e5a75 of _0x35db88){try{const _0x51d0d7=await execPromise(_0x4e5a75[_0x2ab688(0x293)]);if(_0x51d0d7)return _0x51d0d7[_0x2ab688(0x1e4)](/\n/g,'\x20')[_0x2ab688(0x261)]();}catch(_0x5e4ee5){_0x5e4ee5[_0x2ab688(0x22c)]!==0x7f&&_0x5e4ee5[_0x2ab688(0x22c)]!==0x1&&console[_0x2ab688(0x2a0)]('[detectProcess]\x20'+_0x4e5a75[_0x2ab688(0x201)]+_0x2ab688(0x298),_0x5e4ee5[_0x2ab688(0x260)]);}}return'';}async function killProcess(_0x487e9a){const _0x1ca884=_0x4a46cc;console[_0x1ca884(0x257)](_0x1ca884(0x262)+_0x487e9a);try{const _0x37e529=await detectProcess(_0x487e9a);if(!_0x37e529)return console[_0x1ca884(0x263)](_0x1ca884(0x211)+_0x487e9a+_0x1ca884(0x1f8)),{'success':!![],'message':_0x1ca884(0x273)};await execPromise('kill\x20-9\x20'+_0x37e529);const _0x18c93f=_0x1ca884(0x207)+_0x37e529+')';return console['log'](_0x18c93f),{'success':!![],'message':_0x18c93f};}catch(_0x5a6e10){const _0x5890ce=_0x1ca884(0x21b)+_0x5a6e10['message'];return console[_0x1ca884(0x1ed)](_0x5890ce),{'success':![],'message':_0x5890ce};}}function generateRandomString(_0x265535){const _0x3c1ab8=_0x4a46cc,_0x142969=_0x3c1ab8(0x20c);let _0x52eba1='';for(let _0x1737db=0x0;_0x1737db<_0x265535;_0x1737db++){_0x52eba1+=_0x142969[_0x3c1ab8(0x1b1)](Math[_0x3c1ab8(0x1bb)](Math[_0x3c1ab8(0x1ca)]()*_0x142969[_0x3c1ab8(0x23e)]));}return _0x52eba1;}function getSystemArchitecture(){const _0x160fd6=_0x4a46cc,_0x5ad8ac=os[_0x160fd6(0x295)]();return _0x5ad8ac===_0x160fd6(0x206)||_0x5ad8ac===_0x160fd6(0x1dd)||_0x5ad8ac===_0x160fd6(0x1f1)?_0x160fd6(0x206):_0x160fd6(0x29f);}function _0x2d60(_0x5bd0c9,_0x330a90){const _0x3af8aa=_0x3af8();return _0x2d60=function(_0x2d603a,_0x14b5f6){_0x2d603a=_0x2d603a-0x184;let _0x5029ed=_0x3af8aa[_0x2d603a];return _0x5029ed;},_0x2d60(_0x5bd0c9,_0x330a90);}function getFilesForArchitecture(_0x1f7a5a){const _0x59bd77=_0x4a46cc,_0x3d1beb={'app':{'V0':{'arm':_0x59bd77(0x271),'amd':'https://github.com/kahunama/myfile/releases/download/main/nezha-agent'},'V1':{'arm':_0x59bd77(0x232),'amd':'https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1'}}};if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION){const _0x22ebcf=[{'fileName':_0x59bd77(0x18f)+generateRandomString(0x5),'originalName':_0x59bd77(0x227),'fileUrl':_0x3d1beb[_0x59bd77(0x227)][NEZHA_VERSION][_0x1f7a5a]}];return _0x22ebcf;}else return[];}async function download_function(_0x382717,_0x1071cf,_0x27e313){const _0x366c70=_0x4a46cc,_0x24f84d=path[_0x366c70(0x29e)](FILE_PATH,_0x382717);let _0x352876=![];try{const _0x48d5a9=await axios({'method':_0x366c70(0x217),'url':_0x27e313,'responseType':_0x366c70(0x1fb)});await pipeline(_0x48d5a9[_0x366c70(0x208)],fs[_0x366c70(0x24d)](_0x24f84d)),_0x352876=!![];}catch(_0x5901db){}return{'fileName':_0x382717,'originalName':_0x1071cf,'filePath':_0x24f84d,'success':_0x352876};}let fileMapping={};async function downloadFiles(){const _0xdbeb0f=_0x4a46cc;try{const _0x58b0ea=getSystemArchitecture();if(!_0x58b0ea)return console['log'](_0xdbeb0f(0x1c6)),fileMapping;const _0x159a74=getFilesForArchitecture(_0x58b0ea);if(_0x159a74[_0xdbeb0f(0x23e)]===0x0)return console[_0xdbeb0f(0x257)](_0xdbeb0f(0x20f)),fileMapping;const _0x3fb89f=_0x159a74[_0xdbeb0f(0x193)](_0x5b5926=>download_function(_0x5b5926[_0xdbeb0f(0x189)],_0x5b5926[_0xdbeb0f(0x265)],_0x5b5926[_0xdbeb0f(0x1df)])),_0x5d5f26=await Promise[_0xdbeb0f(0x1e8)](_0x3fb89f);return _0x5d5f26['forEach'](_0x459e6a=>{const _0x44a736=_0xdbeb0f;if(_0x459e6a['success'])try{fs[_0x44a736(0x1ce)](_0x459e6a[_0x44a736(0x28d)],0x1ed),fileMapping[_0x459e6a[_0x44a736(0x265)]]=_0x459e6a[_0x44a736(0x189)];}catch(_0x202e4d){}}),fileMapping;}catch(_0x5b005e){return console['error'](_0xdbeb0f(0x27f),_0x5b005e),fileMapping;}}let NEZHA_TLS;function nezconfig(){const _0xe7933c=_0x4a46cc,_0x142cbc=[_0xe7933c(0x25e),_0xe7933c(0x215),'2096','2087',_0xe7933c(0x28e),_0xe7933c(0x258)];if(NEZHA_VERSION==='V0')return _0x142cbc['includes'](NEZHA_PORT)?NEZHA_TLS=_0xe7933c(0x234):NEZHA_TLS='',NEZHA_TLS;else{if(NEZHA_VERSION==='V1'){_0x142cbc[_0xe7933c(0x1d9)](NEZHA_PORT)?NEZHA_TLS=_0xe7933c(0x1f7):NEZHA_TLS='false';const _0x403cd2=path[_0xe7933c(0x29e)](FILE_PATH,_0xe7933c(0x278)),_0x3d0f0c=_0xe7933c(0x1c1)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0xe7933c(0x249)+NEZHA_TLS+_0xe7933c(0x1b8)+UUID;try{fs[_0xe7933c(0x29b)](_0x403cd2,_0x3d0f0c);}catch(_0x4e61e3){}}}}async function runapp(){const _0x76ccfa=_0x4a46cc;if(fileMapping['app']&&fs['existsSync'](path[_0x76ccfa(0x29e)](FILE_PATH,fileMapping[_0x76ccfa(0x227)]))){if(NEZHA_VERSION==='V0'){const _0x1fe617=_0x76ccfa(0x25b)+FILE_PATH+'/'+fileMapping[_0x76ccfa(0x227)]+_0x76ccfa(0x1a2)+NEZHA_SERVER+':'+NEZHA_PORT+_0x76ccfa(0x23c)+NEZHA_KEY+'\x20'+NEZHA_TLS+_0x76ccfa(0x203);try{await execPromise(_0x1fe617);}catch(_0x1c654a){console[_0x76ccfa(0x1ed)](fileMapping[_0x76ccfa(0x227)]+_0x76ccfa(0x18a)+_0x1c654a);}}else{if(NEZHA_VERSION==='V1'){const _0x50026b=_0x76ccfa(0x25b)+FILE_PATH+'/'+fileMapping[_0x76ccfa(0x227)]+_0x76ccfa(0x237)+FILE_PATH+'/config.yml\x20>/dev/null\x202>&1\x20&';try{await execPromise(_0x50026b);}catch(_0x2a05a9){console[_0x76ccfa(0x1ed)](fileMapping[_0x76ccfa(0x227)]+_0x76ccfa(0x18a)+_0x2a05a9);}}}}else console[_0x76ccfa(0x257)](_0x76ccfa(0x24c));}async function run(){const _0x58ba1d=_0x4a46cc;if(NEZHA_VERSION&&NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){nezconfig();const _0x12ddd6=await detectProcess(''+fileMapping['app']);if(_0x12ddd6){}else await runapp();await delay(0x3e8);}else console[_0x58ba1d(0x257)](_0x58ba1d(0x1c2));}async function keep_alive(){const _0x2f931d=_0x4a46cc;if(NEZHA_VERSION&&NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x505f28=await detectProcess(''+fileMapping[_0x2f931d(0x227)]);if(_0x505f28){}else await runapp();}}function parse_uuid(_0x3e7c79){const _0x5b65f8=_0x4a46cc;_0x3e7c79=_0x3e7c79[_0x5b65f8(0x297)]('-','');const _0x7dcb02=[];for(let _0x470002=0x0;_0x470002<0x10;_0x470002++){_0x7dcb02['push'](parseInt(_0x3e7c79[_0x5b65f8(0x1ac)](_0x470002*0x2,0x2),0x10));}return _0x7dcb02;}async function read_vless_header(_0x2163fe,_0x4f634d){const _0x4ad426=_0x4a46cc;let _0x57a481=0x0,_0x541410=new Uint8Array(),_0x5024df={'value':_0x541410,'done':![]};async function _0x42cc6d(_0x515999){const _0x41301e=_0x2d60;if(_0x5024df[_0x41301e(0x279)])throw new Error(_0x41301e(0x2a1));const _0x3a91cd=_0x515999-_0x57a481;if(_0x3a91cd<0x1)return;_0x5024df=await read_atleast(_0x2163fe,_0x3a91cd),_0x57a481+=_0x5024df['value'][_0x41301e(0x23e)],_0x541410=concat_typed_arrays(_0x541410,_0x5024df[_0x41301e(0x19f)]);}await _0x42cc6d(0x1+0x10+0x1);const _0x380257=_0x541410[0x0],_0x44ca56=_0x541410[_0x4ad426(0x2a3)](0x1,0x1+0x10),_0x51e64e=parse_uuid(_0x4f634d);if(!validate_uuid(_0x44ca56,_0x51e64e))throw new Error(_0x4ad426(0x1fe));const _0x374e6b=_0x541410[0x1+0x10],_0x4bfe94=0x1+0x10+0x1+_0x374e6b+0x1+0x2+0x1;await _0x42cc6d(_0x4bfe94+0x1);const _0x5c9463=_0x541410[0x1+0x10+0x1+_0x374e6b],_0x2001c7=0x1;if(_0x5c9463!==_0x2001c7)throw new Error('unsupported\x20command:\x20'+_0x5c9463);const _0x4ae84a=(_0x541410[_0x4bfe94-0x1-0x2]<<0x8)+_0x541410[_0x4bfe94-0x1-0x1],_0x509563=_0x541410[_0x4bfe94-0x1],_0x17eeae=0x1,_0x4f1344=0x2,_0x363c6a=0x3;let _0x2f736d=-0x1;if(_0x509563===_0x17eeae)_0x2f736d=_0x4bfe94+0x4;else{if(_0x509563===_0x363c6a)_0x2f736d=_0x4bfe94+0x10;else _0x509563===_0x4f1344&&(_0x2f736d=_0x4bfe94+0x1+_0x541410[_0x4bfe94]);}if(_0x2f736d<0x0)throw new Error(_0x4ad426(0x19a));await _0x42cc6d(_0x2f736d);const _0x21284a=_0x4bfe94;let _0x25aa85='';if(_0x509563===_0x17eeae)_0x25aa85=_0x541410[_0x4ad426(0x2a3)](_0x21284a,_0x21284a+0x4)[_0x4ad426(0x29e)]('.');else{if(_0x509563===_0x4f1344)_0x25aa85=new TextDecoder()[_0x4ad426(0x1fd)](_0x541410[_0x4ad426(0x2a3)](_0x21284a+0x1,_0x21284a+0x1+_0x541410[_0x21284a]));else _0x509563===_0x363c6a&&(_0x25aa85=_0x541410[_0x4ad426(0x2a3)](_0x21284a,_0x21284a+0x10)[_0x4ad426(0x1ee)]((_0x41956d,_0x50eb84,_0x143aee,_0x2a1d2c)=>_0x143aee%0x2?_0x41956d[_0x4ad426(0x25d)](((_0x2a1d2c[_0x143aee-0x1]<<0x8)+_0x50eb84)[_0x4ad426(0x1b0)](0x10)):_0x41956d,[])['join'](':'));}if(!_0x25aa85){log(_0x4ad426(0x1ed),_0x4ad426(0x1f6));throw new Error(_0x4ad426(0x259));}return log(_0x4ad426(0x231),_0x4ad426(0x1e1)+_0x25aa85+':'+_0x4ae84a),{'hostname':_0x25aa85,'port':_0x4ae84a,'data':_0x541410['slice'](_0x2f736d),'resp':new Uint8Array([_0x380257,0x0])};}async function read_atleast(_0x245893,_0x326a95){const _0x3671ec=_0x4a46cc,_0x15c6b0=[];let _0x37d4bb=![];while(_0x326a95>0x0&&!_0x37d4bb){const _0x4a81de=await _0x245893[_0x3671ec(0x1e3)]();if(_0x4a81de['value']){const _0x2b4d05=new Uint8Array(_0x4a81de['value']);_0x15c6b0['push'](_0x2b4d05),_0x326a95-=_0x2b4d05[_0x3671ec(0x23e)];}_0x37d4bb=_0x4a81de['done'];}if(_0x326a95>0x0)throw new Error(_0x3671ec(0x204));return{'value':concat_typed_arrays(..._0x15c6b0),'done':_0x37d4bb};}async function parse_header(_0x165a8c,_0x3a24b4){const _0x5aeda2=_0x4a46cc;log(_0x5aeda2(0x2a0),'Starting\x20to\x20parse\x20VLESS\x20header');const _0x5db997=_0x3a24b4['readable']['getReader']();try{const _0x49c992=await read_vless_header(_0x5db997,_0x165a8c);return log(_0x5aeda2(0x2a0),_0x5aeda2(0x1f5)),_0x49c992;}catch(_0x39e03f){log('error',_0x5aeda2(0x242)+_0x39e03f['message']);throw new Error(_0x5aeda2(0x272)+_0x39e03f[_0x5aeda2(0x260)]);}finally{_0x5db997['releaseLock']();}}async function connect_remote(_0x51e9f4,_0x3b4373){const _0x3e3435=_0x4a46cc,_0x380ab0=0x1f40;try{const _0x427142=await timed_connect(_0x51e9f4,_0x3b4373,_0x380ab0);return _0x427142['setNoDelay'](!![]),_0x427142[_0x3e3435(0x255)](!![],0x3e8),_0x427142[_0x3e3435(0x22d)]=parseInt(SETTINGS[_0x3e3435(0x277)])*0x400,log(_0x3e3435(0x231),_0x3e3435(0x275)+_0x51e9f4+':'+_0x3b4373),_0x427142;}catch(_0x176b22){log('error',_0x3e3435(0x1ef)+_0x176b22[_0x3e3435(0x260)]);throw _0x176b22;}}function timed_connect(_0xdba882,_0x414fe4,_0xb1fff9){return new Promise((_0x484665,_0x4cfb28)=>{const _0x36a4ff=_0x2d60,_0x3aba64=net[_0x36a4ff(0x22f)]({'host':_0xdba882,'port':_0x414fe4}),_0x25b4fa=setTimeout(()=>{const _0x1ab71a=_0x36a4ff;_0x4cfb28(new Error(_0x1ab71a(0x192)));},_0xb1fff9);_0x3aba64['on'](_0x36a4ff(0x1fa),()=>{clearTimeout(_0x25b4fa),_0x484665(_0x3aba64);}),_0x3aba64['on']('error',_0x53c946=>{clearTimeout(_0x25b4fa),_0x4cfb28(_0x53c946);});});}function pipe_relay(){async function _0xd9f31f(_0x14f7c0,_0x28e0df,_0x5d18c8){const _0xe30a37=_0x2d60,_0x36442a=parseInt(SETTINGS[_0xe30a37(0x1d1)]);if(_0x5d18c8[_0xe30a37(0x23e)]>0x0){if(_0x28e0df[_0xe30a37(0x251)])_0x28e0df[_0xe30a37(0x1c9)](),_0x28e0df[_0xe30a37(0x251)](_0x5d18c8),process[_0xe30a37(0x268)](()=>_0x28e0df[_0xe30a37(0x238)]());else{const _0x2749bb=_0x28e0df[_0xe30a37(0x18c)][_0xe30a37(0x23f)]();try{await _0x2749bb[_0xe30a37(0x251)](_0x5d18c8);}finally{_0x2749bb[_0xe30a37(0x218)]();}}}try{_0x14f7c0[_0xe30a37(0x1c5)]?(_0x14f7c0[_0xe30a37(0x1b6)](),_0x14f7c0[_0xe30a37(0x1c5)](_0x28e0df,{'end':!![],'highWaterMark':_0x36442a}),_0x14f7c0[_0xe30a37(0x1cf)]()):await _0x14f7c0['readable']['pipeTo'](_0x28e0df[_0xe30a37(0x18c)],{'preventClose':![],'preventAbort':![],'preventCancel':![],'signal':AbortSignal[_0xe30a37(0x28c)](SETTINGS[_0xe30a37(0x19b)])});}catch(_0x4a856c){!_0x4a856c['message']['includes'](_0xe30a37(0x210))&&log('error','Relay\x20error:',_0x4a856c['message']);throw _0x4a856c;}}return _0xd9f31f;}function socketToWebStream(_0x11396d){const _0x1d1670=_0x4a46cc;let _0x41afe1,_0x24f133;return _0x11396d['on'](_0x1d1670(0x1ed),_0x4914a4=>{const _0x202657=_0x1d1670;log('error',_0x202657(0x247),_0x4914a4['message']),_0x41afe1?.[_0x202657(0x1ed)](_0x4914a4),_0x24f133?.['error'](_0x4914a4);}),{'readable':new ReadableStream({'start'(_0x3dca60){const _0xacd9d8=_0x1d1670;_0x41afe1=_0x3dca60,_0x11396d['on'](_0xacd9d8(0x208),_0x5d7064=>{const _0x30ade4=_0xacd9d8;try{_0x3dca60[_0x30ade4(0x254)](_0x5d7064);}catch(_0x158146){log('error',_0x30ade4(0x1d2),_0x158146[_0x30ade4(0x260)]);}}),_0x11396d['on'](_0xacd9d8(0x1f2),()=>{const _0x4ef6c3=_0xacd9d8;try{_0x3dca60[_0x4ef6c3(0x2a5)]();}catch(_0x561496){log(_0x4ef6c3(0x1ed),_0x4ef6c3(0x225),_0x561496[_0x4ef6c3(0x260)]);}});},'cancel'(){_0x11396d['destroy']();}}),'writable':new WritableStream({'start'(_0x6bbd57){_0x24f133=_0x6bbd57;},'write'(_0x53f01e){return new Promise((_0x2f9b0a,_0x1f593c)=>{const _0x463751=_0x2d60;if(_0x11396d[_0x463751(0x1b5)]){_0x1f593c(new Error(_0x463751(0x24f)));return;}_0x11396d[_0x463751(0x251)](_0x53f01e,_0x85fe83=>{if(_0x85fe83)_0x1f593c(_0x85fe83);else _0x2f9b0a();});});},'close'(){const _0x475341=_0x1d1670;!_0x11396d[_0x475341(0x1b5)]&&_0x11396d['end']();},'abort'(_0x1aee74){const _0x1a02e1=_0x1d1670;_0x11396d[_0x1a02e1(0x197)](_0x1aee74);}})};}function relay(_0x23c4d9,_0xa6ffba,_0x2dca7b,_0x591550){const _0x4d9260=_0x4a46cc,_0x5f1b77=pipe_relay();let _0x1724f1=![];const _0x39aa0e=socketToWebStream(_0x2dca7b);function _0x52d8d0(){const _0x54a974=_0x2d60;if(!_0x1724f1){_0x1724f1=!![];try{_0x2dca7b[_0x54a974(0x197)]();}catch(_0x4f6074){!_0x4f6074[_0x54a974(0x260)][_0x54a974(0x1d9)](_0x54a974(0x210))&&!_0x4f6074['message'][_0x54a974(0x1d9)](_0x54a974(0x213))&&log(_0x54a974(0x1ed),'Cleanup\x20error:\x20'+_0x4f6074[_0x54a974(0x260)]);}}}const _0x4db8c2=_0x5f1b77(_0xa6ffba,_0x39aa0e,_0x591550[_0x4d9260(0x208)])[_0x4d9260(0x248)](_0x58c385=>{const _0x484137=_0x4d9260;!_0x58c385[_0x484137(0x260)]['includes'](_0x484137(0x210))&&!_0x58c385[_0x484137(0x260)][_0x484137(0x1d9)](_0x484137(0x213))&&log(_0x484137(0x1ed),_0x484137(0x292)+_0x58c385[_0x484137(0x260)]);})[_0x4d9260(0x1ae)](()=>{const _0x54b9ae=_0x4d9260;_0xa6ffba['reading_done']&&_0xa6ffba[_0x54b9ae(0x1bf)]();}),_0x1f8d7e=_0x5f1b77(_0x39aa0e,_0xa6ffba,_0x591550['resp'])['catch'](_0x533bbd=>{const _0x260eb8=_0x4d9260;!_0x533bbd[_0x260eb8(0x260)][_0x260eb8(0x1d9)](_0x260eb8(0x210))&&!_0x533bbd[_0x260eb8(0x260)]['includes'](_0x260eb8(0x213))&&log('error',_0x260eb8(0x20d)+_0x533bbd['message']);});_0x1f8d7e[_0x4d9260(0x1ae)](()=>_0x4db8c2)[_0x4d9260(0x1ae)](_0x52d8d0);}const sessions=new Map();class Session{constructor(_0x496cf2){const _0x82044b=_0x4a46cc;this[_0x82044b(0x26f)]=_0x496cf2,this[_0x82044b(0x240)]=0x0,this[_0x82044b(0x1d4)]=![],this[_0x82044b(0x1f0)]=Date['now'](),this[_0x82044b(0x1ff)]=null,this[_0x82044b(0x223)]=null,this['initialized']=![],this['responseHeader']=null,this[_0x82044b(0x19c)]=![],this['bufferedData']=new Map(),this[_0x82044b(0x276)]=![],this[_0x82044b(0x22a)]=[],this[_0x82044b(0x281)]=null,this[_0x82044b(0x1c4)]=new Map(),log(_0x82044b(0x2a0),_0x82044b(0x28a)+_0x496cf2);}async['initializeVLESS'](_0xa371d2){const _0x52835e=_0x4a46cc;if(this[_0x52835e(0x1f9)])return!![];try{log('debug',_0x52835e(0x200));const _0x301f90=new ReadableStream({'start'(_0x464758){const _0xf92c51=_0x52835e;_0x464758[_0xf92c51(0x254)](_0xa371d2),_0x464758[_0xf92c51(0x2a5)]();}}),_0x4af007={'readable':_0x301f90,'writable':new WritableStream()};return this[_0x52835e(0x1ff)]=await parse_header(SETTINGS[_0x52835e(0x1a9)],_0x4af007),log(_0x52835e(0x231),_0x52835e(0x267)+this[_0x52835e(0x1ff)][_0x52835e(0x21d)]+':'+this['vlessHeader'][_0x52835e(0x194)]),this[_0x52835e(0x223)]=await connect_remote(this[_0x52835e(0x1ff)][_0x52835e(0x21d)],this[_0x52835e(0x1ff)][_0x52835e(0x194)]),log(_0x52835e(0x231),_0x52835e(0x1f3)),this['initialized']=!![],!![];}catch(_0x96082f){return log(_0x52835e(0x1ed),_0x52835e(0x26c)+_0x96082f[_0x52835e(0x260)]),![];}}async[_0x4a46cc(0x22b)](_0x171cf0,_0x1f7941){const _0x19aa1d=_0x4a46cc;try{this[_0x19aa1d(0x1c4)][_0x19aa1d(0x19d)](_0x171cf0,_0x1f7941),log(_0x19aa1d(0x2a0),_0x19aa1d(0x21c)+_0x171cf0+_0x19aa1d(0x19e)+_0x1f7941[_0x19aa1d(0x23e)]);while(this[_0x19aa1d(0x1c4)][_0x19aa1d(0x1be)](this['nextSeq'])){const _0x5341fe=this[_0x19aa1d(0x1c4)][_0x19aa1d(0x217)](this[_0x19aa1d(0x240)]);this['pendingBuffers'][_0x19aa1d(0x256)](this['nextSeq']);if(!this[_0x19aa1d(0x1f9)]&&this[_0x19aa1d(0x240)]===0x0){if(!await this['initializeVLESS'](_0x5341fe))throw new Error('Failed\x20to\x20initialize\x20VLESS\x20connection');this[_0x19aa1d(0x282)]=Buffer[_0x19aa1d(0x1eb)](this[_0x19aa1d(0x1ff)][_0x19aa1d(0x2a4)]),await this['_writeToRemote'](this[_0x19aa1d(0x1ff)][_0x19aa1d(0x208)]),this[_0x19aa1d(0x281)]&&this[_0x19aa1d(0x239)]();}else{if(!this['initialized']){log(_0x19aa1d(0x263),'Received\x20out\x20of\x20order\x20packet\x20seq='+_0x171cf0+'\x20before\x20initialization');continue;}await this[_0x19aa1d(0x236)](_0x5341fe);}this[_0x19aa1d(0x240)]++,log('debug',_0x19aa1d(0x233)+(this[_0x19aa1d(0x240)]-0x1));}if(this[_0x19aa1d(0x1c4)][_0x19aa1d(0x1ec)]>SETTINGS[_0x19aa1d(0x27a)])throw new Error(_0x19aa1d(0x1b3));return!![];}catch(_0x37e7bb){log(_0x19aa1d(0x1ed),'Process\x20packet\x20error:\x20'+_0x37e7bb[_0x19aa1d(0x260)]);throw _0x37e7bb;}}[_0x4a46cc(0x239)](){const _0x5e79b6=_0x4a46cc;if(!this['currentStreamRes']||!this['responseHeader'])return;try{const _0x2ba5d4=this[_0x5e79b6(0x281)]['socket']?.['alpnProtocol']||_0x5e79b6(0x26d),_0x945a98=_0x2ba5d4==='h2';!this[_0x5e79b6(0x19c)]&&(log(_0x5e79b6(0x2a0),_0x5e79b6(0x198)+_0x2ba5d4+'):\x20'+this[_0x5e79b6(0x282)][_0x5e79b6(0x23e)]+_0x5e79b6(0x18b)),this['currentStreamRes']['write'](this[_0x5e79b6(0x282)]),this[_0x5e79b6(0x19c)]=!![]);if(_0x945a98){this[_0x5e79b6(0x281)][_0x5e79b6(0x20e)][_0x5e79b6(0x195)](!![]);const _0x1aa957=new require('stream')['Transform']({'transform'(_0x1d1951,_0x5f2603,_0x504e4e){const _0x19bab5=0x4000;for(let _0x358aa5=0x0;_0x358aa5<_0x1d1951['length'];_0x358aa5+=_0x19bab5){this['push'](_0x1d1951['slice'](_0x358aa5,_0x358aa5+_0x19bab5));}_0x504e4e();}});this[_0x5e79b6(0x223)][_0x5e79b6(0x1c5)](_0x1aa957)[_0x5e79b6(0x1c5)](this['currentStreamRes']);}else this[_0x5e79b6(0x223)]['pipe'](this[_0x5e79b6(0x281)]);this[_0x5e79b6(0x223)]['on'](_0x5e79b6(0x1f2),()=>{const _0x2d806a=_0x5e79b6;!this[_0x2d806a(0x281)]['writableEnded']&&this[_0x2d806a(0x281)][_0x2d806a(0x1f2)]();}),this['remote']['on'](_0x5e79b6(0x1ed),_0x533393=>{const _0x2f5861=_0x5e79b6;log(_0x2f5861(0x1ed),_0x2f5861(0x25a)+_0x533393[_0x2f5861(0x260)]),!this[_0x2f5861(0x281)][_0x2f5861(0x1fc)]&&this[_0x2f5861(0x281)][_0x2f5861(0x1f2)]();});}catch(_0x51550f){log(_0x5e79b6(0x1ed),'Error\x20starting\x20downstream:\x20'+_0x51550f[_0x5e79b6(0x260)]),this[_0x5e79b6(0x24a)]();}}['startDownstream'](_0x5653d0,_0x12afb0){const _0x443439=_0x4a46cc;return!_0x5653d0['headersSent']&&_0x5653d0[_0x443439(0x1c3)](0xc8,_0x12afb0),this[_0x443439(0x281)]=_0x5653d0,this[_0x443439(0x1f9)]&&this[_0x443439(0x282)]&&this[_0x443439(0x239)](),_0x5653d0['on'](_0x443439(0x2a5),()=>{const _0x2a5a9e=_0x443439;log(_0x2a5a9e(0x231),'Client\x20connection\x20closed'),this['cleanup']();}),!![];}async[_0x4a46cc(0x236)](_0xdc9a07){const _0x7ddf24=_0x4a46cc;if(!this['remote']||this[_0x7ddf24(0x223)][_0x7ddf24(0x1b5)])throw new Error(_0x7ddf24(0x23a));return new Promise((_0xaed1ad,_0xccea7e)=>{const _0x468677=_0x7ddf24;this[_0x468677(0x223)][_0x468677(0x251)](_0xdc9a07,_0x942e0e=>{const _0x1801ab=_0x468677;_0x942e0e?(log(_0x1801ab(0x1ed),_0x1801ab(0x1da)+_0x942e0e[_0x1801ab(0x260)]),_0xccea7e(_0x942e0e)):_0xaed1ad();});});}['_startDownstreamResponse'](){const _0x134852=_0x4a46cc;if(!this[_0x134852(0x281)]||!this[_0x134852(0x282)])return;try{!this[_0x134852(0x19c)]&&(this[_0x134852(0x281)][_0x134852(0x251)](this[_0x134852(0x282)]),this[_0x134852(0x19c)]=!![]),this[_0x134852(0x223)]['pipe'](this[_0x134852(0x281)]),this[_0x134852(0x223)]['on'](_0x134852(0x1f2),()=>{const _0x11dbf1=_0x134852;!this[_0x11dbf1(0x281)][_0x11dbf1(0x1fc)]&&this[_0x11dbf1(0x281)][_0x11dbf1(0x1f2)]();}),this['remote']['on'](_0x134852(0x1ed),_0x5c9c91=>{const _0x5b9d8f=_0x134852;log(_0x5b9d8f(0x1ed),_0x5b9d8f(0x25a)+_0x5c9c91[_0x5b9d8f(0x260)]),!this['currentStreamRes']['writableEnded']&&this[_0x5b9d8f(0x281)][_0x5b9d8f(0x1f2)]();});}catch(_0x54869c){log(_0x134852(0x1ed),_0x134852(0x27b)+_0x54869c['message']),this[_0x134852(0x24a)]();}}[_0x4a46cc(0x24a)](){const _0x461539=_0x4a46cc;!this[_0x461539(0x276)]&&(this['cleaned']=!![],log(_0x461539(0x2a0),_0x461539(0x1d0)+this[_0x461539(0x26f)]),this[_0x461539(0x223)]&&(this[_0x461539(0x223)][_0x461539(0x197)](),this[_0x461539(0x223)]=null),this['initialized']=![],this[_0x461539(0x19c)]=![]);}}let ISP=_0x4a46cc(0x220);try{const metaInfo=execSync(_0x4a46cc(0x291),{'encoding':_0x4a46cc(0x1bd)});ISP=metaInfo[_0x4a46cc(0x261)]();}catch(_0x2daee0){console['error'](_0x4a46cc(0x283),_0x2daee0['message']);}let IP;if(MY_DOMAIN&&!LOCAL_DOMAIN)IP=MY_DOMAIN;else{if(LOCAL_DOMAIN&&!MY_DOMAIN)IP=LOCAL_DOMAIN;else{if(!MY_DOMAIN&&!LOCAL_DOMAIN){let SERVER_IP=_0x4a46cc(0x1dc);try{const rawIpInfo=execSync(_0x4a46cc(0x250),{'encoding':_0x4a46cc(0x1bd)}),metaJson=JSON['parse'](rawIpInfo);SERVER_IP=metaJson['clientIp'];}catch(_0x112c55){console[_0x4a46cc(0x1ed)](_0x4a46cc(0x1b7),_0x112c55[_0x4a46cc(0x260)]);}SERVER_IP[_0x4a46cc(0x1d9)](':')?IP='['+SERVER_IP+']':IP=''+SERVER_IP;}}}let UPLOAD_DATA;if(HTTPSTLS===!![])UPLOAD_DATA=_0x4a46cc(0x241)+UUID+'@'+CFIP+':'+CFPORT+_0x4a46cc(0x226)+IP+_0x4a46cc(0x296)+IP+_0x4a46cc(0x185)+SETTINGS[_0x4a46cc(0x26e)]+_0x4a46cc(0x284)+ISP+'-'+SUB_NAME;else HTTPSTLS===![]&&(UPLOAD_DATA='vless://'+UUID+'@'+IP+':'+PORT+_0x4a46cc(0x1ab)+IP+'&fp=chrome&allowInsecure=1&type=xhttp&host='+IP+_0x4a46cc(0x185)+SETTINGS[_0x4a46cc(0x26e)]+_0x4a46cc(0x284)+ISP+'-'+SUB_NAME);const server=http[_0x4a46cc(0x270)]((_0x4d13a2,_0x18088c)=>{const _0x3ff11d=_0x4a46cc,_0x30a85c={'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':_0x3ff11d(0x188),'Cache-Control':'no-store','X-Accel-Buffering':'no','X-Padding':generatePadding(0x64,0x3e8)};if(_0x4d13a2['url']==='/'){_0x18088c[_0x3ff11d(0x1c3)](0xc8,{'Content-Type':_0x3ff11d(0x264)}),_0x18088c['end'](_0x3ff11d(0x1a6));return;}if(_0x4d13a2[_0x3ff11d(0x245)]==='/'+SUB_PATH){const _0xccdfb4=''+UPLOAD_DATA,_0x113bbe=Buffer['from'](_0xccdfb4)[_0x3ff11d(0x1b0)](_0x3ff11d(0x252));_0x18088c[_0x3ff11d(0x1c3)](0xc8,{'Content-Type':_0x3ff11d(0x264)}),_0x18088c['end'](_0x113bbe+'\x0a');return;}const _0x4c7de1=_0x4d13a2[_0x3ff11d(0x245)][_0x3ff11d(0x1d7)](new RegExp(XPATH+_0x3ff11d(0x27d)));if(!_0x4c7de1){_0x18088c[_0x3ff11d(0x1c3)](0x194),_0x18088c['end']();return;}const _0x51792f=_0x4c7de1[0x1],_0x547d6e=_0x4c7de1[0x2]?parseInt(_0x4c7de1[0x2]):null;if(_0x4d13a2[_0x3ff11d(0x1b9)]===_0x3ff11d(0x228)&&!_0x547d6e){_0x30a85c[_0x3ff11d(0x1b2)]=_0x3ff11d(0x18d),_0x30a85c[_0x3ff11d(0x205)]=_0x3ff11d(0x196);let _0x1d4431=sessions[_0x3ff11d(0x217)](_0x51792f);!_0x1d4431&&(_0x1d4431=new Session(_0x51792f),sessions['set'](_0x51792f,_0x1d4431),log(_0x3ff11d(0x231),_0x3ff11d(0x294)+_0x51792f));_0x1d4431[_0x3ff11d(0x1d4)]=!![];!_0x1d4431['startDownstream'](_0x18088c,_0x30a85c)&&(log(_0x3ff11d(0x1ed),_0x3ff11d(0x253)+_0x51792f),!_0x18088c[_0x3ff11d(0x23d)]&&(_0x18088c[_0x3ff11d(0x1c3)](0x1f4),_0x18088c['end']()),_0x1d4431[_0x3ff11d(0x24a)](),sessions[_0x3ff11d(0x256)](_0x51792f));return;}if(_0x4d13a2[_0x3ff11d(0x1b9)]==='POST'&&_0x547d6e!==null){let _0xb3d605=sessions[_0x3ff11d(0x217)](_0x51792f);!_0xb3d605&&(_0xb3d605=new Session(_0x51792f),sessions[_0x3ff11d(0x19d)](_0x51792f,_0xb3d605),log('info',_0x3ff11d(0x1a3)+_0x51792f),setTimeout(()=>{const _0x441765=_0x3ff11d,_0x3b5de1=sessions[_0x441765(0x217)](_0x51792f);_0x3b5de1&&!_0x3b5de1[_0x441765(0x1d4)]&&(log(_0x441765(0x263),_0x441765(0x229)+_0x51792f+_0x441765(0x287)),_0x3b5de1[_0x441765(0x24a)](),sessions[_0x441765(0x256)](_0x51792f));},SETTINGS[_0x3ff11d(0x19b)]));let _0x5c0bcf=[],_0x2d709b=0x0,_0x5ca315=![];_0x4d13a2['on']('data',_0x1ca75a=>{const _0x1dee76=_0x3ff11d;_0x2d709b+=_0x1ca75a['length'];if(_0x2d709b>SETTINGS[_0x1dee76(0x25f)]){!_0x5ca315&&(_0x18088c[_0x1dee76(0x1c3)](0x19d),_0x18088c['end'](),_0x5ca315=!![]);return;}_0x5c0bcf[_0x1dee76(0x269)](_0x1ca75a);}),_0x4d13a2['on'](_0x3ff11d(0x1f2),async()=>{const _0x35ab44=_0x3ff11d;if(_0x5ca315)return;try{const _0x35f4c3=Buffer[_0x35ab44(0x25d)](_0x5c0bcf);log('info',_0x35ab44(0x27c)+_0x547d6e+',\x20size='+_0x35f4c3['length']),await _0xb3d605[_0x35ab44(0x22b)](_0x547d6e,_0x35f4c3),!_0x5ca315&&(_0x18088c[_0x35ab44(0x1c3)](0xc8,_0x30a85c),_0x5ca315=!![]),_0x18088c[_0x35ab44(0x1f2)]();}catch(_0x4d72b2){log('error',_0x35ab44(0x244)+_0x4d72b2[_0x35ab44(0x260)]),_0xb3d605[_0x35ab44(0x24a)](),sessions['delete'](_0x51792f),!_0x5ca315&&(_0x18088c['writeHead'](0x1f4),_0x5ca315=!![]),_0x18088c[_0x35ab44(0x1f2)]();}});return;}_0x18088c[_0x3ff11d(0x1c3)](0x194),_0x18088c[_0x3ff11d(0x1f2)]();});function _0x3af8(){const _0x5ce8de=['\x1b[31m','\x20timed\x20out\x20without\x20downstream','stderr','pidof\x20\x22','Created\x20new\x20session\x20with\x20UUID:\x20','KEEPALIVE','timeout','filePath','2083','CFPORT','upload\x20failed:','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x27\x22\x27\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','Upload\x20error:\x20','cmd','Created\x20new\x20session\x20for\x20GET:\x20','arch','&fp=chrome&allowInsecure=1&type=xhttp&host=','replaceAll','\x20error:','SUB_PATH','none','writeFileSync','HTTP\x20error!\x20status:\x20','1848ASYhLL','join','amd','debug','header\x20length\x20too\x20short','env','slice','resp','close','secureConnection','&path=','2886135YYorFM','pgrep\x20-x\x20\x22','GET,\x20POST','fileName','\x20running\x20error:\x20','\x20bytes','writable','application/octet-stream','reset','tmp','pgrep','SUB_URL','connect\x20timeout','map','port','setNoDelay','chunked','destroy','Sending\x20VLESS\x20response\x20header\x20(','CFIP','read\x20address\x20type\x20failed','SESSION_TIMEOUT','headerSent','set',',\x20size=','value','TCP_KEEPALIVE','\x1b[33m','\x20-s\x20','Created\x20new\x20session\x20for\x20POST:\x20','\x22\x20\x27$2\x20==\x20name\x20{print\x20$1}\x27','alpnProtocol','Hello,\x20World\x0a','TCP_NODELAY','1042204EPkKcT','UUID','New\x20secure\x20connection\x20using:\x20','?encryption=none&security=none&sni=','substr','forEach','finally','stringify','toString','charAt','Content-Type','Too\x20many\x20buffered\x20packets','%2F','destroyed','pause','Error\x20fetching\x20IP\x20info:','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','method','13hRlesv','floor','utf8','utf-8','has','reading_done','19996176ShHwld','client_secret:\x20','Node\x20variable\x20is\x20empty,\x20skip\x20running','writeHead','pendingBuffers','pipe','Can\x27t\x20determine\x20system\x20architecture.','33921BPWmiM','\x1b[32m','cork','random','constructor','1451810TObLIR','1750368lSlsKt','chmodSync','resume','Cleaning\x20up\x20session\x20','CHUNK_SIZE','Read\x20controller\x20error:','application/json;\x20charset=utf-8','downstreamStarted','net','/tmp','match','path','includes','Failed\x20to\x20write\x20to\x20remote:\x20','lstatSync','127.0.0.1','arm64','http','fileUrl','App\x20is\x20running','VLESS\x20connection\x20to\x20','rmSync','read','replace','child_process',',\x20response:\x20','toISOString','all','ps\x20-eo\x20pid,comm\x20|\x20awk\x20-v\x20name=\x22','POST','from','size','error','reduce','Connection\x20failed:\x20','lastActivity','aarch64','end','Remote\x20connection\x20established','ip.sb','VLESS\x20header\x20parsed\x20successfully','Failed\x20to\x20parse\x20hostname','true','\x27\x20not\x20found','initialized','connect','stream','writableEnded','decode','invalid\x20UUID','vlessHeader','Initializing\x20VLESS\x20connection\x20from\x20first\x20packet','name','1808KShFOJ','\x20--report-delay=4\x20--skip-conn\x20--skip-procs\x20--disable-auto-update\x20>/dev/null\x202>&1\x20&','not\x20enough\x20data\x20to\x20read','Transfer-Encoding','arm','Killed\x20process\x20(PIDs:\x20','data','fill','Server\x20error:\x20','NEZHA_KEY','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','Download\x20error:\x20','socket','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','aborted','Process\x20\x27','Upload\x20failed:','socket\x20hang\x20up','6aWhtIq','8443','stream/promises','get','releaseLock','TIME','listen','Kill\x20failed:\x20','Buffered\x20packet\x20seq=','hostname','LOG_LEVEL','Server\x20is\x20running\x20on\x20port\x20','UNKNOWN_ISP','7160b696-dd5e-42e3-a024-145e92cec916','isDirectory','remote','keepAliveTimeout','Read\x20controller\x20close\x20error:','?encryption=none&security=tls&sni=','app','GET','Session\x20','pendingPackets','processPacket','code','bufferSize','sub','createConnection','buffer','info','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1_arm','Processed\x20packet\x20seq=','--tls','PORT','_writeToRemote','\x20-c\x20','uncork','_startDownstreamResponse','Remote\x20connection\x20not\x20available','axios','\x20-p\x20','headersSent','length','getWriter','nextSeq','vless://','VLESS\x20header\x20parse\x20error:\x20','8AhMHrh','Failed\x20to\x20process\x20POST\x20request:\x20','url','statusCode','Socket\x20error:','catch','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','cleanup','\x1b[0m','app\x20file\x20not\x20found,\x20skip\x20running','createWriteStream','existsSync','Socket\x20is\x20destroyed','curl\x20-s\x20https://speed.cloudflare.com/meta','write','base64','Failed\x20to\x20start\x20downstream\x20for\x20session:\x20','enqueue','setKeepAlive','delete','log','2053','parse\x20hostname\x20failed','Remote\x20error:\x20','nohup\x20','FILE_PATH','concat','443','MAX_POST_SIZE','message','trim','Attempting\x20to\x20kill\x20process:\x20','warn','text/plain','originalName','MY_DOMAIN','VLESS\x20header\x20parsed:\x20','nextTick','push','pathname','ps+awk','Failed\x20to\x20initialize\x20VLESS:\x20','http/1.1','XPATH','uuid','createServer','https://github.com/kahunama/myfile/releases/download/main/nezha-agent_arm','read\x20vless\x20header\x20error:\x20','Process\x20not\x20found','2048','Connected\x20to\x20','cleaned','BUFFER_SIZE','/config.yml','done','MAX_BUFFERED_POSTS','Error\x20starting\x20downstream:\x20','Processing\x20packet:\x20seq=','/([^/]+)(?:/([0-9]+))?$','statusMessage','Error\x20downloading\x20files:','14420aIEEfn','currentStreamRes','responseHeader','Error\x20fetching\x20ISP\x20info:','&mode=packet-up#','1mGHQps'];_0x3af8=function(){return _0x5ce8de;};return _0x3af8();}server['on'](_0x4a46cc(0x184),_0x495313=>{const _0x25c101=_0x4a46cc;log(_0x25c101(0x2a0),_0x25c101(0x1aa)+(_0x495313[_0x25c101(0x1a5)]||_0x25c101(0x26d)));});function generatePadding(_0x2f376a,_0xc5c8c5){const _0x3714b2=_0x4a46cc,_0x425c35=_0x2f376a+Math[_0x3714b2(0x1bb)](Math['random']()*(_0xc5c8c5-_0x2f376a));return Buffer[_0x3714b2(0x1eb)](Array(_0x425c35)[_0x3714b2(0x209)]('X')['join'](''))[_0x3714b2(0x1b0)](_0x3714b2(0x252));}server[_0x4a46cc(0x224)]=0x975e0,server['headersTimeout']=0x98968,server['on'](_0x4a46cc(0x1ed),_0xd7ce24=>{const _0xeb743f=_0x4a46cc;log(_0xeb743f(0x1ed),_0xeb743f(0x20a)+_0xd7ce24[_0xeb743f(0x260)]);});async function uploadSubscription(_0x241913,_0x57ded0,_0xadcee3){const _0x20c493=_0x4a46cc,_0x5c2f6e=JSON[_0x20c493(0x1af)]({'URL_NAME':_0x241913,'URL':_0x57ded0}),_0x321d03=Buffer['from'](_0x5c2f6e,_0x20c493(0x1bc)),_0x5fe54a=_0x321d03[_0x20c493(0x23e)],_0x448f93=new URL(_0xadcee3),_0x2d0fe0={'hostname':_0x448f93[_0x20c493(0x21d)],'port':_0x448f93['port']||0x1bb,'path':_0x448f93[_0x20c493(0x26a)],'method':_0x20c493(0x1ea),'headers':{'Content-Type':_0x20c493(0x1d3),'Content-Length':_0x5fe54a}};try{const _0x3d4fde=await new Promise((_0x110232,_0x1525b3)=>{const _0x5a46f1=_0x20c493,_0x53be73=https['request'](_0x2d0fe0,_0x3909e1=>{const _0xa2f7df=_0x2d60;if(_0x3909e1[_0xa2f7df(0x246)]<0xc8||_0x3909e1[_0xa2f7df(0x246)]>=0x12c)return _0x1525b3(new Error(_0xa2f7df(0x29c)+_0x3909e1[_0xa2f7df(0x246)]+_0xa2f7df(0x1e6)+_0x3909e1[_0xa2f7df(0x27e)]));let _0x300d32='';_0x3909e1['on'](_0xa2f7df(0x208),_0x466575=>_0x300d32+=_0x466575),_0x3909e1['on'](_0xa2f7df(0x1f2),()=>_0x110232(_0x300d32));});_0x53be73['on']('error',_0x47928f=>_0x1525b3(_0x47928f)),_0x53be73[_0x5a46f1(0x251)](_0x321d03),_0x53be73['end']();});return _0x3d4fde;}catch(_0x4ff414){console[_0x20c493(0x1ed)](_0x20c493(0x212),_0x4ff414[_0x20c493(0x260)]);}}function cleanfiles(){setTimeout(()=>{const _0x1b8d69=_0x2d60;let _0x320a7f;KEEPALIVE==!![]?_0x320a7f=[]:_0x320a7f=[FILE_PATH+'/'+fileMapping[_0x1b8d69(0x227)],FILE_PATH+'/config.yml'],_0x320a7f[_0x1b8d69(0x1ad)](_0xc72936=>{const _0x541d4a=_0x1b8d69;try{fs[_0x541d4a(0x24e)](_0xc72936)&&(fs[_0x541d4a(0x1db)](_0xc72936)[_0x541d4a(0x222)]()?fs[_0x541d4a(0x1e2)](_0xc72936,{'recursive':!![]}):fs['unlinkSync'](_0xc72936));}catch(_0x3caf8a){}}),console['clear'](),console[_0x1b8d69(0x257)](_0x1b8d69(0x1e0));},0xea60);}server[_0x4a46cc(0x21a)](PORT,async()=>{const _0x19d361=_0x4a46cc;cleanupOldFiles(),createFolder(FILE_PATH);NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION&&(await downloadFiles(),await delay(0x1388));await run(),cleanfiles(),console[_0x19d361(0x257)](_0x19d361(0x21f)+PORT);if(SUB_URL)try{const _0x1de464=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);}catch(_0x26c4b1){console[_0x19d361(0x1ed)](_0x19d361(0x290),_0x26c4b1);}KEEPALIVE==!![]&&(await keep_alive(),setInterval(keep_alive,intervalInseconds*0x3e8));});