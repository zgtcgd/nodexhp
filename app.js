const _0x3ea9a3=_0x1441;(function(_0x443beb,_0x1adffb){const _0x4ef216=_0x1441,_0x8bd786=_0x443beb();while(!![]){try{const _0x5477ac=parseInt(_0x4ef216(0x1e9))/0x1*(-parseInt(_0x4ef216(0x1b6))/0x2)+-parseInt(_0x4ef216(0x1a9))/0x3*(parseInt(_0x4ef216(0x233))/0x4)+-parseInt(_0x4ef216(0x28b))/0x5*(-parseInt(_0x4ef216(0x293))/0x6)+-parseInt(_0x4ef216(0x206))/0x7+-parseInt(_0x4ef216(0x1b1))/0x8+-parseInt(_0x4ef216(0x20a))/0x9+parseInt(_0x4ef216(0x216))/0xa;if(_0x5477ac===_0x1adffb)break;else _0x8bd786['push'](_0x8bd786['shift']());}catch(_0x327a59){_0x8bd786['push'](_0x8bd786['shift']());}}}(_0x5467,0x7aeb0));const os=require('os'),fs=require('fs'),net=require(_0x3ea9a3(0x1f8)),path=require(_0x3ea9a3(0x1dd)),http=require('http'),https=require(_0x3ea9a3(0x278)),axios=require(_0x3ea9a3(0x26b)),{Buffer}=require(_0x3ea9a3(0x194)),{exec,execSync}=require(_0x3ea9a3(0x1fa)),FILE_PATH=process[_0x3ea9a3(0x21a)][_0x3ea9a3(0x22b)]||_0x3ea9a3(0x1cc),SUB_PATH=process[_0x3ea9a3(0x21a)][_0x3ea9a3(0x200)]||_0x3ea9a3(0x270),PORT=process[_0x3ea9a3(0x21a)]['PORT']||0xbb8,CFPORT=process['env'][_0x3ea9a3(0x1fb)]||0x1bb,CFIP=process['env'][_0x3ea9a3(0x26e)]||_0x3ea9a3(0x23d),delay=_0x2a07b9=>new Promise(_0x55e961=>setTimeout(_0x55e961,_0x2a07b9)),SUB_URL=process[_0x3ea9a3(0x21a)][_0x3ea9a3(0x1a3)]||'',UUID=process[_0x3ea9a3(0x21a)][_0x3ea9a3(0x1d3)]||'',HTTPSTLS=process['env'][_0x3ea9a3(0x25f)]||_0x3ea9a3(0x1d1),XPATH=process[_0x3ea9a3(0x21a)][_0x3ea9a3(0x246)]||UUID[_0x3ea9a3(0x28e)](0x0,0x8),NEZHA_VERSION=process[_0x3ea9a3(0x21a)]['NEZHA_VERSION']||'V0',NEZHA_SERVER=process[_0x3ea9a3(0x21a)][_0x3ea9a3(0x27a)]||'',NEZHA_PORT=process[_0x3ea9a3(0x21a)][_0x3ea9a3(0x218)]||'443',NEZHA_KEY=process[_0x3ea9a3(0x21a)][_0x3ea9a3(0x24a)]||'',SUB_NAME=process[_0x3ea9a3(0x21a)]['SUB_NAME']||'',MY_DOMAIN=process[_0x3ea9a3(0x21a)]['MY_DOMAIN']||'',SETTINGS={[_0x3ea9a3(0x1d3)]:UUID,['LOG_LEVEL']:'none',['BUFFER_SIZE']:_0x3ea9a3(0x223),['XPATH']:_0x3ea9a3(0x209)+XPATH,[_0x3ea9a3(0x197)]:0x1e,[_0x3ea9a3(0x1e4)]:0xf4240,[_0x3ea9a3(0x20c)]:0x7530,[_0x3ea9a3(0x20d)]:0x400*0x400,['TCP_NODELAY']:!![],[_0x3ea9a3(0x249)]:!![]};function validate_uuid(_0x23db17,_0x38aa00){for(let _0x1a2768=0x0;_0x1a2768<0x10;_0x1a2768++){if(_0x23db17[_0x1a2768]!==_0x38aa00[_0x1a2768])return![];}return!![];}function concat_typed_arrays(_0x2fa87c,..._0x4fa724){const _0x173c52=_0x3ea9a3;if(!_0x4fa724||_0x4fa724[_0x173c52(0x1d7)]<0x1)return _0x2fa87c;let _0x5c6a2f=_0x2fa87c[_0x173c52(0x1d7)];for(let _0x535547 of _0x4fa724)_0x5c6a2f+=_0x535547[_0x173c52(0x1d7)];const _0xda9edb=new _0x2fa87c[(_0x173c52(0x199))](_0x5c6a2f);_0xda9edb['set'](_0x2fa87c,0x0),_0x5c6a2f=_0x2fa87c['length'];for(let _0x2a2969 of _0x4fa724){_0xda9edb[_0x173c52(0x1c5)](_0x2a2969,_0x5c6a2f),_0x5c6a2f+=_0x2a2969['length'];}return _0xda9edb;}function log(_0x1ce432,..._0x2331f0){const _0x1b5dc4=_0x3ea9a3;if(SETTINGS[_0x1b5dc4(0x276)]===_0x1b5dc4(0x1d6))return;const _0x12c7b7={'debug':0x0,'info':0x1,'warn':0x2,'error':0x3},_0xccac3e={'debug':_0x1b5dc4(0x1c6),'info':_0x1b5dc4(0x1ea),'warn':_0x1b5dc4(0x1d2),'error':_0x1b5dc4(0x203),'reset':_0x1b5dc4(0x1f0)},_0x72f20f=_0x12c7b7[SETTINGS[_0x1b5dc4(0x276)]]||0x1,_0x44eeaa=_0x12c7b7[_0x1ce432]||0x0;if(_0x44eeaa>=_0x72f20f){const _0x5ac76e=new Date()[_0x1b5dc4(0x229)](),_0x3c2bc1=_0xccac3e[_0x1ce432]||_0xccac3e[_0x1b5dc4(0x292)];console[_0x1b5dc4(0x22f)](_0x3c2bc1+'['+_0x5ac76e+_0x1b5dc4(0x277)+_0x1ce432+']',..._0x2331f0,_0xccac3e[_0x1b5dc4(0x292)]);}}function createFolder(_0x368ef7){if(!fs['existsSync'](_0x368ef7))fs['mkdirSync'](_0x368ef7);else{}}function generateRandomString(_0x38cad5){const _0xef51ab=_0x3ea9a3,_0x12ee6e=_0xef51ab(0x1ee);let _0xeaf8e7='';for(let _0xaf5b44=0x0;_0xaf5b44<_0x38cad5;_0xaf5b44++){_0xeaf8e7+=_0x12ee6e[_0xef51ab(0x204)](Math[_0xef51ab(0x23c)](Math[_0xef51ab(0x258)]()*_0x12ee6e[_0xef51ab(0x1d7)]));}return _0xeaf8e7;}function getSystemArchitecture(){const _0x376764=_0x3ea9a3,_0x47187a=os[_0x376764(0x26c)]();return _0x47187a===_0x376764(0x27d)||_0x47187a===_0x376764(0x252)||_0x47187a===_0x376764(0x19f)?_0x376764(0x27d):_0x376764(0x1e7);}function getFilesForArchitecture(_0xf2bf6b){const _0x1a534f=_0x3ea9a3,_0x2091f0={'npm':{'V0':{'arm':_0x1a534f(0x25a),'amd':_0x1a534f(0x288)},'V1':{'arm':_0x1a534f(0x1a7),'amd':_0x1a534f(0x18f)}}};if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION){const _0x592cc1=[{'fileName':generateRandomString(0x5),'originalName':_0x1a534f(0x211),'fileUrl':_0x2091f0[_0x1a534f(0x211)][NEZHA_VERSION][_0xf2bf6b]}];return _0x592cc1;}else return[];}function authorizeFiles(_0x56dce8){const _0x3c5b57=_0x3ea9a3,_0x5571dc=0x1fd;_0x56dce8[_0x3c5b57(0x192)](_0x4ecc7e=>{const _0x574fe9=_0x3c5b57,_0x21d51f=path[_0x574fe9(0x1ae)](FILE_PATH,_0x4ecc7e[_0x574fe9(0x286)]);fs[_0x574fe9(0x237)](_0x21d51f,_0x5571dc,_0x115bf5=>{const _0x5e6c9a=_0x574fe9;_0x115bf5?console['error']('Empowerment\x20failed\x20for\x20'+_0x21d51f+'\x20('+_0x4ecc7e['originalName']+'):\x20'+_0x115bf5):console[_0x5e6c9a(0x22f)](_0x5e6c9a(0x260)+_0x21d51f+'\x20('+_0x4ecc7e[_0x5e6c9a(0x28a)]+'):\x20'+_0x5571dc[_0x5e6c9a(0x239)](0x8));});});}function download_function(_0x41d71b,_0x2de93f,_0x18abb1,_0x3099b5){const _0x147f10=_0x3ea9a3,_0x3028a9=path[_0x147f10(0x1ae)](FILE_PATH,_0x41d71b);if(fs[_0x147f10(0x266)](_0x3028a9)){console['log'](_0x147f10(0x261)+_0x2de93f+_0x147f10(0x284)+_0x41d71b+')\x20already\x20exists,\x20skipping\x20download.'),_0x3099b5(null,{'fileName':_0x41d71b,'originalName':_0x2de93f});return;}const _0x5ded43=fs[_0x147f10(0x267)](_0x3028a9);axios({'method':'get','url':_0x18abb1,'responseType':_0x147f10(0x220)})[_0x147f10(0x291)](_0x138f11=>{const _0x47dc42=_0x147f10;_0x138f11[_0x47dc42(0x275)][_0x47dc42(0x1ca)](_0x5ded43),_0x5ded43['on']('finish',()=>{const _0x451167=_0x47dc42;_0x5ded43[_0x451167(0x1e3)](),console['log'](_0x451167(0x1bb)+_0x2de93f+_0x451167(0x284)+_0x41d71b+')\x20successfully'),_0x3099b5(null,{'fileName':_0x41d71b,'originalName':_0x2de93f});}),_0x5ded43['on']('error',_0x30747f=>{const _0x2d9e20=_0x47dc42;fs['unlink'](_0x3028a9,()=>{});const _0x1c7f8e=_0x2d9e20(0x1bb)+_0x2de93f+_0x2d9e20(0x284)+_0x41d71b+_0x2d9e20(0x26f)+_0x30747f[_0x2d9e20(0x1d5)];console[_0x2d9e20(0x1a0)](_0x1c7f8e),_0x3099b5(_0x1c7f8e);});})[_0x147f10(0x27c)](_0x1dab81=>{const _0x50daaa=_0x147f10,_0x5cbe5e=_0x50daaa(0x1bb)+_0x2de93f+_0x50daaa(0x284)+_0x41d71b+_0x50daaa(0x26f)+_0x1dab81['message'];console[_0x50daaa(0x1a0)](_0x5cbe5e),_0x3099b5(_0x5cbe5e);});}let fileMapping={};async function downloadFiles(){const _0x161ac9=_0x3ea9a3;try{const _0x2bbbf8=getSystemArchitecture(),_0x333070=getFilesForArchitecture(_0x2bbbf8);if(_0x333070[_0x161ac9(0x1d7)]===0x0){console[_0x161ac9(0x22f)](_0x161ac9(0x1c7));return;}const _0x530f48=_0x333070[_0x161ac9(0x1db)](_0x28e378=>new Promise((_0x11fabd,_0x576e46)=>{const _0x5e1354=_0x161ac9;download_function(_0x28e378[_0x5e1354(0x286)],_0x28e378[_0x5e1354(0x28a)],_0x28e378[_0x5e1354(0x18e)],(_0x239bd6,_0x59747c)=>{if(_0x239bd6)_0x576e46(_0x239bd6);else _0x11fabd(_0x59747c);});})),_0x323f5c=await Promise[_0x161ac9(0x1ed)](_0x530f48);return await authorizeFiles(_0x323f5c),_0x323f5c[_0x161ac9(0x192)](_0x2c9314=>{const _0x1b074d=_0x161ac9;fileMapping[_0x2c9314['originalName']]=_0x2c9314[_0x1b074d(0x286)];}),fileMapping;}catch(_0x1df350){return console[_0x161ac9(0x1a0)](_0x161ac9(0x26a),_0x1df350),fileMapping;}}let NEZHA_TLS='';function nezv1config(){const _0x27f5fc=_0x3ea9a3,_0xb529eb=_0x27f5fc(0x27e)+NEZHA_KEY+_0x27f5fc(0x1e2)+NEZHA_SERVER+':'+NEZHA_PORT+_0x27f5fc(0x210)+NEZHA_TLS+_0x27f5fc(0x202)+UUID+_0x27f5fc(0x28f),_0x1e0e08=path[_0x27f5fc(0x1ae)](FILE_PATH,_0x27f5fc(0x1e1));try{fs[_0x27f5fc(0x1d0)](_0x1e0e08,_0xb529eb),console[_0x27f5fc(0x22f)](_0x27f5fc(0x1f5));}catch(_0x312c59){console['error'](_0x27f5fc(0x27f),_0x312c59);}}async function runapp(){const _0x5d8a20=_0x3ea9a3;if(fileMapping['npm']&&fs[_0x5d8a20(0x266)](path[_0x5d8a20(0x1ae)](FILE_PATH,fileMapping[_0x5d8a20(0x211)]))){const _0x4567a4=[_0x5d8a20(0x244),_0x5d8a20(0x23f),_0x5d8a20(0x1e0),_0x5d8a20(0x226),'2083',_0x5d8a20(0x1fd)];if(NEZHA_VERSION==='V0'){if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){_0x4567a4['includes'](NEZHA_PORT)?NEZHA_TLS=_0x5d8a20(0x1c0):NEZHA_TLS='';const _0x524c4c='nohup\x20'+FILE_PATH+'/'+fileMapping['npm']+_0x5d8a20(0x1dc)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5d8a20(0x22e)+NEZHA_KEY+'\x20'+NEZHA_TLS+_0x5d8a20(0x250);try{await exec(_0x524c4c),console[_0x5d8a20(0x22f)](fileMapping['npm']+_0x5d8a20(0x1f9)),await delay(0x3e8);}catch(_0x224e81){console['error'](fileMapping[_0x5d8a20(0x211)]+_0x5d8a20(0x20f)+_0x224e81);}}else console[_0x5d8a20(0x22f)](fileMapping['npm']+'\x20variable\x20is\x20empty,skip\x20running');}else{if(NEZHA_VERSION==='V1'){if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){_0x4567a4[_0x5d8a20(0x196)](NEZHA_PORT)?NEZHA_TLS=_0x5d8a20(0x1d1):NEZHA_TLS=_0x5d8a20(0x238);nezv1config();const _0x3c8374=_0x5d8a20(0x1f6)+FILE_PATH+'/'+fileMapping['npm']+_0x5d8a20(0x19c)+FILE_PATH+_0x5d8a20(0x28c);try{await exec(_0x3c8374),console[_0x5d8a20(0x22f)](fileMapping['npm']+_0x5d8a20(0x1f9)),await delay(0x3e8);}catch(_0x1581f6){console[_0x5d8a20(0x1a0)](fileMapping[_0x5d8a20(0x211)]+_0x5d8a20(0x20f)+_0x1581f6);}}else console['log'](fileMapping[_0x5d8a20(0x211)]+'\x20variable\x20is\x20empty,skip\x20running');}}}}function parse_uuid(_0x2bdc0f){const _0x1983cb=_0x3ea9a3;_0x2bdc0f=_0x2bdc0f[_0x1983cb(0x1c3)]('-','');const _0x585912=[];for(let _0x133a30=0x0;_0x133a30<0x10;_0x133a30++){_0x585912[_0x1983cb(0x22c)](parseInt(_0x2bdc0f[_0x1983cb(0x279)](_0x133a30*0x2,0x2),0x10));}return _0x585912;}async function read_vless_header(_0x5e3509,_0x38b117){const _0x40ab63=_0x3ea9a3;let _0x47daa2=0x0,_0x4ecb42=new Uint8Array(),_0x33642d={'value':_0x4ecb42,'done':![]};async function _0x56717e(_0x339b95){const _0x341529=_0x1441;if(_0x33642d[_0x341529(0x26d)])throw new Error(_0x341529(0x243));const _0x57b4d5=_0x339b95-_0x47daa2;if(_0x57b4d5<0x1)return;_0x33642d=await read_atleast(_0x5e3509,_0x57b4d5),_0x47daa2+=_0x33642d[_0x341529(0x245)][_0x341529(0x1d7)],_0x4ecb42=concat_typed_arrays(_0x4ecb42,_0x33642d[_0x341529(0x245)]);}await _0x56717e(0x1+0x10+0x1);const _0x1f7b08=_0x4ecb42[0x0],_0x40e5dc=_0x4ecb42[_0x40ab63(0x28e)](0x1,0x1+0x10),_0x215747=parse_uuid(_0x38b117);if(!validate_uuid(_0x40e5dc,_0x215747))throw new Error(_0x40ab63(0x262));const _0x32ccf5=_0x4ecb42[0x1+0x10],_0xb1a794=0x1+0x10+0x1+_0x32ccf5+0x1+0x2+0x1;await _0x56717e(_0xb1a794+0x1);const _0xde0d83=_0x4ecb42[0x1+0x10+0x1+_0x32ccf5],_0x11c4e6=0x1;if(_0xde0d83!==_0x11c4e6)throw new Error(_0x40ab63(0x214)+_0xde0d83);const _0x8d4814=(_0x4ecb42[_0xb1a794-0x1-0x2]<<0x8)+_0x4ecb42[_0xb1a794-0x1-0x1],_0x115350=_0x4ecb42[_0xb1a794-0x1],_0x4eb18b=0x1,_0x8be10d=0x2,_0x263010=0x3;let _0x44eb74=-0x1;if(_0x115350===_0x4eb18b)_0x44eb74=_0xb1a794+0x4;else{if(_0x115350===_0x263010)_0x44eb74=_0xb1a794+0x10;else _0x115350===_0x8be10d&&(_0x44eb74=_0xb1a794+0x1+_0x4ecb42[_0xb1a794]);}if(_0x44eb74<0x0)throw new Error('read\x20address\x20type\x20failed');await _0x56717e(_0x44eb74);const _0x5cfeb9=_0xb1a794;let _0x65134c='';if(_0x115350===_0x4eb18b)_0x65134c=_0x4ecb42[_0x40ab63(0x28e)](_0x5cfeb9,_0x5cfeb9+0x4)[_0x40ab63(0x1ae)]('.');else{if(_0x115350===_0x8be10d)_0x65134c=new TextDecoder()['decode'](_0x4ecb42['slice'](_0x5cfeb9+0x1,_0x5cfeb9+0x1+_0x4ecb42[_0x5cfeb9]));else _0x115350===_0x263010&&(_0x65134c=_0x4ecb42['slice'](_0x5cfeb9,_0x5cfeb9+0x10)[_0x40ab63(0x21c)]((_0x6a8132,_0x4dde98,_0x1ad96e,_0x41c3be)=>_0x1ad96e%0x2?_0x6a8132['concat'](((_0x41c3be[_0x1ad96e-0x1]<<0x8)+_0x4dde98)['toString'](0x10)):_0x6a8132,[])[_0x40ab63(0x1ae)](':'));}if(!_0x65134c){log(_0x40ab63(0x1a0),_0x40ab63(0x1a8));throw new Error(_0x40ab63(0x207));}return log('info',_0x40ab63(0x234)+_0x65134c+':'+_0x8d4814),{'hostname':_0x65134c,'port':_0x8d4814,'data':_0x4ecb42['slice'](_0x44eb74),'resp':new Uint8Array([_0x1f7b08,0x0])};}async function read_atleast(_0x432fb7,_0x505332){const _0x18b5f5=_0x3ea9a3,_0x591df8=[];let _0x59d703=![];while(_0x505332>0x0&&!_0x59d703){const _0x8599d5=await _0x432fb7['read']();if(_0x8599d5[_0x18b5f5(0x245)]){const _0x7715b7=new Uint8Array(_0x8599d5[_0x18b5f5(0x245)]);_0x591df8[_0x18b5f5(0x22c)](_0x7715b7),_0x505332-=_0x7715b7[_0x18b5f5(0x1d7)];}_0x59d703=_0x8599d5[_0x18b5f5(0x26d)];}if(_0x505332>0x0)throw new Error(_0x18b5f5(0x1a6));return{'value':concat_typed_arrays(..._0x591df8),'done':_0x59d703};}async function parse_header(_0x6e05d7,_0x2500fd){const _0x1f44de=_0x3ea9a3;log(_0x1f44de(0x1e6),_0x1f44de(0x215));const _0x557917=_0x2500fd[_0x1f44de(0x1bd)][_0x1f44de(0x1e5)]();try{const _0x44e8b9=await read_vless_header(_0x557917,_0x6e05d7);return log('debug',_0x1f44de(0x254)),_0x44e8b9;}catch(_0x4268e7){log(_0x1f44de(0x1a0),_0x1f44de(0x259)+_0x4268e7[_0x1f44de(0x1d5)]);throw new Error(_0x1f44de(0x21d)+_0x4268e7[_0x1f44de(0x1d5)]);}finally{_0x557917[_0x1f44de(0x1b8)]();}}async function connect_remote(_0x398fbe,_0x11d45b){const _0x5e55d3=_0x3ea9a3,_0xc77de2=0x1f40;try{const _0x3b74a3=await timed_connect(_0x398fbe,_0x11d45b,_0xc77de2);return _0x3b74a3[_0x5e55d3(0x231)](!![]),_0x3b74a3[_0x5e55d3(0x24c)](!![],0x3e8),_0x3b74a3['bufferSize']=parseInt(SETTINGS[_0x5e55d3(0x224)])*0x400,log(_0x5e55d3(0x25b),'Connected\x20to\x20'+_0x398fbe+':'+_0x11d45b),_0x3b74a3;}catch(_0x5d2716){log(_0x5e55d3(0x1a0),_0x5e55d3(0x240)+_0x5d2716[_0x5e55d3(0x1d5)]);throw _0x5d2716;}}function timed_connect(_0x4dbfc3,_0x2c0ea6,_0x5d832a){return new Promise((_0x3135cd,_0x199a75)=>{const _0xa958c5=_0x1441,_0x2be0b5=net[_0xa958c5(0x217)]({'host':_0x4dbfc3,'port':_0x2c0ea6}),_0x18aa2e=setTimeout(()=>{const _0x4ebb0b=_0xa958c5;_0x199a75(new Error(_0x4ebb0b(0x235)));},_0x5d832a);_0x2be0b5['on'](_0xa958c5(0x1d8),()=>{clearTimeout(_0x18aa2e),_0x3135cd(_0x2be0b5);}),_0x2be0b5['on'](_0xa958c5(0x1a0),_0x3f2a36=>{clearTimeout(_0x18aa2e),_0x199a75(_0x3f2a36);});});}function pipe_relay(){async function _0x56f739(_0x4b8013,_0x3cafd9,_0x2ca02c){const _0x1abf20=_0x1441,_0x193a98=parseInt(SETTINGS[_0x1abf20(0x20d)]);if(_0x2ca02c['length']>0x0){if(_0x3cafd9[_0x1abf20(0x274)])_0x3cafd9[_0x1abf20(0x1e8)](),_0x3cafd9[_0x1abf20(0x274)](_0x2ca02c),process[_0x1abf20(0x190)](()=>_0x3cafd9[_0x1abf20(0x256)]());else{const _0x5f4729=_0x3cafd9['writable'][_0x1abf20(0x19a)]();try{await _0x5f4729[_0x1abf20(0x274)](_0x2ca02c);}finally{_0x5f4729[_0x1abf20(0x1b8)]();}}}try{_0x4b8013[_0x1abf20(0x1ca)]?(_0x4b8013[_0x1abf20(0x1b9)](),_0x4b8013['pipe'](_0x3cafd9,{'end':!![],'highWaterMark':_0x193a98}),_0x4b8013[_0x1abf20(0x268)]()):await _0x4b8013[_0x1abf20(0x1bd)]['pipeTo'](_0x3cafd9['writable'],{'preventClose':![],'preventAbort':![],'preventCancel':![],'signal':AbortSignal[_0x1abf20(0x1be)](SETTINGS[_0x1abf20(0x20c)])});}catch(_0x5e0eb2){!_0x5e0eb2[_0x1abf20(0x1d5)][_0x1abf20(0x196)](_0x1abf20(0x1eb))&&log('error',_0x1abf20(0x21f),_0x5e0eb2[_0x1abf20(0x1d5)]);throw _0x5e0eb2;}}return _0x56f739;}function _0x5467(){const _0x26ca76=['downstreamStarted','2096','/config.yml','\x0a\x20\x20\x20\x20debug:\x20false\x0a\x20\x20\x20\x20disable_auto_update:\x20true\x0a\x20\x20\x20\x20disable_command_execute:\x20false\x0a\x20\x20\x20\x20disable_force_update:\x20true\x0a\x20\x20\x20\x20disable_nat:\x20false\x0a\x20\x20\x20\x20disable_send_query:\x20false\x0a\x20\x20\x20\x20gpu:\x20false\x0a\x20\x20\x20\x20insecure_tls:\x20false\x0a\x20\x20\x20\x20ip_report_period:\x201800\x0a\x20\x20\x20\x20report_delay:\x204\x0a\x20\x20\x20\x20server:\x20','close','MAX_POST_SIZE','getReader','debug','amd','cork','581LaPNkV','\x1b[32m','aborted','hostname','all','abcdefghijklmnopqrstuvwxyz0123456789','size','\x1b[0m','Cleanup\x20error:\x20','lastActivity','vlessHeader','):\x20','config.yml\x20file\x20created\x20and\x20written\x20successfully.','nohup\x20','_startDownstreamResponse','net','\x20is\x20running','child_process','CFPORT','listen','2053','socket','&mode=packet-up#','SUB_PATH','\x20timed\x20out\x20without\x20downstream','\x0a\x20\x20\x20\x20use_gitee_to_upgrade:\x20false\x0a\x20\x20\x20\x20use_ipv6_country_code:\x20false\x0a\x20\x20\x20\x20uuid:\x20','\x1b[31m','charAt','vless://','6495286lsIERF','parse\x20hostname\x20failed','Processed\x20packet\x20seq=','%2F','8067789jOtzHw','Read\x20controller\x20close\x20error:','SESSION_TIMEOUT','CHUNK_SIZE','end','\x20running\x20error:\x20','\x0a\x20\x20\x20\x20skip_connection_count:\x20false\x0a\x20\x20\x20\x20skip_procs_count:\x20false\x0a\x20\x20\x20\x20temperature:\x20false\x0a\x20\x20\x20\x20tls:\x20','npm','warn','get','unsupported\x20command:\x20','Starting\x20to\x20parse\x20VLESS\x20header','39171210ZhBoPU','createConnection','NEZHA_PORT','no-store','env','Initializing\x20VLESS\x20connection\x20from\x20first\x20packet','reduce','read\x20vless\x20header\x20error:\x20','&fp=chrome&allowInsecure=1&type=xhttp&host=','Relay\x20error:','stream','statusCode','/([^/]+)(?:/([0-9]+))?$','2048','BUFFER_SIZE','Created\x20new\x20session\x20with\x20UUID:\x20','2087','Transfer-Encoding','destroy','toISOString','VLESS\x20header\x20parsed:\x20','FILE_PATH','push','Server\x20is\x20running\x20on\x20port\x20','\x20-p\x20','log','Created\x20new\x20session\x20for\x20GET:\x20','setNoDelay','Buffered\x20packet\x20seq=','124772GEcuMa','VLESS\x20connection\x20to\x20','connect\x20timeout','?encryption=none&security=none&sni=','chmod','false','toString','Cleaning\x20up\x20session\x20','Server\x20error:\x20','floor','try.cloudflare.com','Failed\x20to\x20start\x20downstream\x20for\x20session:\x20','8443','Connection\x20failed:\x20','stringify','bufferedData','header\x20length\x20too\x20short','443','value','XPATH','trim','base64','TCP_KEEPALIVE','NEZHA_KEY','Received\x20out\x20of\x20order\x20packet\x20seq=','setKeepAlive','Upload\x20failed:\x20','keepAliveTimeout','curl\x20-s\x20--max-time\x202\x20ipv4.ip.sb','\x20>\x20/dev/null\x202>&1\x20&','Process\x20packet\x20error:\x20','arm64','pendingBuffers','VLESS\x20header\x20parsed\x20successfully','HTTP\x20error!\x20status:\x20','uncork','processPacket','random','VLESS\x20header\x20parse\x20error:\x20','https://github.com/kahunama/myfile/releases/download/main/nezha-agent_arm','info','Failed\x20to\x20initialize\x20VLESS:\x20','reading_done','currentStreamRes','HTTPSTLS','Empowerment\x20success\x20for\x20','File\x20','invalid\x20UUID','from','Upload\x20error:\x20','headersSent','existsSync','createWriteStream','resume','Processing\x20packet:\x20seq=','Error\x20downloading\x20files:','axios','arch','done','CFIP',')\x20failed:\x20','sub','rmSync','Remote\x20error:\x20','initialized','write','data','LOG_LEVEL',']\x20[','https','substr','NEZHA_SERVER','destroyed','catch','arm','\x0a\x20\x20\x20\x20client_secret:\x20','Error\x20creating\x20or\x20writing\x20config.yml\x20file:','utf-8','alpnProtocol','headerSent','pathname','\x20(renamed\x20to\x20','headersTimeout','fileName','application/octet-stream','https://github.com/kahunama/myfile/releases/download/main/nezha-agent','finally','originalName','5AcNclx','/config.yml\x20>\x20/dev/null\x202>&1\x20&','unlinkSync','slice','\x0a\x20\x20\x20\x20','text/plain','then','reset','900618jfQfPb','remote','fileUrl','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1','nextTick','curl\x20-s\x20--max-time\x201\x20ipv6.ip.sb','forEach','POST','buffer','application/json','includes','MAX_BUFFERED_POSTS','Read\x20controller\x20error:','constructor','getWriter','port','\x20-c\x20','_writeToRemote','cleaned','aarch64','error','Hello,\x20World\x0a','match','SUB_URL','Socket\x20is\x20destroyed','\x20bytes','not\x20enough\x20data\x20to\x20read','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1_arm','Failed\x20to\x20parse\x20hostname','75NJSseC','writeHead','createServer','initializeVLESS','&path=','join','Transform','responseHeader','7514184JeMbCw','url',',\x20size=','writableEnded','enqueue','70EBbPBy','cleanup','releaseLock','pause','Content-Type','Download\x20','nextSeq','readable','timeout','now','--tls','startDownstream','Client\x20connection\x20closed','replaceAll','uuid','set','\x1b[36m','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','request','delete','pipe','Error\x20starting\x20downstream:\x20','/tmp','Remote\x20connection\x20not\x20available','resp','http/1.1','writeFileSync','true','\x1b[33m','UUID','method','message','none','length','connect','localhost','lstatSync','map','\x20-s\x20','path','chunked'];_0x5467=function(){return _0x26ca76;};return _0x5467();}function socketToWebStream(_0x22f6d8){const _0x3bfe44=_0x3ea9a3;let _0x51e143,_0x4cf7bb;return _0x22f6d8['on'](_0x3bfe44(0x1a0),_0x1f0786=>{const _0x265d0=_0x3bfe44;log(_0x265d0(0x1a0),'Socket\x20error:',_0x1f0786[_0x265d0(0x1d5)]),_0x51e143?.[_0x265d0(0x1a0)](_0x1f0786),_0x4cf7bb?.[_0x265d0(0x1a0)](_0x1f0786);}),{'readable':new ReadableStream({'start'(_0x1c42bc){const _0x229663=_0x3bfe44;_0x51e143=_0x1c42bc,_0x22f6d8['on'](_0x229663(0x275),_0x1b121b=>{const _0x22265b=_0x229663;try{_0x1c42bc[_0x22265b(0x1b5)](_0x1b121b);}catch(_0x5e0add){log(_0x22265b(0x1a0),_0x22265b(0x198),_0x5e0add[_0x22265b(0x1d5)]);}}),_0x22f6d8['on'](_0x229663(0x20e),()=>{const _0x25faae=_0x229663;try{_0x1c42bc[_0x25faae(0x1e3)]();}catch(_0x507092){log(_0x25faae(0x1a0),_0x25faae(0x20b),_0x507092[_0x25faae(0x1d5)]);}});},'cancel'(){const _0x5f204f=_0x3bfe44;_0x22f6d8[_0x5f204f(0x228)]();}}),'writable':new WritableStream({'start'(_0x158ac0){_0x4cf7bb=_0x158ac0;},'write'(_0x2fe1e2){return new Promise((_0x4bc081,_0x59c207)=>{const _0x2959c0=_0x1441;if(_0x22f6d8[_0x2959c0(0x27b)]){_0x59c207(new Error(_0x2959c0(0x1a4)));return;}_0x22f6d8[_0x2959c0(0x274)](_0x2fe1e2,_0x5a7adf=>{if(_0x5a7adf)_0x59c207(_0x5a7adf);else _0x4bc081();});});},'close'(){const _0x1654f7=_0x3bfe44;!_0x22f6d8[_0x1654f7(0x27b)]&&_0x22f6d8['end']();},'abort'(_0x5e2a0f){const _0x98f5e1=_0x3bfe44;_0x22f6d8[_0x98f5e1(0x228)](_0x5e2a0f);}})};}function relay(_0x2f6a80,_0x48939b,_0x1c573c,_0x189237){const _0x12aeb7=_0x3ea9a3,_0x3b2cbd=pipe_relay();let _0x1bd938=![];const _0x4f25b8=socketToWebStream(_0x1c573c);function _0x41693a(){const _0x4f6c45=_0x1441;if(!_0x1bd938){_0x1bd938=!![];try{_0x1c573c[_0x4f6c45(0x228)]();}catch(_0x235f8c){!_0x235f8c[_0x4f6c45(0x1d5)][_0x4f6c45(0x196)](_0x4f6c45(0x1eb))&&!_0x235f8c['message'][_0x4f6c45(0x196)]('socket\x20hang\x20up')&&log(_0x4f6c45(0x1a0),_0x4f6c45(0x1f1)+_0x235f8c['message']);}}}const _0x278383=_0x3b2cbd(_0x48939b,_0x4f25b8,_0x189237[_0x12aeb7(0x275)])[_0x12aeb7(0x27c)](_0x264d70=>{const _0x9b7829=_0x12aeb7;!_0x264d70['message']['includes']('aborted')&&!_0x264d70[_0x9b7829(0x1d5)][_0x9b7829(0x196)]('socket\x20hang\x20up')&&log(_0x9b7829(0x1a0),_0x9b7829(0x264)+_0x264d70[_0x9b7829(0x1d5)]);})[_0x12aeb7(0x289)](()=>{const _0xf96aa6=_0x12aeb7;_0x48939b[_0xf96aa6(0x25d)]&&_0x48939b[_0xf96aa6(0x25d)]();}),_0x33d219=_0x3b2cbd(_0x4f25b8,_0x48939b,_0x189237[_0x12aeb7(0x1ce)])[_0x12aeb7(0x27c)](_0x5a3827=>{const _0x4523bb=_0x12aeb7;!_0x5a3827[_0x4523bb(0x1d5)][_0x4523bb(0x196)](_0x4523bb(0x1eb))&&!_0x5a3827[_0x4523bb(0x1d5)][_0x4523bb(0x196)]('socket\x20hang\x20up')&&log(_0x4523bb(0x1a0),'Download\x20error:\x20'+_0x5a3827[_0x4523bb(0x1d5)]);});_0x33d219['finally'](()=>_0x278383)['finally'](_0x41693a);}const sessions=new Map();class Session{constructor(_0x8336ba){const _0x52bb45=_0x3ea9a3;this['uuid']=_0x8336ba,this[_0x52bb45(0x1bc)]=0x0,this[_0x52bb45(0x1df)]=![],this[_0x52bb45(0x1f2)]=Date[_0x52bb45(0x1bf)](),this[_0x52bb45(0x1f3)]=null,this['remote']=null,this['initialized']=![],this['responseHeader']=null,this['headerSent']=![],this[_0x52bb45(0x242)]=new Map(),this[_0x52bb45(0x19e)]=![],this['pendingPackets']=[],this[_0x52bb45(0x25e)]=null,this[_0x52bb45(0x253)]=new Map(),log(_0x52bb45(0x1e6),_0x52bb45(0x225)+_0x8336ba);}async['initializeVLESS'](_0x24c682){const _0x19bb24=_0x3ea9a3;if(this[_0x19bb24(0x273)])return!![];try{log(_0x19bb24(0x1e6),_0x19bb24(0x21b));const _0x2ad8ad=new ReadableStream({'start'(_0x27ddb6){const _0x423962=_0x19bb24;_0x27ddb6[_0x423962(0x1b5)](_0x24c682),_0x27ddb6[_0x423962(0x1e3)]();}}),_0x58945b={'readable':_0x2ad8ad,'writable':new WritableStream()};return this[_0x19bb24(0x1f3)]=await parse_header(SETTINGS['UUID'],_0x58945b),log('info',_0x19bb24(0x22a)+this[_0x19bb24(0x1f3)]['hostname']+':'+this[_0x19bb24(0x1f3)][_0x19bb24(0x19b)]),this[_0x19bb24(0x18d)]=await connect_remote(this['vlessHeader'][_0x19bb24(0x1ec)],this[_0x19bb24(0x1f3)][_0x19bb24(0x19b)]),log(_0x19bb24(0x25b),'Remote\x20connection\x20established'),this[_0x19bb24(0x273)]=!![],!![];}catch(_0x3e3610){return log(_0x19bb24(0x1a0),_0x19bb24(0x25c)+_0x3e3610[_0x19bb24(0x1d5)]),![];}}async['processPacket'](_0x3e4864,_0xbfa8ef){const _0x27906e=_0x3ea9a3;try{this[_0x27906e(0x253)][_0x27906e(0x1c5)](_0x3e4864,_0xbfa8ef),log('debug',_0x27906e(0x232)+_0x3e4864+_0x27906e(0x1b3)+_0xbfa8ef[_0x27906e(0x1d7)]);while(this['pendingBuffers']['has'](this[_0x27906e(0x1bc)])){const _0x30c1ce=this[_0x27906e(0x253)][_0x27906e(0x213)](this[_0x27906e(0x1bc)]);this[_0x27906e(0x253)][_0x27906e(0x1c9)](this[_0x27906e(0x1bc)]);if(!this[_0x27906e(0x273)]&&this[_0x27906e(0x1bc)]===0x0){if(!await this[_0x27906e(0x1ac)](_0x30c1ce))throw new Error('Failed\x20to\x20initialize\x20VLESS\x20connection');this['responseHeader']=Buffer[_0x27906e(0x263)](this[_0x27906e(0x1f3)][_0x27906e(0x1ce)]),await this[_0x27906e(0x19d)](this[_0x27906e(0x1f3)][_0x27906e(0x275)]),this[_0x27906e(0x25e)]&&this['_startDownstreamResponse']();}else{if(!this[_0x27906e(0x273)]){log('warn',_0x27906e(0x24b)+_0x3e4864+'\x20before\x20initialization');continue;}await this['_writeToRemote'](_0x30c1ce);}this[_0x27906e(0x1bc)]++,log(_0x27906e(0x1e6),_0x27906e(0x208)+(this[_0x27906e(0x1bc)]-0x1));}if(this[_0x27906e(0x253)][_0x27906e(0x1ef)]>SETTINGS[_0x27906e(0x197)])throw new Error('Too\x20many\x20buffered\x20packets');return!![];}catch(_0x5616b7){log(_0x27906e(0x1a0),_0x27906e(0x251)+_0x5616b7[_0x27906e(0x1d5)]);throw _0x5616b7;}}[_0x3ea9a3(0x1f7)](){const _0x15d04b=_0x3ea9a3;if(!this[_0x15d04b(0x25e)]||!this['responseHeader'])return;try{const _0x22b1c9=this[_0x15d04b(0x25e)][_0x15d04b(0x1fe)]?.[_0x15d04b(0x281)]||_0x15d04b(0x1cf),_0x10e616=_0x22b1c9==='h2';!this[_0x15d04b(0x282)]&&(log(_0x15d04b(0x1e6),'Sending\x20VLESS\x20response\x20header\x20('+_0x22b1c9+_0x15d04b(0x1f4)+this[_0x15d04b(0x1b0)][_0x15d04b(0x1d7)]+_0x15d04b(0x1a5)),this[_0x15d04b(0x25e)][_0x15d04b(0x274)](this[_0x15d04b(0x1b0)]),this[_0x15d04b(0x282)]=!![]);if(_0x10e616){this[_0x15d04b(0x25e)][_0x15d04b(0x1fe)][_0x15d04b(0x231)](!![]);const _0x37b42a=new require(_0x15d04b(0x220))[_0x15d04b(0x1af)]({'transform'(_0x447ab9,_0xeb96f0,_0xf0e438){const _0x53097=_0x15d04b,_0x4dee3b=0x4000;for(let _0x35487e=0x0;_0x35487e<_0x447ab9[_0x53097(0x1d7)];_0x35487e+=_0x4dee3b){this[_0x53097(0x22c)](_0x447ab9[_0x53097(0x28e)](_0x35487e,_0x35487e+_0x4dee3b));}_0xf0e438();}});this[_0x15d04b(0x18d)]['pipe'](_0x37b42a)[_0x15d04b(0x1ca)](this[_0x15d04b(0x25e)]);}else this[_0x15d04b(0x18d)][_0x15d04b(0x1ca)](this[_0x15d04b(0x25e)]);this[_0x15d04b(0x18d)]['on']('end',()=>{const _0x2ae329=_0x15d04b;!this['currentStreamRes']['writableEnded']&&this[_0x2ae329(0x25e)][_0x2ae329(0x20e)]();}),this[_0x15d04b(0x18d)]['on'](_0x15d04b(0x1a0),_0x3e3255=>{const _0x5ddb13=_0x15d04b;log(_0x5ddb13(0x1a0),_0x5ddb13(0x272)+_0x3e3255[_0x5ddb13(0x1d5)]),!this[_0x5ddb13(0x25e)][_0x5ddb13(0x1b4)]&&this['currentStreamRes'][_0x5ddb13(0x20e)]();});}catch(_0x23437d){log(_0x15d04b(0x1a0),_0x15d04b(0x1cb)+_0x23437d[_0x15d04b(0x1d5)]),this[_0x15d04b(0x1b7)]();}}[_0x3ea9a3(0x1c1)](_0xe7dcab,_0x1b9970){const _0xafdea9=_0x3ea9a3;return!_0xe7dcab['headersSent']&&_0xe7dcab['writeHead'](0xc8,_0x1b9970),this[_0xafdea9(0x25e)]=_0xe7dcab,this[_0xafdea9(0x273)]&&this['responseHeader']&&this[_0xafdea9(0x1f7)](),_0xe7dcab['on'](_0xafdea9(0x1e3),()=>{const _0x1c95e2=_0xafdea9;log(_0x1c95e2(0x25b),_0x1c95e2(0x1c2)),this['cleanup']();}),!![];}async[_0x3ea9a3(0x19d)](_0x517976){const _0xbedef1=_0x3ea9a3;if(!this[_0xbedef1(0x18d)]||this[_0xbedef1(0x18d)][_0xbedef1(0x27b)])throw new Error(_0xbedef1(0x1cd));return new Promise((_0x107cfb,_0x502b35)=>{this['remote']['write'](_0x517976,_0x5a5ffd=>{const _0x15dabf=_0x1441;_0x5a5ffd?(log(_0x15dabf(0x1a0),'Failed\x20to\x20write\x20to\x20remote:\x20'+_0x5a5ffd['message']),_0x502b35(_0x5a5ffd)):_0x107cfb();});});}['_startDownstreamResponse'](){const _0x48a929=_0x3ea9a3;if(!this[_0x48a929(0x25e)]||!this['responseHeader'])return;try{!this[_0x48a929(0x282)]&&(this['currentStreamRes']['write'](this['responseHeader']),this[_0x48a929(0x282)]=!![]),this[_0x48a929(0x18d)][_0x48a929(0x1ca)](this[_0x48a929(0x25e)]),this['remote']['on'](_0x48a929(0x20e),()=>{const _0x291f26=_0x48a929;!this[_0x291f26(0x25e)][_0x291f26(0x1b4)]&&this[_0x291f26(0x25e)][_0x291f26(0x20e)]();}),this[_0x48a929(0x18d)]['on'](_0x48a929(0x1a0),_0x48fc3d=>{const _0x4bdd8e=_0x48a929;log(_0x4bdd8e(0x1a0),_0x4bdd8e(0x272)+_0x48fc3d['message']),!this[_0x4bdd8e(0x25e)]['writableEnded']&&this['currentStreamRes'][_0x4bdd8e(0x20e)]();});}catch(_0x5f0a45){log(_0x48a929(0x1a0),_0x48a929(0x1cb)+_0x5f0a45[_0x48a929(0x1d5)]),this[_0x48a929(0x1b7)]();}}[_0x3ea9a3(0x1b7)](){const _0x81d423=_0x3ea9a3;!this[_0x81d423(0x19e)]&&(this[_0x81d423(0x19e)]=!![],log(_0x81d423(0x1e6),_0x81d423(0x23a)+this[_0x81d423(0x1c4)]),this[_0x81d423(0x18d)]&&(this[_0x81d423(0x18d)][_0x81d423(0x228)](),this[_0x81d423(0x18d)]=null),this[_0x81d423(0x273)]=![],this['headerSent']=![]);}}const metaInfo=execSync('curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':'utf-8'}),ISP=metaInfo[_0x3ea9a3(0x247)]();let IP=MY_DOMAIN;if(!MY_DOMAIN)try{IP=execSync(_0x3ea9a3(0x24f),{'encoding':'utf-8'})['trim']();}catch(_0x4bf041){try{IP='['+execSync(_0x3ea9a3(0x191),{'encoding':_0x3ea9a3(0x280)})['trim']()+']';}catch(_0xea8fb1){log(_0x3ea9a3(0x1a0),'Failed\x20to\x20get\x20IP\x20address:',_0xea8fb1[_0x3ea9a3(0x1d5)]),IP=_0x3ea9a3(0x1d9);}}let vless_url;if(HTTPSTLS==='true')vless_url=_0x3ea9a3(0x205)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+IP+_0x3ea9a3(0x21e)+IP+_0x3ea9a3(0x1ad)+SETTINGS[_0x3ea9a3(0x246)]+_0x3ea9a3(0x1ff)+ISP+'-'+SUB_NAME;else HTTPSTLS==='false'&&(vless_url=_0x3ea9a3(0x205)+UUID+'@'+IP+':'+PORT+_0x3ea9a3(0x236)+IP+'&fp=chrome&allowInsecure=1&type=xhttp&host='+IP+_0x3ea9a3(0x1ad)+SETTINGS[_0x3ea9a3(0x246)]+'&mode=packet-up#'+ISP+'-'+SUB_NAME);const server=http[_0x3ea9a3(0x1ab)]((_0x26f194,_0x17a945)=>{const _0x35f5b8=_0x3ea9a3,_0x4dbe21={'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':'GET,\x20POST','Cache-Control':_0x35f5b8(0x219),'X-Accel-Buffering':'no','X-Padding':generatePadding(0x64,0x3e8)};if(_0x26f194['url']==='/'){_0x17a945[_0x35f5b8(0x1aa)](0xc8,{'Content-Type':_0x35f5b8(0x290)}),_0x17a945['end'](_0x35f5b8(0x1a1));return;}if(_0x26f194['url']==='/'+SUB_PATH){const _0x2368a9=''+vless_url,_0x26691a=Buffer[_0x35f5b8(0x263)](_0x2368a9)['toString'](_0x35f5b8(0x248));_0x17a945[_0x35f5b8(0x1aa)](0xc8,{'Content-Type':_0x35f5b8(0x290)}),_0x17a945[_0x35f5b8(0x20e)](_0x26691a+'\x0a');return;}const _0x268d0e=_0x26f194[_0x35f5b8(0x1b2)][_0x35f5b8(0x1a2)](new RegExp(XPATH+_0x35f5b8(0x222)));if(!_0x268d0e){_0x17a945['writeHead'](0x194),_0x17a945['end']();return;}const _0x32a33b=_0x268d0e[0x1],_0x6929a9=_0x268d0e[0x2]?parseInt(_0x268d0e[0x2]):null;if(_0x26f194[_0x35f5b8(0x1d4)]==='GET'&&!_0x6929a9){_0x4dbe21[_0x35f5b8(0x1ba)]=_0x35f5b8(0x287),_0x4dbe21[_0x35f5b8(0x227)]=_0x35f5b8(0x1de);let _0x2138bf=sessions['get'](_0x32a33b);!_0x2138bf&&(_0x2138bf=new Session(_0x32a33b),sessions['set'](_0x32a33b,_0x2138bf),log(_0x35f5b8(0x25b),_0x35f5b8(0x230)+_0x32a33b));_0x2138bf[_0x35f5b8(0x1df)]=!![];!_0x2138bf['startDownstream'](_0x17a945,_0x4dbe21)&&(log(_0x35f5b8(0x1a0),_0x35f5b8(0x23e)+_0x32a33b),!_0x17a945[_0x35f5b8(0x265)]&&(_0x17a945['writeHead'](0x1f4),_0x17a945[_0x35f5b8(0x20e)]()),_0x2138bf[_0x35f5b8(0x1b7)](),sessions['delete'](_0x32a33b));return;}if(_0x26f194[_0x35f5b8(0x1d4)]===_0x35f5b8(0x193)&&_0x6929a9!==null){let _0xa7ca94=sessions[_0x35f5b8(0x213)](_0x32a33b);!_0xa7ca94&&(_0xa7ca94=new Session(_0x32a33b),sessions[_0x35f5b8(0x1c5)](_0x32a33b,_0xa7ca94),log(_0x35f5b8(0x25b),'Created\x20new\x20session\x20for\x20POST:\x20'+_0x32a33b),setTimeout(()=>{const _0x19b963=_0x35f5b8,_0x47cddc=sessions[_0x19b963(0x213)](_0x32a33b);_0x47cddc&&!_0x47cddc['downstreamStarted']&&(log(_0x19b963(0x212),'Session\x20'+_0x32a33b+_0x19b963(0x201)),_0x47cddc[_0x19b963(0x1b7)](),sessions[_0x19b963(0x1c9)](_0x32a33b));},SETTINGS[_0x35f5b8(0x20c)]));let _0x57b151=[],_0x667d05=0x0,_0x24bb8f=![];_0x26f194['on'](_0x35f5b8(0x275),_0x297a50=>{const _0x3c6737=_0x35f5b8;_0x667d05+=_0x297a50[_0x3c6737(0x1d7)];if(_0x667d05>SETTINGS[_0x3c6737(0x1e4)]){!_0x24bb8f&&(_0x17a945[_0x3c6737(0x1aa)](0x19d),_0x17a945['end'](),_0x24bb8f=!![]);return;}_0x57b151[_0x3c6737(0x22c)](_0x297a50);}),_0x26f194['on'](_0x35f5b8(0x20e),async()=>{const _0x323488=_0x35f5b8;if(_0x24bb8f)return;try{const _0x31364f=Buffer['concat'](_0x57b151);log('info',_0x323488(0x269)+_0x6929a9+_0x323488(0x1b3)+_0x31364f['length']),await _0xa7ca94[_0x323488(0x257)](_0x6929a9,_0x31364f),!_0x24bb8f&&(_0x17a945[_0x323488(0x1aa)](0xc8,_0x4dbe21),_0x24bb8f=!![]),_0x17a945['end']();}catch(_0x1475e1){log(_0x323488(0x1a0),'Failed\x20to\x20process\x20POST\x20request:\x20'+_0x1475e1[_0x323488(0x1d5)]),_0xa7ca94[_0x323488(0x1b7)](),sessions[_0x323488(0x1c9)](_0x32a33b),!_0x24bb8f&&(_0x17a945[_0x323488(0x1aa)](0x1f4),_0x24bb8f=!![]),_0x17a945[_0x323488(0x20e)]();}});return;}_0x17a945['writeHead'](0x194),_0x17a945['end']();});server['on']('secureConnection',_0x3a0bb5=>{const _0x33dc07=_0x3ea9a3;log(_0x33dc07(0x1e6),'New\x20secure\x20connection\x20using:\x20'+(_0x3a0bb5[_0x33dc07(0x281)]||_0x33dc07(0x1cf)));});function generatePadding(_0xd842dc,_0x32070d){const _0x2f85c0=_0x3ea9a3,_0x2a6743=_0xd842dc+Math[_0x2f85c0(0x23c)](Math[_0x2f85c0(0x258)]()*(_0x32070d-_0xd842dc));return Buffer['from'](Array(_0x2a6743)['fill']('X')[_0x2f85c0(0x1ae)](''))['toString'](_0x2f85c0(0x248));}server[_0x3ea9a3(0x24e)]=0x975e0,server[_0x3ea9a3(0x285)]=0x98968,server['on'](_0x3ea9a3(0x1a0),_0x5c31c9=>{const _0x1804d8=_0x3ea9a3;log(_0x1804d8(0x1a0),_0x1804d8(0x23b)+_0x5c31c9['message']);});function _0x1441(_0x15fbf1,_0x54448c){const _0x54671c=_0x5467();return _0x1441=function(_0x14417f,_0x1d94cf){_0x14417f=_0x14417f-0x18d;let _0x2f714d=_0x54671c[_0x14417f];return _0x2f714d;},_0x1441(_0x15fbf1,_0x54448c);}async function uploadSubscription(_0x5b4860,_0x142da3,_0x3229ee){const _0x339954=_0x3ea9a3,_0x20bd45=JSON[_0x339954(0x241)]({'URL_NAME':_0x5b4860,'URL':_0x142da3}),_0x1f71ff={'hostname':new URL(_0x3229ee)[_0x339954(0x1ec)],'port':new URL(_0x3229ee)[_0x339954(0x19b)]||0x1bb,'path':new URL(_0x3229ee)[_0x339954(0x283)],'method':_0x339954(0x193),'headers':{'Content-Type':_0x339954(0x195),'Content-Length':_0x20bd45[_0x339954(0x1d7)]}};try{const _0x584149=await new Promise((_0x398355,_0x50d0ce)=>{const _0x1cc1ca=_0x339954,_0x137dff=https[_0x1cc1ca(0x1c8)](_0x1f71ff,_0x1b17c0=>{const _0x1e3d7b=_0x1cc1ca;if(_0x1b17c0['statusCode']<0xc8||_0x1b17c0[_0x1e3d7b(0x221)]>=0x12c)return _0x50d0ce(new Error(_0x1e3d7b(0x255)+_0x1b17c0['statusCode']));let _0x2269b2='';_0x1b17c0['on'](_0x1e3d7b(0x275),_0x5ae27f=>_0x2269b2+=_0x5ae27f),_0x1b17c0['on'](_0x1e3d7b(0x20e),()=>_0x398355(_0x2269b2));});_0x137dff['on'](_0x1cc1ca(0x1a0),_0x5be7a4=>_0x50d0ce(_0x5be7a4)),_0x137dff[_0x1cc1ca(0x274)](_0x20bd45),_0x137dff[_0x1cc1ca(0x20e)]();});return _0x584149;}catch(_0x2d3e5b){throw new Error(_0x339954(0x24d)+_0x2d3e5b[_0x339954(0x1d5)]);}}async function subupload(){UPLOAD_DATA=vless_url;try{const _0x383251=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);}catch(_0x29b5f2){}}function cleanfiles(){setTimeout(()=>{const _0x3816bc=_0x1441,_0x306a5=[FILE_PATH+'/'+fileMapping[_0x3816bc(0x211)],FILE_PATH+_0x3816bc(0x1e1)];_0x306a5[_0x3816bc(0x192)](_0x1c6d74=>{const _0x421e18=_0x3816bc;try{fs[_0x421e18(0x266)](_0x1c6d74)&&(fs[_0x421e18(0x1da)](_0x1c6d74)['isDirectory']()?fs[_0x421e18(0x271)](_0x1c6d74,{'recursive':!![]}):fs[_0x421e18(0x28d)](_0x1c6d74));}catch(_0x349e5a){}}),console['clear'](),console[_0x3816bc(0x22f)]('App\x20is\x20running');},0xea60);}server[_0x3ea9a3(0x1fc)](PORT,async()=>{const _0x51ac0f=_0x3ea9a3;createFolder(FILE_PATH),NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION&&await downloadFiles(),await delay(0x1388),await runapp(),cleanfiles(),console['log'](_0x51ac0f(0x22d)+PORT),SUB_URL&&await subupload();});