const _0xfffe6e=_0x3569;(function(_0x97a18c,_0x4ed42c){const _0x342b4c=_0x3569,_0x5f334b=_0x97a18c();while(!![]){try{const _0x431474=parseInt(_0x342b4c(0x198))/0x1+-parseInt(_0x342b4c(0x14a))/0x2+parseInt(_0x342b4c(0x195))/0x3*(parseInt(_0x342b4c(0x1a6))/0x4)+-parseInt(_0x342b4c(0x19c))/0x5*(parseInt(_0x342b4c(0x148))/0x6)+parseInt(_0x342b4c(0x1b8))/0x7*(-parseInt(_0x342b4c(0x131))/0x8)+parseInt(_0x342b4c(0x11d))/0x9*(parseInt(_0x342b4c(0xea))/0xa)+parseInt(_0x342b4c(0xfa))/0xb*(-parseInt(_0x342b4c(0x18b))/0xc);if(_0x431474===_0x4ed42c)break;else _0x5f334b['push'](_0x5f334b['shift']());}catch(_0x34e696){_0x5f334b['push'](_0x5f334b['shift']());}}}(_0x59d5,0x384f8));const FILE_PATH=process[_0xfffe6e(0xd9)]['FILE_PATH']||_0xfffe6e(0x1c7),intervalInseconds=process[_0xfffe6e(0xd9)][_0xfffe6e(0x125)]||0x64,PORT=process[_0xfffe6e(0xd9)][_0xfffe6e(0x13c)]||0xbb8,CFPORT=process[_0xfffe6e(0xd9)][_0xfffe6e(0xfe)]||0x1bb,CFIP=process[_0xfffe6e(0xd9)][_0xfffe6e(0xc3)]||_0xfffe6e(0x170),KEEPALIVE=(process[_0xfffe6e(0xd9)][_0xfffe6e(0x10b)]||_0xfffe6e(0xdc))===_0xfffe6e(0x1a9),HTTPSTLS=(process['env']['HTTPSTLS']||_0xfffe6e(0x1a9))==='true',SUB_URL=process[_0xfffe6e(0xd9)][_0xfffe6e(0xe6)]||'',UUID=process[_0xfffe6e(0xd9)][_0xfffe6e(0xeb)]||'7160b696-dd5e-42e3-a024-145e92cec916',XPATH=process[_0xfffe6e(0xd9)][_0xfffe6e(0x1c1)]||UUID[_0xfffe6e(0x11f)](0x0,0x8),NEZHA_VERSION=process[_0xfffe6e(0xd9)][_0xfffe6e(0x12a)]||'V0',NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0xfffe6e(0x11c)]||_0xfffe6e(0x17c),NEZHA_KEY=process[_0xfffe6e(0xd9)][_0xfffe6e(0x114)]||'',SUB_NAME=process['env']['SUB_NAME']||'',MY_DOMAIN=process['env']['MY_DOMAIN']||'',LOCAL_DOMAIN=process[_0xfffe6e(0xd9)][_0xfffe6e(0x16c)]||'',os=require('os'),fs=require('fs'),net=require(_0xfffe6e(0x196)),path=require(_0xfffe6e(0x1ac)),http=require(_0xfffe6e(0xd3)),https=require(_0xfffe6e(0x154)),axios=require(_0xfffe6e(0xfd)),{pipeline}=require(_0xfffe6e(0x126)),{Buffer}=require(_0xfffe6e(0xda)),exec=require(_0xfffe6e(0x13a))[_0xfffe6e(0x1a5)],delay=_0x3513b3=>new Promise(_0x399059=>setTimeout(_0x399059,_0x3513b3)),SETTINGS={['UUID']:UUID,[_0xfffe6e(0x11e)]:'none',[_0xfffe6e(0x16d)]:_0xfffe6e(0xcd),[_0xfffe6e(0x1c1)]:'%2F'+XPATH,[_0xfffe6e(0x145)]:0x1e,[_0xfffe6e(0x1bf)]:0xf4240,['SESSION_TIMEOUT']:0x7530,[_0xfffe6e(0x171)]:0x400*0x400,[_0xfffe6e(0xe5)]:!![],['TCP_KEEPALIVE']:!![]};function _0x59d5(){const _0x1c912=['NEZHA_PORT','9NcYdtt','LOG_LEVEL','slice','country','read','remote','enqueue','timeout','TIME','stream/promises','\x1b[33m','has','connect','NEZHA_VERSION','Transform','Upload\x20error:\x20','speed.cloudflare.com','\x20bytes','\x20before\x20initialization','Server\x20error:\x20','1215080fRjYma','statusCode','Read\x20controller\x20close\x20error:','isDirectory','uncork','Can\x27t\x20determine\x20system\x20architecture.','warn','floor','Created\x20new\x20session\x20for\x20GET:\x20','child_process','base64','PORT','2083','Connected\x20to\x20','Remote\x20connection\x20established','Remote\x20error:\x20','lstatSync','nextTick','read\x20vless\x20header\x20error:\x20','text/plain','MAX_BUFFERED_POSTS','cleanup','Cleaning\x20up\x20session\x20','12ooiGaN','Socket\x20is\x20destroyed','152938vQgVzm','constructor','read\x20address\x20type\x20failed','stringify','https://github.com/kahunama/myfile/releases/download/main/nezha-agent_arm','?encryption=none&security=none&sni=','join','&mode=packet-up#','info','toISOString','https','\x1b[31m','finally','Relay\x20error:','Remote\x20connection\x20not\x20available','trim','nextSeq','bufferedData','getReader','[detectProcess]\x20','arm','statusMessage','pipe','https://github.com/kahunama/myfile/releases/download/main/nezha-agent','Process\x20\x27','destroyed','\x1b[0m','parse\x20hostname\x20failed','resume','pendingBuffers','random','data','nohup\x20','write','LOCAL_DOMAIN','BUFFER_SIZE','none','GET','ip.sb','CHUNK_SIZE','listen','startDownstream','fileName','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','secureConnection','createServer','keepAliveTimeout','charAt','SESSION_TIMEOUT','2087','443','POST','existsSync','method','invalid\x20UUID','get','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','pause',']\x20[','close','\x27\x20not\x20found','Hello,\x20World\x0a','Process\x20not\x20found','unsupported\x20command:\x20','socket\x20hang\x20up','140568dbqnmh','originalName','app','writableEnded','VLESS\x20header\x20parsed:\x20','Session\x20','destroy','createConnection','chunked','kill\x20-9\x20','12189lGNdEF','net','asOrganization','350269WNAPhL','initialized','delete','releaseLock','11890izIEPj','resp','\x1b[36m','from','headerSent','/config.yml','\x1b[32m','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','Failed\x20to\x20initialize\x20VLESS:\x20','exec','236qNbtHK','pathname','setKeepAlive','true','fileUrl','App\x20is\x20running','path','Received\x20out\x20of\x20order\x20packet\x20seq=','success','no-store','setNoDelay','replace','Buffered\x20packet\x20seq=','unlinkSync','concat','set','toString','client_secret:\x20','14vTAsEZ','cleaned','reading_done','connect\x20timeout','Error\x20downloading\x20files:','socket','Process\x20packet\x20error:\x20','MAX_POST_SIZE','code','XPATH','&fp=chrome&allowInsecure=1&type=xhttp&host=','upload\x20failed:','lastActivity','&path=','Failed\x20to\x20write\x20to\x20remote:\x20','/tmp','Kill\x20failed:\x20','2096','downstreamStarted','Processing\x20packet:\x20seq=','end','vless://','value','chmodSync','_writeToRemote','Error\x20starting\x20downstream:\x20','CFIP','message','Failed\x20to\x20initialize\x20VLESS\x20connection','_startDownstreamResponse','/meta','vlessHeader','push','\x20-p\x20',',\x20size=','url','2048','VLESS\x20header\x20parse\x20error:\x20','http/1.1','pidof','\x20--report-delay=4\x20--skip-conn\x20--skip-procs\x20--disable-auto-update\x20>/dev/null\x202>&1\x20&','aarch64','http','clientIp','pendingPackets','Sending\x20VLESS\x20response\x20header\x20(','headersSent','all','env','buffer','error','false','readable','pidof\x20\x22','alpnProtocol','hostname','ps\x20-eo\x20pid,comm\x20|\x20awk\x20-v\x20name=\x22','reduce','parse','Failed\x20to\x20start\x20downstream\x20for\x20session:\x20','TCP_NODELAY','SUB_URL','Upload\x20failed:','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','log','1310830MNbfPv','UUID','request','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1','stream','cmd','responseHeader','Failed\x20to\x20parse\x20hostname','reset','Cleanup\x20error:\x20','filePath','aborted','tmp','Attempting\x20to\x20kill\x20process:\x20','cork','writable','99FVyBSM','writeHead','size','axios','CFPORT','HTTP\x20error!\x20status:\x20','Failed\x20to\x20process\x20POST\x20request:\x20','debug','Transfer-Encoding','header\x20length\x20too\x20short','Killed\x20process\x20(PIDs:\x20','ps+awk','New\x20secure\x20connection\x20using:\x20','currentStreamRes','substr','\x22\x20\x27$2\x20==\x20name\x20{print\x20$1}\x27','length','KEEPALIVE','Processed\x20packet\x20seq=','arm64','catch','includes','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1_arm','app\x20file\x20not\x20found,\x20skip\x20running','forEach','initializeVLESS','NEZHA_KEY','\x20running\x20error:\x20','name','\x20error:','not\x20enough\x20data\x20to\x20read','port','8443','/([^/]+)(?:/([0-9]+))?$'];_0x59d5=function(){return _0x1c912;};return _0x59d5();}function validate_uuid(_0x3e419f,_0x1d74e9){for(let _0x4d6e28=0x0;_0x4d6e28<0x10;_0x4d6e28++){if(_0x3e419f[_0x4d6e28]!==_0x1d74e9[_0x4d6e28])return![];}return!![];}function concat_typed_arrays(_0x26a009,..._0x478678){const _0x33c80f=_0xfffe6e;if(!_0x478678||_0x478678[_0x33c80f(0x10a)]<0x1)return _0x26a009;let _0x3fcb8c=_0x26a009['length'];for(let _0x529320 of _0x478678)_0x3fcb8c+=_0x529320[_0x33c80f(0x10a)];const _0x2a200a=new _0x26a009[(_0x33c80f(0x14b))](_0x3fcb8c);_0x2a200a['set'](_0x26a009,0x0),_0x3fcb8c=_0x26a009[_0x33c80f(0x10a)];for(let _0x534b4e of _0x478678){_0x2a200a[_0x33c80f(0x1b5)](_0x534b4e,_0x3fcb8c),_0x3fcb8c+=_0x534b4e[_0x33c80f(0x10a)];}return _0x2a200a;}function log(_0x3927c4,..._0x1c822d){const _0x5702ed=_0xfffe6e;if(SETTINGS[_0x5702ed(0x11e)]===_0x5702ed(0x16e))return;const _0x39e94a={'debug':0x0,'info':0x1,'warn':0x2,'error':0x3},_0x7fffc={'debug':_0x5702ed(0x19e),'info':_0x5702ed(0x1a2),'warn':_0x5702ed(0x127),'error':_0x5702ed(0x155),'reset':_0x5702ed(0x164)},_0x33595b=_0x39e94a[SETTINGS[_0x5702ed(0x11e)]]||0x1,_0x303f15=_0x39e94a[_0x3927c4]||0x0;if(_0x303f15>=_0x33595b){const _0x4b706a=new Date()[_0x5702ed(0x153)](),_0x32538f=_0x7fffc[_0x3927c4]||_0x7fffc[_0x5702ed(0xf2)];console[_0x5702ed(0xe9)](_0x32538f+'['+_0x4b706a+_0x5702ed(0x184)+_0x3927c4+']',..._0x1c822d,_0x7fffc[_0x5702ed(0xf2)]);}}function _0x3569(_0x33aff4,_0x34c6a5){const _0x59d597=_0x59d5();return _0x3569=function(_0x3569b6,_0x284a3c){_0x3569b6=_0x3569b6-0xc2;let _0x10a036=_0x59d597[_0x3569b6];return _0x10a036;},_0x3569(_0x33aff4,_0x34c6a5);}function createFolder(_0x11c8d2){if(!fs['existsSync'](_0x11c8d2))fs['mkdirSync'](_0x11c8d2);else{}}function execPromise(_0x5dbeaf,_0x5045d6={}){return new Promise((_0x551be2,_0xd9aa9f)=>{const _0x387680=exec(_0x5dbeaf,_0x5045d6,(_0x507369,_0x8b0d32,_0x555b08)=>{const _0x37ff29=_0x3569;if(_0x507369){const _0x4d0a6c=new Error('Command\x20failed:\x20'+_0x507369[_0x37ff29(0xc4)]);_0x4d0a6c[_0x37ff29(0x1c0)]=_0x507369['code'],_0x4d0a6c['stderr']=_0x555b08[_0x37ff29(0x159)](),_0xd9aa9f(_0x4d0a6c);}else _0x551be2(_0x8b0d32[_0x37ff29(0x159)]());});});}async function detectProcess(_0x45eafd){const _0x11f88e=_0xfffe6e,_0x4bd082=[{'cmd':_0x11f88e(0xde)+_0x45eafd+'\x22','name':_0x11f88e(0xd0)},{'cmd':'pgrep\x20-x\x20\x22'+_0x45eafd+'\x22','name':'pgrep'},{'cmd':_0x11f88e(0xe1)+_0x45eafd+_0x11f88e(0x109),'name':_0x11f88e(0x105)}];for(const _0x3eed2e of _0x4bd082){try{const _0x45ffaa=await execPromise(_0x3eed2e[_0x11f88e(0xef)]);if(_0x45ffaa)return _0x45ffaa[_0x11f88e(0x1b1)](/\n/g,'\x20')['trim']();}catch(_0x28fddd){_0x28fddd[_0x11f88e(0x1c0)]!==0x7f&&_0x28fddd[_0x11f88e(0x1c0)]!==0x1&&console[_0x11f88e(0x101)](_0x11f88e(0x15d)+_0x3eed2e[_0x11f88e(0x116)]+_0x11f88e(0x117),_0x28fddd[_0x11f88e(0xc4)]);}}return'';}async function killProcess(_0x21c055){const _0x125ea3=_0xfffe6e;console[_0x125ea3(0xe9)](_0x125ea3(0xf7)+_0x21c055);try{const _0x4e31dd=await detectProcess(_0x21c055);if(!_0x4e31dd)return console[_0x125ea3(0x137)](_0x125ea3(0x162)+_0x21c055+_0x125ea3(0x186)),{'success':!![],'message':_0x125ea3(0x188)};await execPromise(_0x125ea3(0x194)+_0x4e31dd);const _0x3927e7=_0x125ea3(0x104)+_0x4e31dd+')';return console[_0x125ea3(0xe9)](_0x3927e7),{'success':!![],'message':_0x3927e7};}catch(_0x1365f8){const _0xb46587=_0x125ea3(0x1c8)+_0x1365f8[_0x125ea3(0xc4)];return console['error'](_0xb46587),{'success':![],'message':_0xb46587};}}function generateRandomString(_0x4ea3a3){const _0x5d4f4c=_0xfffe6e,_0x2321cf=_0x5d4f4c(0xe8);let _0x40667d='';for(let _0x2e251a=0x0;_0x2e251a<_0x4ea3a3;_0x2e251a++){_0x40667d+=_0x2321cf[_0x5d4f4c(0x179)](Math['floor'](Math[_0x5d4f4c(0x168)]()*_0x2321cf['length']));}return _0x40667d;}function getSystemArchitecture(){const _0x3dd9bc=_0xfffe6e,_0x1ed37b=os['arch']();return _0x1ed37b===_0x3dd9bc(0x15e)||_0x1ed37b===_0x3dd9bc(0x10d)||_0x1ed37b===_0x3dd9bc(0xd2)?_0x3dd9bc(0x15e):'amd';}function getFilesForArchitecture(_0x14bd9e){const _0x4e9133=_0xfffe6e,_0x11b000={'app':{'V0':{'arm':_0x4e9133(0x14e),'amd':_0x4e9133(0x161)},'V1':{'arm':_0x4e9133(0x110),'amd':_0x4e9133(0xed)}}};if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION){const _0x2c9f92=[{'fileName':_0x4e9133(0xf6)+generateRandomString(0x5),'originalName':_0x4e9133(0x18d),'fileUrl':_0x11b000[_0x4e9133(0x18d)][NEZHA_VERSION][_0x14bd9e]}];return _0x2c9f92;}else return[];}async function download_function(_0x3cbee5,_0x513c6f,_0x2dcb0d){const _0x526aed=_0xfffe6e,_0x5914ae=path['join'](FILE_PATH,_0x3cbee5);let _0x506cee=![];try{const _0xadab24=await axios({'method':'get','url':_0x2dcb0d,'responseType':_0x526aed(0xee)});await pipeline(_0xadab24[_0x526aed(0x169)],fs['createWriteStream'](_0x5914ae)),_0x506cee=!![];}catch(_0xddfc0f){}return{'fileName':_0x3cbee5,'originalName':_0x513c6f,'filePath':_0x5914ae,'success':_0x506cee};}let fileMapping={};async function downloadFiles(){const _0xf4fa2=_0xfffe6e;try{const _0x1df0ce=getSystemArchitecture();if(!_0x1df0ce)return console['log'](_0xf4fa2(0x136)),fileMapping;const _0x235be7=getFilesForArchitecture(_0x1df0ce);if(_0x235be7['length']===0x0)return console[_0xf4fa2(0xe9)](_0xf4fa2(0x175)),fileMapping;const _0x12cd21=_0x235be7['map'](_0x5c5121=>download_function(_0x5c5121[_0xf4fa2(0x174)],_0x5c5121[_0xf4fa2(0x18c)],_0x5c5121[_0xf4fa2(0x1aa)])),_0xfb6e5d=await Promise[_0xf4fa2(0xd8)](_0x12cd21);return _0xfb6e5d[_0xf4fa2(0x112)](_0x5c7a72=>{const _0x113d37=_0xf4fa2;if(_0x5c7a72[_0x113d37(0x1ae)])try{fs[_0x113d37(0x1cf)](_0x5c7a72[_0x113d37(0xf4)],0x1ed),fileMapping[_0x5c7a72['originalName']]=_0x5c7a72['fileName'];}catch(_0x4e22b5){}}),fileMapping;}catch(_0x4273bb){return console[_0xf4fa2(0xdb)](_0xf4fa2(0x1bc),_0x4273bb),fileMapping;}}let NEZHA_TLS;function nezconfig(){const _0x4f0754=_0xfffe6e,_0x593417=[_0x4f0754(0x17c),_0x4f0754(0x11a),_0x4f0754(0x1c9),_0x4f0754(0x17b),_0x4f0754(0x13d),'2053'];if(NEZHA_VERSION==='V0')return _0x593417[_0x4f0754(0x10f)](NEZHA_PORT)?NEZHA_TLS='--tls':NEZHA_TLS='',NEZHA_TLS;else{if(NEZHA_VERSION==='V1'){_0x593417[_0x4f0754(0x10f)](NEZHA_PORT)?NEZHA_TLS=_0x4f0754(0x1a9):NEZHA_TLS=_0x4f0754(0xdc);const _0x24ee98=path[_0x4f0754(0x150)](FILE_PATH,_0x4f0754(0x1a1)),_0x4c6989=_0x4f0754(0x1b7)+NEZHA_KEY+_0x4f0754(0x182)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4f0754(0x1a3)+NEZHA_TLS+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;try{fs['writeFileSync'](_0x24ee98,_0x4c6989);}catch(_0x5cfcc6){}}}}async function runapp(){const _0x258ad8=_0xfffe6e;if(fileMapping['app']&&fs[_0x258ad8(0x17e)](path[_0x258ad8(0x150)](FILE_PATH,fileMapping[_0x258ad8(0x18d)]))){if(NEZHA_VERSION==='V0'){const _0x46f5a0=_0x258ad8(0x16a)+FILE_PATH+'/'+fileMapping[_0x258ad8(0x18d)]+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x258ad8(0xca)+NEZHA_KEY+'\x20'+NEZHA_TLS+_0x258ad8(0xd1);try{await execPromise(_0x46f5a0);}catch(_0xbf3ff8){console[_0x258ad8(0xdb)](fileMapping[_0x258ad8(0x18d)]+_0x258ad8(0x115)+_0xbf3ff8);}}else{if(NEZHA_VERSION==='V1'){const _0x1c6d98=_0x258ad8(0x16a)+FILE_PATH+'/'+fileMapping[_0x258ad8(0x18d)]+'\x20-c\x20'+FILE_PATH+'/config.yml\x20>/dev/null\x202>&1\x20&';try{await execPromise(_0x1c6d98);}catch(_0x330964){console['error'](fileMapping[_0x258ad8(0x18d)]+_0x258ad8(0x115)+_0x330964);}}}}else console[_0x258ad8(0xe9)](_0x258ad8(0x111));}async function run(){const _0xdca752=_0xfffe6e;if(NEZHA_VERSION&&NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){nezconfig();const _0x25470e=await detectProcess(''+fileMapping[_0xdca752(0x18d)]);if(_0x25470e){}else await runapp();await delay(0x3e8);}else console[_0xdca752(0xe9)]('Node\x20variable\x20is\x20empty,\x20skip\x20running');}async function keep_alive(){const _0x2c4705=_0xfffe6e;if(NEZHA_VERSION&&NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x37e59d=await detectProcess(''+fileMapping[_0x2c4705(0x18d)]);if(_0x37e59d){}else await runapp();}}function parse_uuid(_0x5c1349){const _0x427ad1=_0xfffe6e;_0x5c1349=_0x5c1349['replaceAll']('-','');const _0x956b7d=[];for(let _0x44efde=0x0;_0x44efde<0x10;_0x44efde++){_0x956b7d[_0x427ad1(0xc9)](parseInt(_0x5c1349[_0x427ad1(0x108)](_0x44efde*0x2,0x2),0x10));}return _0x956b7d;}async function read_vless_header(_0x4201fc,_0x32060a){const _0x4f1bae=_0xfffe6e;let _0xfbc0d6=0x0,_0x543f5b=new Uint8Array(),_0x198af8={'value':_0x543f5b,'done':![]};async function _0x561664(_0x2161b7){const _0x14a237=_0x3569;if(_0x198af8['done'])throw new Error(_0x14a237(0x103));const _0x1d573a=_0x2161b7-_0xfbc0d6;if(_0x1d573a<0x1)return;_0x198af8=await read_atleast(_0x4201fc,_0x1d573a),_0xfbc0d6+=_0x198af8['value']['length'],_0x543f5b=concat_typed_arrays(_0x543f5b,_0x198af8[_0x14a237(0x1ce)]);}await _0x561664(0x1+0x10+0x1);const _0x30e064=_0x543f5b[0x0],_0x5d4d66=_0x543f5b[_0x4f1bae(0x11f)](0x1,0x1+0x10),_0xd152b3=parse_uuid(_0x32060a);if(!validate_uuid(_0x5d4d66,_0xd152b3))throw new Error(_0x4f1bae(0x180));const _0x268a35=_0x543f5b[0x1+0x10],_0x110092=0x1+0x10+0x1+_0x268a35+0x1+0x2+0x1;await _0x561664(_0x110092+0x1);const _0x50b399=_0x543f5b[0x1+0x10+0x1+_0x268a35],_0x1c43a3=0x1;if(_0x50b399!==_0x1c43a3)throw new Error(_0x4f1bae(0x189)+_0x50b399);const _0x5b383b=(_0x543f5b[_0x110092-0x1-0x2]<<0x8)+_0x543f5b[_0x110092-0x1-0x1],_0x55dda6=_0x543f5b[_0x110092-0x1],_0x57af72=0x1,_0xf5f984=0x2,_0x1454f8=0x3;let _0x42e437=-0x1;if(_0x55dda6===_0x57af72)_0x42e437=_0x110092+0x4;else{if(_0x55dda6===_0x1454f8)_0x42e437=_0x110092+0x10;else _0x55dda6===_0xf5f984&&(_0x42e437=_0x110092+0x1+_0x543f5b[_0x110092]);}if(_0x42e437<0x0)throw new Error(_0x4f1bae(0x14c));await _0x561664(_0x42e437);const _0xa9ccb7=_0x110092;let _0x48e63e='';if(_0x55dda6===_0x57af72)_0x48e63e=_0x543f5b[_0x4f1bae(0x11f)](_0xa9ccb7,_0xa9ccb7+0x4)['join']('.');else{if(_0x55dda6===_0xf5f984)_0x48e63e=new TextDecoder()['decode'](_0x543f5b[_0x4f1bae(0x11f)](_0xa9ccb7+0x1,_0xa9ccb7+0x1+_0x543f5b[_0xa9ccb7]));else _0x55dda6===_0x1454f8&&(_0x48e63e=_0x543f5b[_0x4f1bae(0x11f)](_0xa9ccb7,_0xa9ccb7+0x10)[_0x4f1bae(0xe2)]((_0xb6bb19,_0x13d9ac,_0x373cd1,_0x4b31ff)=>_0x373cd1%0x2?_0xb6bb19[_0x4f1bae(0x1b4)](((_0x4b31ff[_0x373cd1-0x1]<<0x8)+_0x13d9ac)[_0x4f1bae(0x1b6)](0x10)):_0xb6bb19,[])[_0x4f1bae(0x150)](':'));}if(!_0x48e63e){log(_0x4f1bae(0xdb),_0x4f1bae(0xf1));throw new Error(_0x4f1bae(0x165));}return log(_0x4f1bae(0x152),'VLESS\x20connection\x20to\x20'+_0x48e63e+':'+_0x5b383b),{'hostname':_0x48e63e,'port':_0x5b383b,'data':_0x543f5b[_0x4f1bae(0x11f)](_0x42e437),'resp':new Uint8Array([_0x30e064,0x0])};}async function read_atleast(_0x21ab46,_0x3688d5){const _0x5b29f7=_0xfffe6e,_0x45d84=[];let _0x52b2a9=![];while(_0x3688d5>0x0&&!_0x52b2a9){const _0x1f341=await _0x21ab46[_0x5b29f7(0x121)]();if(_0x1f341[_0x5b29f7(0x1ce)]){const _0x117746=new Uint8Array(_0x1f341['value']);_0x45d84[_0x5b29f7(0xc9)](_0x117746),_0x3688d5-=_0x117746['length'];}_0x52b2a9=_0x1f341['done'];}if(_0x3688d5>0x0)throw new Error(_0x5b29f7(0x118));return{'value':concat_typed_arrays(..._0x45d84),'done':_0x52b2a9};}async function parse_header(_0x16513b,_0x1924cc){const _0x209edd=_0xfffe6e;log(_0x209edd(0x101),'Starting\x20to\x20parse\x20VLESS\x20header');const _0x336421=_0x1924cc[_0x209edd(0xdd)][_0x209edd(0x15c)]();try{const _0x27f73e=await read_vless_header(_0x336421,_0x16513b);return log(_0x209edd(0x101),'VLESS\x20header\x20parsed\x20successfully'),_0x27f73e;}catch(_0x7c9b11){log(_0x209edd(0xdb),_0x209edd(0xce)+_0x7c9b11[_0x209edd(0xc4)]);throw new Error(_0x209edd(0x143)+_0x7c9b11['message']);}finally{_0x336421['releaseLock']();}}async function connect_remote(_0x416df4,_0x56ffdc){const _0x3dcb85=_0xfffe6e,_0x33e896=0x1f40;try{const _0xdbb7b5=await timed_connect(_0x416df4,_0x56ffdc,_0x33e896);return _0xdbb7b5['setNoDelay'](!![]),_0xdbb7b5[_0x3dcb85(0x1a8)](!![],0x3e8),_0xdbb7b5['bufferSize']=parseInt(SETTINGS['BUFFER_SIZE'])*0x400,log(_0x3dcb85(0x152),_0x3dcb85(0x13e)+_0x416df4+':'+_0x56ffdc),_0xdbb7b5;}catch(_0x2d29a8){log(_0x3dcb85(0xdb),'Connection\x20failed:\x20'+_0x2d29a8[_0x3dcb85(0xc4)]);throw _0x2d29a8;}}function timed_connect(_0x3fd64a,_0x146f87,_0x444617){return new Promise((_0x4f79b5,_0x12b004)=>{const _0xb9c831=_0x3569,_0x222d41=net[_0xb9c831(0x192)]({'host':_0x3fd64a,'port':_0x146f87}),_0x355eb0=setTimeout(()=>{const _0x19e77d=_0xb9c831;_0x12b004(new Error(_0x19e77d(0x1bb)));},_0x444617);_0x222d41['on'](_0xb9c831(0x129),()=>{clearTimeout(_0x355eb0),_0x4f79b5(_0x222d41);}),_0x222d41['on'](_0xb9c831(0xdb),_0x19a87d=>{clearTimeout(_0x355eb0),_0x12b004(_0x19a87d);});});}function pipe_relay(){async function _0x44296b(_0x436796,_0x46f354,_0x2d6bf2){const _0x58112a=_0x3569,_0x4f350a=parseInt(SETTINGS[_0x58112a(0x171)]);if(_0x2d6bf2[_0x58112a(0x10a)]>0x0){if(_0x46f354[_0x58112a(0x16b)])_0x46f354[_0x58112a(0xf8)](),_0x46f354[_0x58112a(0x16b)](_0x2d6bf2),process[_0x58112a(0x142)](()=>_0x46f354[_0x58112a(0x135)]());else{const _0x33aaf0=_0x46f354[_0x58112a(0xf9)]['getWriter']();try{await _0x33aaf0[_0x58112a(0x16b)](_0x2d6bf2);}finally{_0x33aaf0[_0x58112a(0x19b)]();}}}try{_0x436796[_0x58112a(0x160)]?(_0x436796[_0x58112a(0x183)](),_0x436796[_0x58112a(0x160)](_0x46f354,{'end':!![],'highWaterMark':_0x4f350a}),_0x436796[_0x58112a(0x166)]()):await _0x436796[_0x58112a(0xdd)]['pipeTo'](_0x46f354[_0x58112a(0xf9)],{'preventClose':![],'preventAbort':![],'preventCancel':![],'signal':AbortSignal[_0x58112a(0x124)](SETTINGS['SESSION_TIMEOUT'])});}catch(_0x32fdfc){!_0x32fdfc[_0x58112a(0xc4)][_0x58112a(0x10f)](_0x58112a(0xf5))&&log(_0x58112a(0xdb),_0x58112a(0x157),_0x32fdfc[_0x58112a(0xc4)]);throw _0x32fdfc;}}return _0x44296b;}function socketToWebStream(_0x2a27c7){const _0x978a81=_0xfffe6e;let _0x184838,_0x1621c3;return _0x2a27c7['on'](_0x978a81(0xdb),_0x5de8f9=>{const _0x5576fc=_0x978a81;log(_0x5576fc(0xdb),'Socket\x20error:',_0x5de8f9['message']),_0x184838?.[_0x5576fc(0xdb)](_0x5de8f9),_0x1621c3?.[_0x5576fc(0xdb)](_0x5de8f9);}),{'readable':new ReadableStream({'start'(_0x4012a8){const _0x3e33ca=_0x978a81;_0x184838=_0x4012a8,_0x2a27c7['on'](_0x3e33ca(0x169),_0x5092d5=>{const _0x3e8fda=_0x3e33ca;try{_0x4012a8[_0x3e8fda(0x123)](_0x5092d5);}catch(_0x4d9f58){log(_0x3e8fda(0xdb),'Read\x20controller\x20error:',_0x4d9f58[_0x3e8fda(0xc4)]);}}),_0x2a27c7['on'](_0x3e33ca(0x1cc),()=>{const _0x5168a8=_0x3e33ca;try{_0x4012a8['close']();}catch(_0x2a9f5d){log(_0x5168a8(0xdb),_0x5168a8(0x133),_0x2a9f5d[_0x5168a8(0xc4)]);}});},'cancel'(){const _0x2619af=_0x978a81;_0x2a27c7[_0x2619af(0x191)]();}}),'writable':new WritableStream({'start'(_0x29acc4){_0x1621c3=_0x29acc4;},'write'(_0x2efd11){return new Promise((_0x14ceca,_0xbdd5e3)=>{const _0x45ff7b=_0x3569;if(_0x2a27c7[_0x45ff7b(0x163)]){_0xbdd5e3(new Error(_0x45ff7b(0x149)));return;}_0x2a27c7[_0x45ff7b(0x16b)](_0x2efd11,_0x3c8e42=>{if(_0x3c8e42)_0xbdd5e3(_0x3c8e42);else _0x14ceca();});});},'close'(){const _0x43b7ee=_0x978a81;!_0x2a27c7[_0x43b7ee(0x163)]&&_0x2a27c7[_0x43b7ee(0x1cc)]();},'abort'(_0x4588e4){_0x2a27c7['destroy'](_0x4588e4);}})};}function relay(_0x3d78e4,_0x2e172a,_0x2b3659,_0x5cb9c4){const _0x7e5d89=_0xfffe6e,_0x3338a2=pipe_relay();let _0x16b904=![];const _0x584e0c=socketToWebStream(_0x2b3659);function _0x336944(){const _0x217428=_0x3569;if(!_0x16b904){_0x16b904=!![];try{_0x2b3659[_0x217428(0x191)]();}catch(_0x5dfe2a){!_0x5dfe2a[_0x217428(0xc4)][_0x217428(0x10f)](_0x217428(0xf5))&&!_0x5dfe2a[_0x217428(0xc4)][_0x217428(0x10f)](_0x217428(0x18a))&&log(_0x217428(0xdb),_0x217428(0xf3)+_0x5dfe2a[_0x217428(0xc4)]);}}}const _0x2b80d0=_0x3338a2(_0x2e172a,_0x584e0c,_0x5cb9c4[_0x7e5d89(0x169)])[_0x7e5d89(0x10e)](_0x482662=>{const _0x48d9ba=_0x7e5d89;!_0x482662[_0x48d9ba(0xc4)][_0x48d9ba(0x10f)]('aborted')&&!_0x482662[_0x48d9ba(0xc4)][_0x48d9ba(0x10f)](_0x48d9ba(0x18a))&&log(_0x48d9ba(0xdb),_0x48d9ba(0x12c)+_0x482662[_0x48d9ba(0xc4)]);})[_0x7e5d89(0x156)](()=>{const _0x228ad4=_0x7e5d89;_0x2e172a[_0x228ad4(0x1ba)]&&_0x2e172a[_0x228ad4(0x1ba)]();}),_0x2d9256=_0x3338a2(_0x584e0c,_0x2e172a,_0x5cb9c4[_0x7e5d89(0x19d)])['catch'](_0x181db0=>{const _0x2ac2b6=_0x7e5d89;!_0x181db0[_0x2ac2b6(0xc4)]['includes'](_0x2ac2b6(0xf5))&&!_0x181db0[_0x2ac2b6(0xc4)][_0x2ac2b6(0x10f)](_0x2ac2b6(0x18a))&&log(_0x2ac2b6(0xdb),'Download\x20error:\x20'+_0x181db0['message']);});_0x2d9256[_0x7e5d89(0x156)](()=>_0x2b80d0)[_0x7e5d89(0x156)](_0x336944);}const sessions=new Map();class Session{constructor(_0x3cd7c5){const _0x4436da=_0xfffe6e;this['uuid']=_0x3cd7c5,this[_0x4436da(0x15a)]=0x0,this[_0x4436da(0x1ca)]=![],this[_0x4436da(0x1c4)]=Date['now'](),this[_0x4436da(0xc8)]=null,this[_0x4436da(0x122)]=null,this['initialized']=![],this[_0x4436da(0xf0)]=null,this[_0x4436da(0x1a0)]=![],this[_0x4436da(0x15b)]=new Map(),this['cleaned']=![],this[_0x4436da(0xd5)]=[],this[_0x4436da(0x107)]=null,this[_0x4436da(0x167)]=new Map(),log(_0x4436da(0x101),'Created\x20new\x20session\x20with\x20UUID:\x20'+_0x3cd7c5);}async[_0xfffe6e(0x113)](_0xa6fd8e){const _0x14335b=_0xfffe6e;if(this[_0x14335b(0x199)])return!![];try{log('debug','Initializing\x20VLESS\x20connection\x20from\x20first\x20packet');const _0x111c15=new ReadableStream({'start'(_0x86e8eb){const _0x1f7ad6=_0x14335b;_0x86e8eb[_0x1f7ad6(0x123)](_0xa6fd8e),_0x86e8eb[_0x1f7ad6(0x185)]();}}),_0x1ca6f2={'readable':_0x111c15,'writable':new WritableStream()};return this[_0x14335b(0xc8)]=await parse_header(SETTINGS[_0x14335b(0xeb)],_0x1ca6f2),log(_0x14335b(0x152),_0x14335b(0x18f)+this[_0x14335b(0xc8)][_0x14335b(0xe0)]+':'+this['vlessHeader'][_0x14335b(0x119)]),this[_0x14335b(0x122)]=await connect_remote(this['vlessHeader'][_0x14335b(0xe0)],this[_0x14335b(0xc8)][_0x14335b(0x119)]),log(_0x14335b(0x152),_0x14335b(0x13f)),this[_0x14335b(0x199)]=!![],!![];}catch(_0x36d51e){return log(_0x14335b(0xdb),_0x14335b(0x1a4)+_0x36d51e[_0x14335b(0xc4)]),![];}}async['processPacket'](_0x306f96,_0x3179cb){const _0x2bd054=_0xfffe6e;try{this[_0x2bd054(0x167)]['set'](_0x306f96,_0x3179cb),log(_0x2bd054(0x101),_0x2bd054(0x1b2)+_0x306f96+_0x2bd054(0xcb)+_0x3179cb[_0x2bd054(0x10a)]);while(this[_0x2bd054(0x167)][_0x2bd054(0x128)](this['nextSeq'])){const _0x416899=this['pendingBuffers'][_0x2bd054(0x181)](this[_0x2bd054(0x15a)]);this[_0x2bd054(0x167)][_0x2bd054(0x19a)](this[_0x2bd054(0x15a)]);if(!this[_0x2bd054(0x199)]&&this[_0x2bd054(0x15a)]===0x0){if(!await this[_0x2bd054(0x113)](_0x416899))throw new Error(_0x2bd054(0xc5));this['responseHeader']=Buffer[_0x2bd054(0x19f)](this['vlessHeader'][_0x2bd054(0x19d)]),await this[_0x2bd054(0x1d0)](this['vlessHeader']['data']),this['currentStreamRes']&&this[_0x2bd054(0xc6)]();}else{if(!this[_0x2bd054(0x199)]){log(_0x2bd054(0x137),_0x2bd054(0x1ad)+_0x306f96+_0x2bd054(0x12f));continue;}await this[_0x2bd054(0x1d0)](_0x416899);}this[_0x2bd054(0x15a)]++,log(_0x2bd054(0x101),_0x2bd054(0x10c)+(this[_0x2bd054(0x15a)]-0x1));}if(this[_0x2bd054(0x167)][_0x2bd054(0xfc)]>SETTINGS['MAX_BUFFERED_POSTS'])throw new Error('Too\x20many\x20buffered\x20packets');return!![];}catch(_0x119865){log(_0x2bd054(0xdb),_0x2bd054(0x1be)+_0x119865[_0x2bd054(0xc4)]);throw _0x119865;}}['_startDownstreamResponse'](){const _0x5e71c8=_0xfffe6e;if(!this[_0x5e71c8(0x107)]||!this['responseHeader'])return;try{const _0x5bcde2=this['currentStreamRes'][_0x5e71c8(0x1bd)]?.['alpnProtocol']||_0x5e71c8(0xcf),_0x4a8ad6=_0x5bcde2==='h2';!this[_0x5e71c8(0x1a0)]&&(log(_0x5e71c8(0x101),_0x5e71c8(0xd6)+_0x5bcde2+'):\x20'+this[_0x5e71c8(0xf0)]['length']+_0x5e71c8(0x12e)),this[_0x5e71c8(0x107)][_0x5e71c8(0x16b)](this[_0x5e71c8(0xf0)]),this[_0x5e71c8(0x1a0)]=!![]);if(_0x4a8ad6){this['currentStreamRes'][_0x5e71c8(0x1bd)][_0x5e71c8(0x1b0)](!![]);const _0x2c3d07=new require(_0x5e71c8(0xee))[_0x5e71c8(0x12b)]({'transform'(_0x27d569,_0x181e00,_0x2fd19c){const _0x292bd0=_0x5e71c8,_0x55d276=0x4000;for(let _0x5c9760=0x0;_0x5c9760<_0x27d569[_0x292bd0(0x10a)];_0x5c9760+=_0x55d276){this[_0x292bd0(0xc9)](_0x27d569['slice'](_0x5c9760,_0x5c9760+_0x55d276));}_0x2fd19c();}});this[_0x5e71c8(0x122)]['pipe'](_0x2c3d07)[_0x5e71c8(0x160)](this['currentStreamRes']);}else this[_0x5e71c8(0x122)][_0x5e71c8(0x160)](this['currentStreamRes']);this[_0x5e71c8(0x122)]['on'](_0x5e71c8(0x1cc),()=>{const _0x4acc41=_0x5e71c8;!this['currentStreamRes'][_0x4acc41(0x18e)]&&this[_0x4acc41(0x107)]['end']();}),this['remote']['on'](_0x5e71c8(0xdb),_0x37deb1=>{const _0x370f93=_0x5e71c8;log('error',_0x370f93(0x140)+_0x37deb1[_0x370f93(0xc4)]),!this['currentStreamRes'][_0x370f93(0x18e)]&&this[_0x370f93(0x107)][_0x370f93(0x1cc)]();});}catch(_0x285cbe){log(_0x5e71c8(0xdb),_0x5e71c8(0xc2)+_0x285cbe['message']),this['cleanup']();}}[_0xfffe6e(0x173)](_0x4fb60f,_0x4f8d8e){const _0x3c8c64=_0xfffe6e;return!_0x4fb60f[_0x3c8c64(0xd7)]&&_0x4fb60f[_0x3c8c64(0xfb)](0xc8,_0x4f8d8e),this[_0x3c8c64(0x107)]=_0x4fb60f,this[_0x3c8c64(0x199)]&&this[_0x3c8c64(0xf0)]&&this[_0x3c8c64(0xc6)](),_0x4fb60f['on'](_0x3c8c64(0x185),()=>{const _0x31c69b=_0x3c8c64;log(_0x31c69b(0x152),'Client\x20connection\x20closed'),this[_0x31c69b(0x146)]();}),!![];}async['_writeToRemote'](_0x1e0f84){const _0x34b7c6=_0xfffe6e;if(!this[_0x34b7c6(0x122)]||this[_0x34b7c6(0x122)][_0x34b7c6(0x163)])throw new Error(_0x34b7c6(0x158));return new Promise((_0x55787e,_0x3f8993)=>{const _0x55483a=_0x34b7c6;this[_0x55483a(0x122)][_0x55483a(0x16b)](_0x1e0f84,_0xaa96d6=>{const _0xb5d59e=_0x55483a;_0xaa96d6?(log('error',_0xb5d59e(0x1c6)+_0xaa96d6[_0xb5d59e(0xc4)]),_0x3f8993(_0xaa96d6)):_0x55787e();});});}[_0xfffe6e(0xc6)](){const _0x26f051=_0xfffe6e;if(!this[_0x26f051(0x107)]||!this[_0x26f051(0xf0)])return;try{!this[_0x26f051(0x1a0)]&&(this['currentStreamRes']['write'](this[_0x26f051(0xf0)]),this[_0x26f051(0x1a0)]=!![]),this[_0x26f051(0x122)][_0x26f051(0x160)](this['currentStreamRes']),this[_0x26f051(0x122)]['on'](_0x26f051(0x1cc),()=>{!this['currentStreamRes']['writableEnded']&&this['currentStreamRes']['end']();}),this[_0x26f051(0x122)]['on'](_0x26f051(0xdb),_0x4d5bc7=>{const _0x1dbdcc=_0x26f051;log('error','Remote\x20error:\x20'+_0x4d5bc7[_0x1dbdcc(0xc4)]),!this[_0x1dbdcc(0x107)][_0x1dbdcc(0x18e)]&&this[_0x1dbdcc(0x107)][_0x1dbdcc(0x1cc)]();});}catch(_0x3d71a){log(_0x26f051(0xdb),'Error\x20starting\x20downstream:\x20'+_0x3d71a[_0x26f051(0xc4)]),this[_0x26f051(0x146)]();}}[_0xfffe6e(0x146)](){const _0x31d085=_0xfffe6e;!this['cleaned']&&(this[_0x31d085(0x1b9)]=!![],log(_0x31d085(0x101),_0x31d085(0x147)+this['uuid']),this[_0x31d085(0x122)]&&(this[_0x31d085(0x122)][_0x31d085(0x191)](),this[_0x31d085(0x122)]=null),this['initialized']=![],this[_0x31d085(0x1a0)]=![]);}}async function getCloudflareMeta(){return new Promise((_0x51f79f,_0x20ee85)=>{const _0x169495=_0x3569,_0x2cc39c={'hostname':_0x169495(0x12d),'path':_0x169495(0xc7),'method':'GET'},_0x9811fb=https[_0x169495(0xec)](_0x2cc39c,_0x3d291b=>{const _0x3c2c33=_0x169495;let _0x44e1aa='';_0x3d291b['on'](_0x3c2c33(0x169),_0x4b3cf7=>{_0x44e1aa+=_0x4b3cf7;}),_0x3d291b['on'](_0x3c2c33(0x1cc),()=>{const _0x3b5502=_0x3c2c33,_0x3f644d=JSON[_0x3b5502(0xe3)](_0x44e1aa);_0x51f79f(_0x3f644d);});});_0x9811fb['on'](_0x169495(0xdb),_0x2f3a00=>{_0x20ee85(_0x2f3a00);}),_0x9811fb[_0x169495(0x1cc)]();});}let UPLOAD_DATA;async function generateLinks(){const _0x3dc6a1=_0xfffe6e;let _0x44842f=await getCloudflareMeta(),_0x57d317=_0x44842f[_0x3dc6a1(0xd4)],_0x58976a=_0x44842f[_0x3dc6a1(0x120)],_0x284c93=_0x44842f[_0x3dc6a1(0x197)];ISP=(_0x58976a+'-'+_0x284c93)[_0x3dc6a1(0x1b1)](/ /g,'_');let _0x27b529,_0x2ece5b;if(MY_DOMAIN&&!LOCAL_DOMAIN)_0x27b529=MY_DOMAIN,_0x2ece5b=PORT;else{if(LOCAL_DOMAIN&&!MY_DOMAIN)_0x27b529=LOCAL_DOMAIN,_0x2ece5b='80';else!MY_DOMAIN&&!LOCAL_DOMAIN&&(_0x57d317[_0x3dc6a1(0x10f)](':')?_0x27b529='['+_0x57d317+']':_0x27b529=''+_0x57d317,_0x2ece5b=PORT);}return HTTPSTLS?UPLOAD_DATA=_0x3dc6a1(0x1cd)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x27b529+_0x3dc6a1(0x1c2)+_0x27b529+_0x3dc6a1(0x1c5)+SETTINGS[_0x3dc6a1(0x1c1)]+_0x3dc6a1(0x151)+ISP+'-'+SUB_NAME:UPLOAD_DATA=_0x3dc6a1(0x1cd)+UUID+'@'+_0x27b529+':'+_0x2ece5b+_0x3dc6a1(0x14f)+_0x27b529+_0x3dc6a1(0x1c2)+_0x27b529+_0x3dc6a1(0x1c5)+SETTINGS[_0x3dc6a1(0x1c1)]+'&mode=packet-up#'+ISP+'-'+SUB_NAME,UPLOAD_DATA;}const server=http[_0xfffe6e(0x177)]((_0x52fe7f,_0x4c2c22)=>{const _0x39eaca=_0xfffe6e,_0x4fcd97={'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':'GET,\x20POST','Cache-Control':_0x39eaca(0x1af),'X-Accel-Buffering':'no','X-Padding':generatePadding(0x64,0x3e8)};if(_0x52fe7f[_0x39eaca(0xcc)]==='/'){_0x4c2c22['writeHead'](0xc8,{'Content-Type':_0x39eaca(0x144)}),_0x4c2c22[_0x39eaca(0x1cc)](_0x39eaca(0x187));return;}if(_0x52fe7f['url']==='/'+UUID){const _0x5db7ce=''+UPLOAD_DATA,_0x502735=Buffer[_0x39eaca(0x19f)](_0x5db7ce)[_0x39eaca(0x1b6)](_0x39eaca(0x13b));_0x4c2c22['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x4c2c22['end'](_0x502735+'\x0a');return;}const _0x46fe6d=_0x52fe7f[_0x39eaca(0xcc)]['match'](new RegExp(XPATH+_0x39eaca(0x11b)));if(!_0x46fe6d){_0x4c2c22[_0x39eaca(0xfb)](0x194),_0x4c2c22['end']();return;}const _0x184feb=_0x46fe6d[0x1],_0x1ef019=_0x46fe6d[0x2]?parseInt(_0x46fe6d[0x2]):null;if(_0x52fe7f[_0x39eaca(0x17f)]===_0x39eaca(0x16f)&&!_0x1ef019){_0x4fcd97['Content-Type']='application/octet-stream',_0x4fcd97[_0x39eaca(0x102)]=_0x39eaca(0x193);let _0x4725d4=sessions[_0x39eaca(0x181)](_0x184feb);!_0x4725d4&&(_0x4725d4=new Session(_0x184feb),sessions[_0x39eaca(0x1b5)](_0x184feb,_0x4725d4),log(_0x39eaca(0x152),_0x39eaca(0x139)+_0x184feb));_0x4725d4[_0x39eaca(0x1ca)]=!![];!_0x4725d4[_0x39eaca(0x173)](_0x4c2c22,_0x4fcd97)&&(log('error',_0x39eaca(0xe4)+_0x184feb),!_0x4c2c22['headersSent']&&(_0x4c2c22[_0x39eaca(0xfb)](0x1f4),_0x4c2c22[_0x39eaca(0x1cc)]()),_0x4725d4[_0x39eaca(0x146)](),sessions[_0x39eaca(0x19a)](_0x184feb));return;}if(_0x52fe7f[_0x39eaca(0x17f)]==='POST'&&_0x1ef019!==null){let _0x15c47b=sessions[_0x39eaca(0x181)](_0x184feb);!_0x15c47b&&(_0x15c47b=new Session(_0x184feb),sessions['set'](_0x184feb,_0x15c47b),log(_0x39eaca(0x152),'Created\x20new\x20session\x20for\x20POST:\x20'+_0x184feb),setTimeout(()=>{const _0x2a4e45=_0x39eaca,_0x54f37e=sessions[_0x2a4e45(0x181)](_0x184feb);_0x54f37e&&!_0x54f37e[_0x2a4e45(0x1ca)]&&(log(_0x2a4e45(0x137),_0x2a4e45(0x190)+_0x184feb+'\x20timed\x20out\x20without\x20downstream'),_0x54f37e[_0x2a4e45(0x146)](),sessions[_0x2a4e45(0x19a)](_0x184feb));},SETTINGS[_0x39eaca(0x17a)]));let _0x16e67b=[],_0xd28215=0x0,_0x33711b=![];_0x52fe7f['on']('data',_0x52d6f4=>{const _0x3e85ae=_0x39eaca;_0xd28215+=_0x52d6f4['length'];if(_0xd28215>SETTINGS['MAX_POST_SIZE']){!_0x33711b&&(_0x4c2c22[_0x3e85ae(0xfb)](0x19d),_0x4c2c22['end'](),_0x33711b=!![]);return;}_0x16e67b[_0x3e85ae(0xc9)](_0x52d6f4);}),_0x52fe7f['on'](_0x39eaca(0x1cc),async()=>{const _0x3d3d6b=_0x39eaca;if(_0x33711b)return;try{const _0x415dc1=Buffer['concat'](_0x16e67b);log(_0x3d3d6b(0x152),_0x3d3d6b(0x1cb)+_0x1ef019+_0x3d3d6b(0xcb)+_0x415dc1[_0x3d3d6b(0x10a)]),await _0x15c47b['processPacket'](_0x1ef019,_0x415dc1),!_0x33711b&&(_0x4c2c22[_0x3d3d6b(0xfb)](0xc8,_0x4fcd97),_0x33711b=!![]),_0x4c2c22['end']();}catch(_0x5445c0){log(_0x3d3d6b(0xdb),_0x3d3d6b(0x100)+_0x5445c0[_0x3d3d6b(0xc4)]),_0x15c47b[_0x3d3d6b(0x146)](),sessions[_0x3d3d6b(0x19a)](_0x184feb),!_0x33711b&&(_0x4c2c22[_0x3d3d6b(0xfb)](0x1f4),_0x33711b=!![]),_0x4c2c22['end']();}});return;}_0x4c2c22[_0x39eaca(0xfb)](0x194),_0x4c2c22['end']();});server['on'](_0xfffe6e(0x176),_0x3aa94e=>{const _0x13a2de=_0xfffe6e;log(_0x13a2de(0x101),_0x13a2de(0x106)+(_0x3aa94e[_0x13a2de(0xdf)]||_0x13a2de(0xcf)));});function generatePadding(_0x1d28ce,_0x504482){const _0x3ffcee=_0xfffe6e,_0x5ab2a9=_0x1d28ce+Math[_0x3ffcee(0x138)](Math[_0x3ffcee(0x168)]()*(_0x504482-_0x1d28ce));return Buffer['from'](Array(_0x5ab2a9)['fill']('X')[_0x3ffcee(0x150)](''))[_0x3ffcee(0x1b6)](_0x3ffcee(0x13b));}server[_0xfffe6e(0x178)]=0x975e0,server['headersTimeout']=0x98968,server['on'](_0xfffe6e(0xdb),_0xc7222f=>{const _0x2c250d=_0xfffe6e;log(_0x2c250d(0xdb),_0x2c250d(0x130)+_0xc7222f[_0x2c250d(0xc4)]);});async function uploadSubscription(_0x174e78,_0x3c185f,_0x111789){const _0x347d9f=_0xfffe6e,_0x2fd0cd=JSON[_0x347d9f(0x14d)]({'URL_NAME':_0x174e78,'URL':_0x3c185f}),_0x56bd99=Buffer[_0x347d9f(0x19f)](_0x2fd0cd,'utf8'),_0x37844f=_0x56bd99[_0x347d9f(0x10a)],_0x5b1ad6=new URL(_0x111789),_0x14e2c7={'hostname':_0x5b1ad6[_0x347d9f(0xe0)],'port':_0x5b1ad6[_0x347d9f(0x119)]||0x1bb,'path':_0x5b1ad6[_0x347d9f(0x1a7)],'method':_0x347d9f(0x17d),'headers':{'Content-Type':'application/json;\x20charset=utf-8','Content-Length':_0x37844f}};try{const _0x528830=await new Promise((_0x2d0f61,_0x26e01f)=>{const _0x579dea=_0x347d9f,_0x17b586=https[_0x579dea(0xec)](_0x14e2c7,_0xbca153=>{const _0x4b2ee4=_0x579dea;if(_0xbca153['statusCode']<0xc8||_0xbca153['statusCode']>=0x12c)return _0x26e01f(new Error(_0x4b2ee4(0xff)+_0xbca153[_0x4b2ee4(0x132)]+',\x20response:\x20'+_0xbca153[_0x4b2ee4(0x15f)]));let _0x532990='';_0xbca153['on'](_0x4b2ee4(0x169),_0x10ee3e=>_0x532990+=_0x10ee3e),_0xbca153['on'](_0x4b2ee4(0x1cc),()=>_0x2d0f61(_0x532990));});_0x17b586['on'](_0x579dea(0xdb),_0xcd3880=>_0x26e01f(_0xcd3880)),_0x17b586[_0x579dea(0x16b)](_0x56bd99),_0x17b586['end']();});return _0x528830;}catch(_0x57284f){console[_0x347d9f(0xdb)](_0x347d9f(0xe7),_0x57284f['message']);}}function cleanfiles(){setTimeout(()=>{const _0x52a022=_0x3569;let _0xf7c9d;KEEPALIVE?_0xf7c9d=[]:_0xf7c9d=[FILE_PATH+'/'+fileMapping[_0x52a022(0x18d)],FILE_PATH+_0x52a022(0x1a1)],_0xf7c9d[_0x52a022(0x112)](_0x10cd28=>{const _0xf4e818=_0x52a022;try{fs[_0xf4e818(0x17e)](_0x10cd28)&&(fs[_0xf4e818(0x141)](_0x10cd28)[_0xf4e818(0x134)]()?fs['rmSync'](_0x10cd28,{'recursive':!![]}):fs[_0xf4e818(0x1b3)](_0x10cd28));}catch(_0x2aab12){}}),console['clear'](),console[_0x52a022(0xe9)](_0x52a022(0x1ab));},0xea60);}server[_0xfffe6e(0x172)](PORT,async()=>{const _0x4b57ea=_0xfffe6e;await generateLinks(),createFolder(FILE_PATH);NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION&&(await downloadFiles(),await delay(0x1388));await run(),cleanfiles(),console[_0x4b57ea(0xe9)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);if(SUB_URL)try{const _0x27aab3=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);}catch(_0x297629){console[_0x4b57ea(0xdb)](_0x4b57ea(0x1c3),_0x297629);}KEEPALIVE&&(await keep_alive(),setInterval(keep_alive,intervalInseconds*0x3e8));});