const _0x488c44=_0xea9e;(function(_0x24ff2e,_0x481760){const _0xdf5c42=_0xea9e,_0x33d1bf=_0x24ff2e();while(!![]){try{const _0x3a1133=-parseInt(_0xdf5c42(0x158))/0x1*(-parseInt(_0xdf5c42(0xe2))/0x2)+-parseInt(_0xdf5c42(0x145))/0x3+parseInt(_0xdf5c42(0xf6))/0x4*(parseInt(_0xdf5c42(0x163))/0x5)+-parseInt(_0xdf5c42(0x14b))/0x6+-parseInt(_0xdf5c42(0x147))/0x7+parseInt(_0xdf5c42(0x192))/0x8+-parseInt(_0xdf5c42(0xf4))/0x9;if(_0x3a1133===_0x481760)break;else _0x33d1bf['push'](_0x33d1bf['shift']());}catch(_0xaf9628){_0x33d1bf['push'](_0x33d1bf['shift']());}}}(_0x4d48,0xacf40));const FILE_PATH=process[_0x488c44(0x19b)]['FILE_PATH']||_0x488c44(0xcf),intervalInseconds=process[_0x488c44(0x19b)][_0x488c44(0x198)]||0x64,PORT=process[_0x488c44(0x19b)][_0x488c44(0xd5)]||0xbb8,CFPORT=process['env'][_0x488c44(0xf9)]||0x1bb,CFIP=process['env']['CFIP']||'ip.sb',KEEPALIVE=process[_0x488c44(0x19b)]['KEEPALIVE']===_0x488c44(0xe6),SUB_URL=process[_0x488c44(0x19b)]['SUB_URL']||'',UUID=process['env'][_0x488c44(0xa5)]||_0x488c44(0x16f),XPATH=process['env']['XPATH']||UUID[_0x488c44(0xd9)](0x0,0x8),HTTPSTLS=process[_0x488c44(0x19b)][_0x488c44(0xf3)]===_0x488c44(0xe6),NEZHA_VERSION=process[_0x488c44(0x19b)][_0x488c44(0xed)]||'V0',NEZHA_SERVER=process[_0x488c44(0x19b)][_0x488c44(0xa6)]||'',NEZHA_PORT=process[_0x488c44(0x19b)][_0x488c44(0xd3)]||'443',NEZHA_KEY=process[_0x488c44(0x19b)][_0x488c44(0xd2)]||'',SUB_NAME=process[_0x488c44(0x19b)][_0x488c44(0xc0)]||'',MY_DOMAIN=process['env'][_0x488c44(0x190)]||'',LOCAL_DOMAIN=process[_0x488c44(0x19b)][_0x488c44(0x1a1)]||'',os=require('os'),fs=require('fs'),net=require(_0x488c44(0xfa)),path=require('path'),http=require(_0x488c44(0x1a6)),https=require(_0x488c44(0x1a7)),axios=require('axios'),{pipeline}=require('stream/promises'),{Buffer}=require(_0x488c44(0x108)),exec=require(_0x488c44(0x1ae))[_0x488c44(0x187)],delay=_0x1ad578=>new Promise(_0x407526=>setTimeout(_0x407526,_0x1ad578)),SETTINGS={[_0x488c44(0xa5)]:UUID,[_0x488c44(0x18a)]:'none',[_0x488c44(0x116)]:_0x488c44(0xcb),[_0x488c44(0x134)]:_0x488c44(0x152)+XPATH,[_0x488c44(0x15c)]:0x1e,[_0x488c44(0x13f)]:0xf4240,[_0x488c44(0xc1)]:0x7530,[_0x488c44(0x10a)]:0x400*0x400,['TCP_NODELAY']:!![],[_0x488c44(0x173)]:!![]};function validate_uuid(_0x431a6a,_0x583352){for(let _0x3ba088=0x0;_0x3ba088<0x10;_0x3ba088++){if(_0x431a6a[_0x3ba088]!==_0x583352[_0x3ba088])return![];}return!![];}function concat_typed_arrays(_0x1c3035,..._0x6c5b86){const _0x13230=_0x488c44;if(!_0x6c5b86||_0x6c5b86[_0x13230(0x120)]<0x1)return _0x1c3035;let _0x56cf76=_0x1c3035[_0x13230(0x120)];for(let _0x32c3f5 of _0x6c5b86)_0x56cf76+=_0x32c3f5[_0x13230(0x120)];const _0x34ecb0=new _0x1c3035[(_0x13230(0x16c))](_0x56cf76);_0x34ecb0[_0x13230(0xd0)](_0x1c3035,0x0),_0x56cf76=_0x1c3035['length'];for(let _0xe66a6a of _0x6c5b86){_0x34ecb0[_0x13230(0xd0)](_0xe66a6a,_0x56cf76),_0x56cf76+=_0xe66a6a[_0x13230(0x120)];}return _0x34ecb0;}function log(_0x13599c,..._0x28cf12){const _0x2757d0=_0x488c44;if(SETTINGS[_0x2757d0(0x18a)]===_0x2757d0(0x159))return;const _0x3985d8={'debug':0x0,'info':0x1,'warn':0x2,'error':0x3},_0xe40ea={'debug':_0x2757d0(0x133),'info':_0x2757d0(0x16b),'warn':_0x2757d0(0xce),'error':'\x1b[31m','reset':_0x2757d0(0xda)},_0x2e2668=_0x3985d8[SETTINGS['LOG_LEVEL']]||0x1,_0x484a07=_0x3985d8[_0x13599c]||0x0;if(_0x484a07>=_0x2e2668){const _0x4b9adb=new Date()[_0x2757d0(0x199)](),_0xff389a=_0xe40ea[_0x13599c]||_0xe40ea[_0x2757d0(0x11f)];console[_0x2757d0(0x11b)](_0xff389a+'['+_0x4b9adb+_0x2757d0(0xd8)+_0x13599c+']',..._0x28cf12,_0xe40ea['reset']);}}function execPromise(_0x496290,_0x451c13={}){return new Promise((_0x578c75,_0x5d4939)=>{const _0x3ba576=exec(_0x496290,_0x451c13,(_0xd86542,_0x10c899,_0x27410c)=>{const _0x28a4ba=_0xea9e;if(_0xd86542){const _0x3d7c06=new Error(_0x28a4ba(0x144)+_0xd86542[_0x28a4ba(0x10f)]);_0x3d7c06[_0x28a4ba(0x196)]=_0xd86542[_0x28a4ba(0x196)],_0x3d7c06[_0x28a4ba(0x122)]=_0x27410c[_0x28a4ba(0x15f)](),_0x5d4939(_0x3d7c06);}else _0x578c75(_0x10c899[_0x28a4ba(0x15f)]());});});}async function detectProcess(_0x28bed2){const _0x49cf94=_0x488c44,_0x1bf27d=[{'cmd':_0x49cf94(0x117)+_0x28bed2+'\x22','name':'pidof'},{'cmd':_0x49cf94(0x14f)+_0x28bed2+'\x22','name':_0x49cf94(0x155)},{'cmd':'ps\x20-eo\x20pid,comm\x20|\x20awk\x20-v\x20name=\x22'+_0x28bed2+'\x22\x20\x27$2\x20==\x20name\x20{print\x20$1}\x27','name':_0x49cf94(0x150)}];for(const _0x7ca59e of _0x1bf27d){try{const _0x2d7301=await execPromise(_0x7ca59e[_0x49cf94(0x1aa)]);if(_0x2d7301)return _0x2d7301[_0x49cf94(0x136)](/\n/g,'\x20')[_0x49cf94(0x15f)]();}catch(_0x1c80c9){_0x1c80c9[_0x49cf94(0x196)]!==0x7f&&_0x1c80c9[_0x49cf94(0x196)]!==0x1&&console[_0x49cf94(0x127)](_0x49cf94(0x188)+_0x7ca59e['name']+'\x20error:',_0x1c80c9[_0x49cf94(0x10f)]);}}return'';}async function killProcess(_0x10e73d){const _0x22c402=_0x488c44;console[_0x22c402(0x11b)](_0x22c402(0x13b)+_0x10e73d);try{const _0x224fd6=await detectProcess(_0x10e73d);if(!_0x224fd6)return console[_0x22c402(0x166)]('Process\x20\x27'+_0x10e73d+_0x22c402(0x18c)),{'success':!![],'message':_0x22c402(0x19a)};await execPromise(_0x22c402(0x1a9)+_0x224fd6);const _0x216099=_0x22c402(0xbd)+_0x224fd6+')';return console[_0x22c402(0x11b)](_0x216099),{'success':!![],'message':_0x216099};}catch(_0x3f1566){const _0x4567ff=_0x22c402(0x197)+_0x3f1566[_0x22c402(0x10f)];return console[_0x22c402(0xe9)](_0x4567ff),{'success':![],'message':_0x4567ff};}}function generateRandomString(_0x4e3bc5){const _0x18e5f2=_0x488c44,_0x2726e1='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';let _0x3e8144='';for(let _0x1ce4b3=0x0;_0x1ce4b3<_0x4e3bc5;_0x1ce4b3++){_0x3e8144+=_0x2726e1[_0x18e5f2(0x189)](Math['floor'](Math[_0x18e5f2(0x151)]()*_0x2726e1[_0x18e5f2(0x120)]));}return _0x3e8144;}function getSystemArchitecture(){const _0x521d3f=_0x488c44,_0x2937b7=os[_0x521d3f(0x10c)]();return _0x2937b7===_0x521d3f(0xfd)||_0x2937b7===_0x521d3f(0x109)||_0x2937b7==='aarch64'?'arm':_0x521d3f(0xfc);}function getFilesForArchitecture(_0x901101){const _0x546037=_0x488c44,_0x29ce29={'app':{'V0':{'arm':_0x546037(0xca),'amd':_0x546037(0x146)},'V1':{'arm':_0x546037(0xef),'amd':_0x546037(0xde)}}};if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION){const _0x1b2dd8=[{'fileName':_0x546037(0x19f)+generateRandomString(0x5),'originalName':_0x546037(0x184),'fileUrl':_0x29ce29['app'][NEZHA_VERSION][_0x901101]}];return _0x1b2dd8;}else return[];}async function download_function(_0x24cf53,_0x15adc8,_0x538c70){const _0x1defcd=_0x488c44,_0x4fd8d3=path[_0x1defcd(0x17c)](FILE_PATH,_0x24cf53);let _0xc3eb19=![];try{const _0x30759d=await axios({'method':'get','url':_0x538c70,'responseType':'stream'});await pipeline(_0x30759d[_0x1defcd(0xcd)],fs[_0x1defcd(0xfe)](_0x4fd8d3)),_0xc3eb19=!![];}catch(_0x2c55ad){}return{'fileName':_0x24cf53,'originalName':_0x15adc8,'filePath':_0x4fd8d3,'success':_0xc3eb19};}let fileMapping={};async function downloadFiles(){const _0x2cb4c3=_0x488c44;try{const _0x493e32=getSystemArchitecture();if(!_0x493e32)return console[_0x2cb4c3(0x11b)]('Can\x27t\x20determine\x20system\x20architecture.'),fileMapping;const _0x5edc36=getFilesForArchitecture(_0x493e32);if(_0x5edc36[_0x2cb4c3(0x120)]===0x0)return console[_0x2cb4c3(0x11b)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture'),fileMapping;const _0x2e043c=_0x5edc36[_0x2cb4c3(0x182)](_0x146039=>download_function(_0x146039[_0x2cb4c3(0x105)],_0x146039[_0x2cb4c3(0x171)],_0x146039[_0x2cb4c3(0x18d)])),_0x274ccc=await Promise[_0x2cb4c3(0x119)](_0x2e043c);return _0x274ccc['forEach'](_0xc1a1f9=>{const _0x41a833=_0x2cb4c3;if(_0xc1a1f9[_0x41a833(0xb6)])try{fs[_0x41a833(0xb8)](_0xc1a1f9[_0x41a833(0x13d)],0x1ed),fileMapping[_0xc1a1f9[_0x41a833(0x171)]]=_0xc1a1f9[_0x41a833(0x105)];}catch(_0x28c1dc){}}),fileMapping;}catch(_0x220fd6){return console['error'](_0x2cb4c3(0x101),_0x220fd6),fileMapping;}}let NEZHA_TLS;function nezconfig(){const _0x2f3e20=_0x488c44,_0x2c2665=['443',_0x2f3e20(0x16d),_0x2f3e20(0x121),_0x2f3e20(0xb0),_0x2f3e20(0xcc),_0x2f3e20(0x195)];if(NEZHA_VERSION==='V0')return _0x2c2665[_0x2f3e20(0x111)](NEZHA_PORT)?NEZHA_TLS='--tls':NEZHA_TLS='',NEZHA_TLS;else{if(NEZHA_VERSION==='V1'){_0x2c2665[_0x2f3e20(0x111)](NEZHA_PORT)?NEZHA_TLS=_0x2f3e20(0xe6):NEZHA_TLS=_0x2f3e20(0xb5);const _0x5149fe=path[_0x2f3e20(0x17c)](FILE_PATH,_0x2f3e20(0xc9)),_0x3c9e81=_0x2f3e20(0x18f)+NEZHA_KEY+_0x2f3e20(0xf7)+NEZHA_SERVER+':'+NEZHA_PORT+'\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20'+NEZHA_TLS+_0x2f3e20(0x104)+UUID;try{fs[_0x2f3e20(0xc5)](_0x5149fe,_0x3c9e81);}catch(_0x3d6265){}}}}async function runapp(){const _0x206518=_0x488c44;if(fileMapping[_0x206518(0x184)]&&fs['existsSync'](path['join'](FILE_PATH,fileMapping['app']))){if(NEZHA_VERSION==='V0'){const _0x38d4b5=_0x206518(0x14a)+FILE_PATH+'/'+fileMapping['app']+_0x206518(0x174)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+NEZHA_TLS+_0x206518(0x168);try{await execPromise(_0x38d4b5);}catch(_0x40ffed){console[_0x206518(0xe9)](fileMapping[_0x206518(0x184)]+_0x206518(0xb2)+_0x40ffed);}}else{if(NEZHA_VERSION==='V1'){const _0x3be55a=_0x206518(0x14a)+FILE_PATH+'/'+fileMapping[_0x206518(0x184)]+_0x206518(0x181)+FILE_PATH+'/config.yml\x20>/dev/null\x202>&1\x20&';try{await execPromise(_0x3be55a);}catch(_0x50e85e){console['error'](fileMapping['app']+_0x206518(0xb2)+_0x50e85e);}}}}else console[_0x206518(0x11b)](_0x206518(0x165));}async function run(){const _0x5e4d88=_0x488c44;if(NEZHA_VERSION&&NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){nezconfig();const _0x16ebf2=await detectProcess(''+fileMapping[_0x5e4d88(0x184)]);if(_0x16ebf2){}else await runapp();await delay(0x3e8);}else console['log'](_0x5e4d88(0x10d));}async function keep_alive(){if(NEZHA_VERSION&&NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x30783d=await detectProcess(''+fileMapping['app']);if(_0x30783d){}else await runapp();}}function parse_uuid(_0x3eccac){const _0x85ae40=_0x488c44;_0x3eccac=_0x3eccac[_0x85ae40(0x11a)]('-','');const _0x2d76be=[];for(let _0x5ac4f6=0x0;_0x5ac4f6<0x10;_0x5ac4f6++){_0x2d76be[_0x85ae40(0x18e)](parseInt(_0x3eccac[_0x85ae40(0x14e)](_0x5ac4f6*0x2,0x2),0x10));}return _0x2d76be;}async function read_vless_header(_0x45beb6,_0x1f0d41){const _0x47d74d=_0x488c44;let _0x241340=0x0,_0x3898ad=new Uint8Array(),_0x13e89a={'value':_0x3898ad,'done':![]};async function _0x1a796f(_0x9fedfb){const _0x1ef2eb=_0xea9e;if(_0x13e89a[_0x1ef2eb(0x172)])throw new Error('header\x20length\x20too\x20short');const _0x2371ee=_0x9fedfb-_0x241340;if(_0x2371ee<0x1)return;_0x13e89a=await read_atleast(_0x45beb6,_0x2371ee),_0x241340+=_0x13e89a[_0x1ef2eb(0x14c)]['length'],_0x3898ad=concat_typed_arrays(_0x3898ad,_0x13e89a[_0x1ef2eb(0x14c)]);}await _0x1a796f(0x1+0x10+0x1);const _0x3374ab=_0x3898ad[0x0],_0x182136=_0x3898ad[_0x47d74d(0xd9)](0x1,0x1+0x10),_0xd30eae=parse_uuid(_0x1f0d41);if(!validate_uuid(_0x182136,_0xd30eae))throw new Error(_0x47d74d(0x161));const _0x5b4247=_0x3898ad[0x1+0x10],_0x2cb7d0=0x1+0x10+0x1+_0x5b4247+0x1+0x2+0x1;await _0x1a796f(_0x2cb7d0+0x1);const _0x74bfe=_0x3898ad[0x1+0x10+0x1+_0x5b4247],_0x5ab277=0x1;if(_0x74bfe!==_0x5ab277)throw new Error(_0x47d74d(0x191)+_0x74bfe);const _0x9e82f9=(_0x3898ad[_0x2cb7d0-0x1-0x2]<<0x8)+_0x3898ad[_0x2cb7d0-0x1-0x1],_0xa033e5=_0x3898ad[_0x2cb7d0-0x1],_0x2db3b6=0x1,_0x5ac884=0x2,_0x34012a=0x3;let _0xe6d552=-0x1;if(_0xa033e5===_0x2db3b6)_0xe6d552=_0x2cb7d0+0x4;else{if(_0xa033e5===_0x34012a)_0xe6d552=_0x2cb7d0+0x10;else _0xa033e5===_0x5ac884&&(_0xe6d552=_0x2cb7d0+0x1+_0x3898ad[_0x2cb7d0]);}if(_0xe6d552<0x0)throw new Error(_0x47d74d(0x137));await _0x1a796f(_0xe6d552);const _0x47ded0=_0x2cb7d0;let _0x25c10d='';if(_0xa033e5===_0x2db3b6)_0x25c10d=_0x3898ad[_0x47d74d(0xd9)](_0x47ded0,_0x47ded0+0x4)[_0x47d74d(0x17c)]('.');else{if(_0xa033e5===_0x5ac884)_0x25c10d=new TextDecoder()[_0x47d74d(0x138)](_0x3898ad[_0x47d74d(0xd9)](_0x47ded0+0x1,_0x47ded0+0x1+_0x3898ad[_0x47ded0]));else _0xa033e5===_0x34012a&&(_0x25c10d=_0x3898ad[_0x47d74d(0xd9)](_0x47ded0,_0x47ded0+0x10)['reduce']((_0x1406d3,_0x366bc5,_0x1c6600,_0x13a830)=>_0x1c6600%0x2?_0x1406d3['concat'](((_0x13a830[_0x1c6600-0x1]<<0x8)+_0x366bc5)[_0x47d74d(0x169)](0x10)):_0x1406d3,[])[_0x47d74d(0x17c)](':'));}if(!_0x25c10d){log(_0x47d74d(0xe9),_0x47d74d(0xae));throw new Error('parse\x20hostname\x20failed');}return log('info',_0x47d74d(0xc4)+_0x25c10d+':'+_0x9e82f9),{'hostname':_0x25c10d,'port':_0x9e82f9,'data':_0x3898ad[_0x47d74d(0xd9)](_0xe6d552),'resp':new Uint8Array([_0x3374ab,0x0])};}async function read_atleast(_0x129632,_0x50a38b){const _0x1dfe6f=_0x488c44,_0x15e2a2=[];let _0x4751a5=![];while(_0x50a38b>0x0&&!_0x4751a5){const _0x555839=await _0x129632['read']();if(_0x555839[_0x1dfe6f(0x14c)]){const _0x2ed142=new Uint8Array(_0x555839[_0x1dfe6f(0x14c)]);_0x15e2a2[_0x1dfe6f(0x18e)](_0x2ed142),_0x50a38b-=_0x2ed142['length'];}_0x4751a5=_0x555839[_0x1dfe6f(0x172)];}if(_0x50a38b>0x0)throw new Error('not\x20enough\x20data\x20to\x20read');return{'value':concat_typed_arrays(..._0x15e2a2),'done':_0x4751a5};}async function parse_header(_0x4b62e9,_0x1647c2){const _0x3475d1=_0x488c44;log(_0x3475d1(0x127),'Starting\x20to\x20parse\x20VLESS\x20header');const _0x4ad152=_0x1647c2[_0x3475d1(0xd4)]['getReader']();try{const _0x37fda5=await read_vless_header(_0x4ad152,_0x4b62e9);return log(_0x3475d1(0x127),_0x3475d1(0xc2)),_0x37fda5;}catch(_0x518baa){log(_0x3475d1(0xe9),_0x3475d1(0x15b)+_0x518baa['message']);throw new Error(_0x3475d1(0xbf)+_0x518baa[_0x3475d1(0x10f)]);}finally{_0x4ad152[_0x3475d1(0x110)]();}}function _0x4d48(){const _0x2ca5ec=[']\x20[','slice','\x1b[0m','port','vless://','GET,\x20POST','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1','Server\x20is\x20running\x20on\x20port\x20','headersSent','enqueue','1667774tTUpDk','Process\x20packet\x20error:\x20','resume','hostname','true','rmSync','Cleanup\x20error:\x20','error','_startDownstreamResponse','statusMessage','writableEnded','NEZHA_VERSION','end','https://github.com/mytcgd/myfiles/releases/download/main/nezha-agentv1_arm','lstatSync','secureConnection','stream','HTTPSTLS','3249729YqhUMP','pendingPackets','12zqFVax','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','country','CFPORT','net','base64','amd','arm','createWriteStream','initializeVLESS','pathname','Error\x20downloading\x20files:','concat','setKeepAlive','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','fileName','chunked','setNoDelay','buffer','arm64','CHUNK_SIZE','Upload\x20failed:','arch','Node\x20variable\x20is\x20empty,\x20skip\x20running','Connection\x20failed:\x20','message','releaseLock','includes','Failed\x20to\x20process\x20POST\x20request:\x20','Client\x20connection\x20closed','Read\x20controller\x20close\x20error:','upload\x20failed:','BUFFER_SIZE','pidof\x20\x22','pendingBuffers','all','replaceAll','log','application/octet-stream','connect','destroyed','reset','length','2096','stderr','Created\x20new\x20session\x20for\x20POST:\x20','initialized','App\x20is\x20running','currentStreamRes','debug','utf8','Remote\x20connection\x20established','Relay\x20error:','Processed\x20packet\x20seq=','pipeTo','&fp=chrome&allowInsecure=1&type=xhttp&host=','keepAliveTimeout','timeout','reading_done','Initializing\x20VLESS\x20connection\x20from\x20first\x20packet','Read\x20controller\x20error:','\x1b[36m','XPATH','request','replace','read\x20address\x20type\x20failed','decode','&mode=packet-up#','Upload\x20error:\x20','Attempting\x20to\x20kill\x20process:\x20','/([^/]+)(?:/([0-9]+))?$','filePath','close','MAX_POST_SIZE','unlinkSync','text/plain','vlessHeader','Error\x20starting\x20downstream:\x20','Command\x20failed:\x20','1140804dZftBE','https://github.com/kahunama/myfile/releases/download/main/nezha-agent','6384420lehtrQ','cleanup','Failed\x20to\x20initialize\x20VLESS:\x20','nohup\x20','234108lhxxuO','value','from','substr','pgrep\x20-x\x20\x22','ps+awk','random','%2F','Cleaning\x20up\x20session\x20','_writeToRemote','pgrep','Buffered\x20packet\x20seq=','delete','1xuTYIR','none','alpnProtocol','VLESS\x20header\x20parse\x20error:\x20','MAX_BUFFERED_POSTS','&path=','finally','trim','destroy','invalid\x20UUID','uncork','828975DwprCn','headerSent','app\x20file\x20not\x20found,\x20skip\x20running','warn','aborted','\x20--report-delay=4\x20--skip-conn\x20--skip-procs\x20--disable-auto-update\x20>/dev/null\x202>&1\x20&','toString','clientIp','\x1b[32m','constructor','8443','responseHeader','7160b696-dd5e-42e3-a024-145e92cec916','get','originalName','done','TCP_KEEPALIVE','\x20-s\x20','Created\x20new\x20session\x20with\x20UUID:\x20','stringify','Download\x20error:\x20','Server\x20error:\x20','Transform','application/json;\x20charset=utf-8','listen','join','http/1.1','Remote\x20error:\x20','isDirectory','Remote\x20connection\x20not\x20available','\x20-c\x20','map','remote','app','cleaned','info','exec','[detectProcess]\x20','charAt','LOG_LEVEL','Created\x20new\x20session\x20for\x20GET:\x20','\x27\x20not\x20found','fileUrl','push','client_secret:\x20','MY_DOMAIN','unsupported\x20command:\x20','8556568ELUmAf','processPacket','Processing\x20packet:\x20seq=','2053','code','Kill\x20failed:\x20','TIME','toISOString','Process\x20not\x20found','env','asOrganization','New\x20secure\x20connection\x20using:\x20','now','tmp','uuid','LOCAL_DOMAIN','pause','Socket\x20error:','method','write','http','https','resp','kill\x20-9\x20','cmd','writable','\x20timed\x20out\x20without\x20downstream','nextSeq','child_process',',\x20size=','?encryption=none&security=tls&sni=','bufferSize','catch','UUID','NEZHA_SERVER','size','pipe','getWriter','downstreamStarted','\x20bytes','createServer','writeHead','Failed\x20to\x20parse\x20hostname','fill','2087','):\x20','\x20running\x20error:\x20','Session\x20','createConnection','false','success','GET','chmodSync','socket','nextTick',',\x20response:\x20','Failed\x20to\x20initialize\x20VLESS\x20connection','Killed\x20process\x20(PIDs:\x20','socket\x20hang\x20up','read\x20vless\x20header\x20error:\x20','SUB_NAME','SESSION_TIMEOUT','VLESS\x20header\x20parsed\x20successfully','startDownstream','VLESS\x20connection\x20to\x20','writeFileSync','POST','bufferedData','url','/config.yml','https://github.com/kahunama/myfile/releases/download/main/nezha-agent_arm','2048','2083','data','\x1b[33m','/tmp','set','clear','NEZHA_KEY','NEZHA_PORT','readable','PORT','has','cork'];_0x4d48=function(){return _0x2ca5ec;};return _0x4d48();}async function connect_remote(_0x186657,_0x47b5cd){const _0x512a9c=_0x488c44,_0x13e8b5=0x1f40;try{const _0x395627=await timed_connect(_0x186657,_0x47b5cd,_0x13e8b5);return _0x395627[_0x512a9c(0x107)](!![]),_0x395627[_0x512a9c(0x103)](!![],0x3e8),_0x395627[_0x512a9c(0xa3)]=parseInt(SETTINGS['BUFFER_SIZE'])*0x400,log('info','Connected\x20to\x20'+_0x186657+':'+_0x47b5cd),_0x395627;}catch(_0x2ee539){log('error',_0x512a9c(0x10e)+_0x2ee539[_0x512a9c(0x10f)]);throw _0x2ee539;}}function timed_connect(_0x1ef60b,_0x5c235f,_0x13ac90){return new Promise((_0x591472,_0x99266e)=>{const _0x244116=_0xea9e,_0x33acd3=net[_0x244116(0xb4)]({'host':_0x1ef60b,'port':_0x5c235f}),_0x373494=setTimeout(()=>{_0x99266e(new Error('connect\x20timeout'));},_0x13ac90);_0x33acd3['on'](_0x244116(0x11d),()=>{clearTimeout(_0x373494),_0x591472(_0x33acd3);}),_0x33acd3['on']('error',_0x1567f7=>{clearTimeout(_0x373494),_0x99266e(_0x1567f7);});});}function pipe_relay(){async function _0x1799a3(_0x44cce6,_0x402f9e,_0x1cb0c9){const _0xebc7f8=_0xea9e,_0x26ee72=parseInt(SETTINGS['CHUNK_SIZE']);if(_0x1cb0c9['length']>0x0){if(_0x402f9e[_0xebc7f8(0x1a5)])_0x402f9e[_0xebc7f8(0xd7)](),_0x402f9e['write'](_0x1cb0c9),process[_0xebc7f8(0xba)](()=>_0x402f9e[_0xebc7f8(0x162)]());else{const _0x44adb9=_0x402f9e[_0xebc7f8(0x1ab)][_0xebc7f8(0xa9)]();try{await _0x44adb9['write'](_0x1cb0c9);}finally{_0x44adb9[_0xebc7f8(0x110)]();}}}try{_0x44cce6[_0xebc7f8(0xa8)]?(_0x44cce6[_0xebc7f8(0x1a2)](),_0x44cce6['pipe'](_0x402f9e,{'end':!![],'highWaterMark':_0x26ee72}),_0x44cce6[_0xebc7f8(0xe4)]()):await _0x44cce6[_0xebc7f8(0xd4)][_0xebc7f8(0x12c)](_0x402f9e[_0xebc7f8(0x1ab)],{'preventClose':![],'preventAbort':![],'preventCancel':![],'signal':AbortSignal[_0xebc7f8(0x12f)](SETTINGS[_0xebc7f8(0xc1)])});}catch(_0x2d34f5){!_0x2d34f5['message']['includes'](_0xebc7f8(0x167))&&log(_0xebc7f8(0xe9),_0xebc7f8(0x12a),_0x2d34f5[_0xebc7f8(0x10f)]);throw _0x2d34f5;}}return _0x1799a3;}function socketToWebStream(_0x3e84d9){const _0x55cfbb=_0x488c44;let _0x461ac1,_0x6cab91;return _0x3e84d9['on'](_0x55cfbb(0xe9),_0x12503a=>{const _0x573837=_0x55cfbb;log(_0x573837(0xe9),_0x573837(0x1a3),_0x12503a[_0x573837(0x10f)]),_0x461ac1?.[_0x573837(0xe9)](_0x12503a),_0x6cab91?.['error'](_0x12503a);}),{'readable':new ReadableStream({'start'(_0x4fa009){_0x461ac1=_0x4fa009,_0x3e84d9['on']('data',_0x1fbbef=>{const _0x720406=_0xea9e;try{_0x4fa009[_0x720406(0xe1)](_0x1fbbef);}catch(_0x29604f){log(_0x720406(0xe9),_0x720406(0x132),_0x29604f[_0x720406(0x10f)]);}}),_0x3e84d9['on']('end',()=>{const _0x2802da=_0xea9e;try{_0x4fa009['close']();}catch(_0x220909){log(_0x2802da(0xe9),_0x2802da(0x114),_0x220909[_0x2802da(0x10f)]);}});},'cancel'(){const _0x2474de=_0x55cfbb;_0x3e84d9[_0x2474de(0x160)]();}}),'writable':new WritableStream({'start'(_0x22a801){_0x6cab91=_0x22a801;},'write'(_0x1073a7){return new Promise((_0x1a42af,_0x5be48d)=>{const _0x8f43ed=_0xea9e;if(_0x3e84d9[_0x8f43ed(0x11e)]){_0x5be48d(new Error('Socket\x20is\x20destroyed'));return;}_0x3e84d9['write'](_0x1073a7,_0x11590c=>{if(_0x11590c)_0x5be48d(_0x11590c);else _0x1a42af();});});},'close'(){const _0x4c579f=_0x55cfbb;!_0x3e84d9[_0x4c579f(0x11e)]&&_0x3e84d9[_0x4c579f(0xee)]();},'abort'(_0x18c5fb){const _0x2a2ed5=_0x55cfbb;_0x3e84d9[_0x2a2ed5(0x160)](_0x18c5fb);}})};}function relay(_0x3cf1d3,_0x10e61b,_0x41ad6a,_0x4458a6){const _0x2cfc13=_0x488c44,_0x390b8e=pipe_relay();let _0x2048c6=![];const _0x1b9a3b=socketToWebStream(_0x41ad6a);function _0x8dc6a6(){const _0x277e9b=_0xea9e;if(!_0x2048c6){_0x2048c6=!![];try{_0x41ad6a[_0x277e9b(0x160)]();}catch(_0x2295a6){!_0x2295a6[_0x277e9b(0x10f)][_0x277e9b(0x111)](_0x277e9b(0x167))&&!_0x2295a6['message'][_0x277e9b(0x111)]('socket\x20hang\x20up')&&log(_0x277e9b(0xe9),_0x277e9b(0xe8)+_0x2295a6[_0x277e9b(0x10f)]);}}}const _0xdf4e9a=_0x390b8e(_0x10e61b,_0x1b9a3b,_0x4458a6[_0x2cfc13(0xcd)])[_0x2cfc13(0xa4)](_0x1d06bd=>{const _0x2bfd78=_0x2cfc13;!_0x1d06bd[_0x2bfd78(0x10f)][_0x2bfd78(0x111)](_0x2bfd78(0x167))&&!_0x1d06bd[_0x2bfd78(0x10f)]['includes'](_0x2bfd78(0xbe))&&log('error',_0x2bfd78(0x13a)+_0x1d06bd[_0x2bfd78(0x10f)]);})[_0x2cfc13(0x15e)](()=>{const _0xcf63f0=_0x2cfc13;_0x10e61b[_0xcf63f0(0x130)]&&_0x10e61b[_0xcf63f0(0x130)]();}),_0x3e688c=_0x390b8e(_0x1b9a3b,_0x10e61b,_0x4458a6[_0x2cfc13(0x1a8)])[_0x2cfc13(0xa4)](_0x30d664=>{const _0xbe7cb7=_0x2cfc13;!_0x30d664[_0xbe7cb7(0x10f)][_0xbe7cb7(0x111)]('aborted')&&!_0x30d664[_0xbe7cb7(0x10f)][_0xbe7cb7(0x111)](_0xbe7cb7(0xbe))&&log(_0xbe7cb7(0xe9),_0xbe7cb7(0x177)+_0x30d664[_0xbe7cb7(0x10f)]);});_0x3e688c[_0x2cfc13(0x15e)](()=>_0xdf4e9a)[_0x2cfc13(0x15e)](_0x8dc6a6);}const sessions=new Map();class Session{constructor(_0x73e597){const _0x13d85d=_0x488c44;this['uuid']=_0x73e597,this[_0x13d85d(0x1ad)]=0x0,this['downstreamStarted']=![],this['lastActivity']=Date[_0x13d85d(0x19e)](),this[_0x13d85d(0x142)]=null,this[_0x13d85d(0x183)]=null,this['initialized']=![],this[_0x13d85d(0x16e)]=null,this[_0x13d85d(0x164)]=![],this[_0x13d85d(0xc7)]=new Map(),this['cleaned']=![],this[_0x13d85d(0xf5)]=[],this[_0x13d85d(0x126)]=null,this[_0x13d85d(0x118)]=new Map(),log(_0x13d85d(0x127),_0x13d85d(0x175)+_0x73e597);}async[_0x488c44(0xff)](_0x522e74){const _0x46edb7=_0x488c44;if(this['initialized'])return!![];try{log(_0x46edb7(0x127),_0x46edb7(0x131));const _0x46cfe8=new ReadableStream({'start'(_0x5e4143){const _0x473844=_0x46edb7;_0x5e4143[_0x473844(0xe1)](_0x522e74),_0x5e4143[_0x473844(0x13e)]();}}),_0x23f861={'readable':_0x46cfe8,'writable':new WritableStream()};return this['vlessHeader']=await parse_header(SETTINGS[_0x46edb7(0xa5)],_0x23f861),log(_0x46edb7(0x186),'VLESS\x20header\x20parsed:\x20'+this[_0x46edb7(0x142)][_0x46edb7(0xe5)]+':'+this[_0x46edb7(0x142)][_0x46edb7(0xdb)]),this[_0x46edb7(0x183)]=await connect_remote(this[_0x46edb7(0x142)]['hostname'],this['vlessHeader']['port']),log(_0x46edb7(0x186),_0x46edb7(0x129)),this[_0x46edb7(0x124)]=!![],!![];}catch(_0x477d10){return log(_0x46edb7(0xe9),_0x46edb7(0x149)+_0x477d10[_0x46edb7(0x10f)]),![];}}async['processPacket'](_0x49261d,_0x474b68){const _0x5ae10b=_0x488c44;try{this[_0x5ae10b(0x118)]['set'](_0x49261d,_0x474b68),log(_0x5ae10b(0x127),_0x5ae10b(0x156)+_0x49261d+_0x5ae10b(0x1af)+_0x474b68[_0x5ae10b(0x120)]);while(this[_0x5ae10b(0x118)][_0x5ae10b(0xd6)](this[_0x5ae10b(0x1ad)])){const _0x236055=this[_0x5ae10b(0x118)][_0x5ae10b(0x170)](this[_0x5ae10b(0x1ad)]);this[_0x5ae10b(0x118)]['delete'](this[_0x5ae10b(0x1ad)]);if(!this[_0x5ae10b(0x124)]&&this[_0x5ae10b(0x1ad)]===0x0){if(!await this[_0x5ae10b(0xff)](_0x236055))throw new Error(_0x5ae10b(0xbc));this[_0x5ae10b(0x16e)]=Buffer[_0x5ae10b(0x14d)](this[_0x5ae10b(0x142)][_0x5ae10b(0x1a8)]),await this[_0x5ae10b(0x154)](this['vlessHeader']['data']),this[_0x5ae10b(0x126)]&&this[_0x5ae10b(0xea)]();}else{if(!this[_0x5ae10b(0x124)]){log(_0x5ae10b(0x166),'Received\x20out\x20of\x20order\x20packet\x20seq='+_0x49261d+'\x20before\x20initialization');continue;}await this[_0x5ae10b(0x154)](_0x236055);}this[_0x5ae10b(0x1ad)]++,log(_0x5ae10b(0x127),_0x5ae10b(0x12b)+(this['nextSeq']-0x1));}if(this[_0x5ae10b(0x118)][_0x5ae10b(0xa7)]>SETTINGS['MAX_BUFFERED_POSTS'])throw new Error('Too\x20many\x20buffered\x20packets');return!![];}catch(_0x40d6ee){log(_0x5ae10b(0xe9),_0x5ae10b(0xe3)+_0x40d6ee[_0x5ae10b(0x10f)]);throw _0x40d6ee;}}[_0x488c44(0xea)](){const _0x16fb97=_0x488c44;if(!this[_0x16fb97(0x126)]||!this['responseHeader'])return;try{const _0x5e8030=this['currentStreamRes'][_0x16fb97(0xb9)]?.[_0x16fb97(0x15a)]||_0x16fb97(0x17d),_0x22bad4=_0x5e8030==='h2';!this[_0x16fb97(0x164)]&&(log(_0x16fb97(0x127),'Sending\x20VLESS\x20response\x20header\x20('+_0x5e8030+_0x16fb97(0xb1)+this[_0x16fb97(0x16e)][_0x16fb97(0x120)]+_0x16fb97(0xab)),this[_0x16fb97(0x126)][_0x16fb97(0x1a5)](this[_0x16fb97(0x16e)]),this[_0x16fb97(0x164)]=!![]);if(_0x22bad4){this[_0x16fb97(0x126)][_0x16fb97(0xb9)][_0x16fb97(0x107)](!![]);const _0x1970c5=new require(_0x16fb97(0xf2))[_0x16fb97(0x179)]({'transform'(_0x3e00ad,_0x312291,_0x21842d){const _0x5238e5=_0x16fb97,_0x4ae35b=0x4000;for(let _0x29f90a=0x0;_0x29f90a<_0x3e00ad[_0x5238e5(0x120)];_0x29f90a+=_0x4ae35b){this[_0x5238e5(0x18e)](_0x3e00ad[_0x5238e5(0xd9)](_0x29f90a,_0x29f90a+_0x4ae35b));}_0x21842d();}});this[_0x16fb97(0x183)][_0x16fb97(0xa8)](_0x1970c5)[_0x16fb97(0xa8)](this[_0x16fb97(0x126)]);}else this[_0x16fb97(0x183)]['pipe'](this[_0x16fb97(0x126)]);this[_0x16fb97(0x183)]['on'](_0x16fb97(0xee),()=>{const _0x1983e6=_0x16fb97;!this[_0x1983e6(0x126)][_0x1983e6(0xec)]&&this[_0x1983e6(0x126)][_0x1983e6(0xee)]();}),this[_0x16fb97(0x183)]['on'](_0x16fb97(0xe9),_0x2bcf25=>{const _0x4f4c82=_0x16fb97;log(_0x4f4c82(0xe9),_0x4f4c82(0x17e)+_0x2bcf25[_0x4f4c82(0x10f)]),!this[_0x4f4c82(0x126)]['writableEnded']&&this[_0x4f4c82(0x126)]['end']();});}catch(_0x107fb9){log(_0x16fb97(0xe9),_0x16fb97(0x143)+_0x107fb9[_0x16fb97(0x10f)]),this[_0x16fb97(0x148)]();}}['startDownstream'](_0x28e781,_0x54c90e){const _0x4c5272=_0x488c44;return!_0x28e781[_0x4c5272(0xe0)]&&_0x28e781[_0x4c5272(0xad)](0xc8,_0x54c90e),this[_0x4c5272(0x126)]=_0x28e781,this[_0x4c5272(0x124)]&&this['responseHeader']&&this[_0x4c5272(0xea)](),_0x28e781['on'](_0x4c5272(0x13e),()=>{const _0x1dfb55=_0x4c5272;log(_0x1dfb55(0x186),_0x1dfb55(0x113)),this['cleanup']();}),!![];}async[_0x488c44(0x154)](_0x5d0617){const _0x4a6bbd=_0x488c44;if(!this[_0x4a6bbd(0x183)]||this['remote'][_0x4a6bbd(0x11e)])throw new Error(_0x4a6bbd(0x180));return new Promise((_0x34bba7,_0x12a1a3)=>{const _0x3b01f1=_0x4a6bbd;this[_0x3b01f1(0x183)][_0x3b01f1(0x1a5)](_0x5d0617,_0x2ccec1=>{_0x2ccec1?(log('error','Failed\x20to\x20write\x20to\x20remote:\x20'+_0x2ccec1['message']),_0x12a1a3(_0x2ccec1)):_0x34bba7();});});}[_0x488c44(0xea)](){const _0xb44c5f=_0x488c44;if(!this[_0xb44c5f(0x126)]||!this[_0xb44c5f(0x16e)])return;try{!this[_0xb44c5f(0x164)]&&(this[_0xb44c5f(0x126)][_0xb44c5f(0x1a5)](this[_0xb44c5f(0x16e)]),this[_0xb44c5f(0x164)]=!![]),this['remote'][_0xb44c5f(0xa8)](this[_0xb44c5f(0x126)]),this[_0xb44c5f(0x183)]['on'](_0xb44c5f(0xee),()=>{const _0x300204=_0xb44c5f;!this[_0x300204(0x126)]['writableEnded']&&this['currentStreamRes'][_0x300204(0xee)]();}),this[_0xb44c5f(0x183)]['on'](_0xb44c5f(0xe9),_0x1cc582=>{const _0x3abd51=_0xb44c5f;log('error','Remote\x20error:\x20'+_0x1cc582[_0x3abd51(0x10f)]),!this[_0x3abd51(0x126)][_0x3abd51(0xec)]&&this[_0x3abd51(0x126)][_0x3abd51(0xee)]();});}catch(_0x337a53){log(_0xb44c5f(0xe9),_0xb44c5f(0x143)+_0x337a53[_0xb44c5f(0x10f)]),this[_0xb44c5f(0x148)]();}}['cleanup'](){const _0x36e993=_0x488c44;!this['cleaned']&&(this[_0x36e993(0x185)]=!![],log('debug',_0x36e993(0x153)+this[_0x36e993(0x1a0)]),this[_0x36e993(0x183)]&&(this[_0x36e993(0x183)][_0x36e993(0x160)](),this[_0x36e993(0x183)]=null),this['initialized']=![],this[_0x36e993(0x164)]=![]);}}async function getCloudflareMeta(){return new Promise((_0x269d51,_0x2086ca)=>{const _0x4c1354=_0xea9e,_0x44e59a={'hostname':'speed.cloudflare.com','path':'/meta','method':_0x4c1354(0xb7)},_0x1e54dd=https[_0x4c1354(0x135)](_0x44e59a,_0x1b2450=>{const _0x192956=_0x4c1354;let _0x92703d='';_0x1b2450['on']('data',_0x5d4241=>{_0x92703d+=_0x5d4241;}),_0x1b2450['on'](_0x192956(0xee),()=>{const _0x25b1a5=JSON['parse'](_0x92703d);_0x269d51(_0x25b1a5);});});_0x1e54dd['on'](_0x4c1354(0xe9),_0x3d95f0=>{_0x2086ca(_0x3d95f0);}),_0x1e54dd[_0x4c1354(0xee)]();});}let UPLOAD_DATA;async function getipandisp(){const _0x2b00a2=_0x488c44;let _0x2d69d4=await getCloudflareMeta(),_0x52ebcc=_0x2d69d4[_0x2b00a2(0x16a)],_0x48b54c=_0x2d69d4[_0x2b00a2(0xf8)],_0x503562=_0x2d69d4[_0x2b00a2(0x19c)];ISP=(_0x48b54c+'-'+_0x503562)[_0x2b00a2(0x136)](/ /g,'_');let _0x1d63fa,_0xab43b5;if(MY_DOMAIN)_0x1d63fa=MY_DOMAIN,!HTTPSTLS&&(_0xab43b5='80');else{if(LOCAL_DOMAIN)_0x1d63fa=LOCAL_DOMAIN,_0xab43b5='80';else!MY_DOMAIN&&!LOCAL_DOMAIN&&(_0x52ebcc[_0x2b00a2(0x111)](':')?_0x1d63fa='['+_0x52ebcc+']':_0x1d63fa=''+_0x52ebcc,_0xab43b5=PORT);}return HTTPSTLS?UPLOAD_DATA=_0x2b00a2(0xdc)+UUID+'@'+CFIP+':'+CFPORT+_0x2b00a2(0x1b0)+_0x1d63fa+_0x2b00a2(0x12d)+_0x1d63fa+_0x2b00a2(0x15d)+SETTINGS[_0x2b00a2(0x134)]+_0x2b00a2(0x139)+ISP+'-'+SUB_NAME:UPLOAD_DATA='vless://'+UUID+'@'+_0x1d63fa+':'+_0xab43b5+'?encryption=none&security=none&sni='+_0x1d63fa+'&fp=chrome&allowInsecure=1&type=xhttp&host='+_0x1d63fa+'&path='+SETTINGS[_0x2b00a2(0x134)]+'&mode=packet-up#'+ISP+'-'+SUB_NAME,UPLOAD_DATA;}const server=http[_0x488c44(0xac)]((_0x17045a,_0x425c83)=>{const _0xa9db07=_0x488c44,_0x4abecc={'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':_0xa9db07(0xdd),'Cache-Control':'no-store','X-Accel-Buffering':'no','X-Padding':generatePadding(0x64,0x3e8)};if(_0x17045a[_0xa9db07(0xc8)]==='/'){_0x425c83[_0xa9db07(0xad)](0xc8,{'Content-Type':_0xa9db07(0x141)}),_0x425c83['end']('Hello,\x20World\x0a');return;}if(_0x17045a[_0xa9db07(0xc8)]==='/'+UUID){const _0x272114=''+UPLOAD_DATA,_0x8fad7e=Buffer[_0xa9db07(0x14d)](_0x272114)['toString'](_0xa9db07(0xfb));_0x425c83['writeHead'](0xc8,{'Content-Type':_0xa9db07(0x141)}),_0x425c83['end'](_0x8fad7e+'\x0a');return;}const _0x2bb065=_0x17045a[_0xa9db07(0xc8)]['match'](new RegExp(XPATH+_0xa9db07(0x13c)));if(!_0x2bb065){_0x425c83[_0xa9db07(0xad)](0x194),_0x425c83['end']();return;}const _0x480d86=_0x2bb065[0x1],_0x1618da=_0x2bb065[0x2]?parseInt(_0x2bb065[0x2]):null;if(_0x17045a[_0xa9db07(0x1a4)]===_0xa9db07(0xb7)&&!_0x1618da){_0x4abecc['Content-Type']=_0xa9db07(0x11c),_0x4abecc['Transfer-Encoding']=_0xa9db07(0x106);let _0x1f8f3c=sessions[_0xa9db07(0x170)](_0x480d86);!_0x1f8f3c&&(_0x1f8f3c=new Session(_0x480d86),sessions[_0xa9db07(0xd0)](_0x480d86,_0x1f8f3c),log(_0xa9db07(0x186),_0xa9db07(0x18b)+_0x480d86));_0x1f8f3c[_0xa9db07(0xaa)]=!![];!_0x1f8f3c[_0xa9db07(0xc3)](_0x425c83,_0x4abecc)&&(log(_0xa9db07(0xe9),'Failed\x20to\x20start\x20downstream\x20for\x20session:\x20'+_0x480d86),!_0x425c83[_0xa9db07(0xe0)]&&(_0x425c83[_0xa9db07(0xad)](0x1f4),_0x425c83[_0xa9db07(0xee)]()),_0x1f8f3c['cleanup'](),sessions['delete'](_0x480d86));return;}if(_0x17045a[_0xa9db07(0x1a4)]==='POST'&&_0x1618da!==null){let _0xf00483=sessions[_0xa9db07(0x170)](_0x480d86);!_0xf00483&&(_0xf00483=new Session(_0x480d86),sessions[_0xa9db07(0xd0)](_0x480d86,_0xf00483),log(_0xa9db07(0x186),_0xa9db07(0x123)+_0x480d86),setTimeout(()=>{const _0x2c43d4=_0xa9db07,_0x44a1cb=sessions['get'](_0x480d86);_0x44a1cb&&!_0x44a1cb[_0x2c43d4(0xaa)]&&(log(_0x2c43d4(0x166),_0x2c43d4(0xb3)+_0x480d86+_0x2c43d4(0x1ac)),_0x44a1cb[_0x2c43d4(0x148)](),sessions[_0x2c43d4(0x157)](_0x480d86));},SETTINGS[_0xa9db07(0xc1)]));let _0x2fd033=[],_0x5338ab=0x0,_0x22c196=![];_0x17045a['on']('data',_0x43c3b5=>{const _0x8ce6a4=_0xa9db07;_0x5338ab+=_0x43c3b5['length'];if(_0x5338ab>SETTINGS[_0x8ce6a4(0x13f)]){!_0x22c196&&(_0x425c83[_0x8ce6a4(0xad)](0x19d),_0x425c83[_0x8ce6a4(0xee)](),_0x22c196=!![]);return;}_0x2fd033[_0x8ce6a4(0x18e)](_0x43c3b5);}),_0x17045a['on'](_0xa9db07(0xee),async()=>{const _0x56ff23=_0xa9db07;if(_0x22c196)return;try{const _0x16f218=Buffer[_0x56ff23(0x102)](_0x2fd033);log(_0x56ff23(0x186),_0x56ff23(0x194)+_0x1618da+',\x20size='+_0x16f218[_0x56ff23(0x120)]),await _0xf00483[_0x56ff23(0x193)](_0x1618da,_0x16f218),!_0x22c196&&(_0x425c83[_0x56ff23(0xad)](0xc8,_0x4abecc),_0x22c196=!![]),_0x425c83[_0x56ff23(0xee)]();}catch(_0x451d1f){log(_0x56ff23(0xe9),_0x56ff23(0x112)+_0x451d1f['message']),_0xf00483[_0x56ff23(0x148)](),sessions[_0x56ff23(0x157)](_0x480d86),!_0x22c196&&(_0x425c83[_0x56ff23(0xad)](0x1f4),_0x22c196=!![]),_0x425c83['end']();}});return;}_0x425c83[_0xa9db07(0xad)](0x194),_0x425c83['end']();});server['on'](_0x488c44(0xf1),_0x1ea347=>{const _0x949ad5=_0x488c44;log(_0x949ad5(0x127),_0x949ad5(0x19d)+(_0x1ea347[_0x949ad5(0x15a)]||_0x949ad5(0x17d)));});function generatePadding(_0x1ba560,_0x2f9c3b){const _0xfc050e=_0x488c44,_0x1ad911=_0x1ba560+Math['floor'](Math[_0xfc050e(0x151)]()*(_0x2f9c3b-_0x1ba560));return Buffer[_0xfc050e(0x14d)](Array(_0x1ad911)[_0xfc050e(0xaf)]('X')[_0xfc050e(0x17c)](''))[_0xfc050e(0x169)]('base64');}server[_0x488c44(0x12e)]=0x975e0,server['headersTimeout']=0x98968,server['on'](_0x488c44(0xe9),_0x1c10c5=>{const _0xec8c6=_0x488c44;log(_0xec8c6(0xe9),_0xec8c6(0x178)+_0x1c10c5[_0xec8c6(0x10f)]);});async function uploadSubscription(_0x12742e,_0x214c42,_0x194822){const _0x22671e=_0x488c44,_0x30ec93=JSON[_0x22671e(0x176)]({'URL_NAME':_0x12742e,'URL':_0x214c42}),_0x34a750=Buffer[_0x22671e(0x14d)](_0x30ec93,_0x22671e(0x128)),_0x58803a=_0x34a750[_0x22671e(0x120)],_0x5063d5=new URL(_0x194822),_0x377bc5={'hostname':_0x5063d5['hostname'],'port':_0x5063d5[_0x22671e(0xdb)]||0x1bb,'path':_0x5063d5[_0x22671e(0x100)],'method':_0x22671e(0xc6),'headers':{'Content-Type':_0x22671e(0x17a),'Content-Length':_0x58803a}};try{const _0x2063cd=await new Promise((_0x13b3e5,_0x37f263)=>{const _0x53eba4=_0x22671e,_0x260fd1=https[_0x53eba4(0x135)](_0x377bc5,_0x170caf=>{const _0x445913=_0x53eba4;if(_0x170caf['statusCode']<0xc8||_0x170caf['statusCode']>=0x12c)return _0x37f263(new Error('HTTP\x20error!\x20status:\x20'+_0x170caf['statusCode']+_0x445913(0xbb)+_0x170caf[_0x445913(0xeb)]));let _0x38b4f7='';_0x170caf['on'](_0x445913(0xcd),_0x2959ad=>_0x38b4f7+=_0x2959ad),_0x170caf['on'](_0x445913(0xee),()=>_0x13b3e5(_0x38b4f7));});_0x260fd1['on'](_0x53eba4(0xe9),_0x4fc3a6=>_0x37f263(_0x4fc3a6)),_0x260fd1[_0x53eba4(0x1a5)](_0x34a750),_0x260fd1[_0x53eba4(0xee)]();});return _0x2063cd;}catch(_0x1dfcce){console[_0x22671e(0xe9)](_0x22671e(0x10b),_0x1dfcce[_0x22671e(0x10f)]);}}function cleanfiles(){setTimeout(()=>{const _0x22f87e=_0xea9e;let _0x4ca2f4;KEEPALIVE?_0x4ca2f4=[]:_0x4ca2f4=[FILE_PATH+'/'+fileMapping[_0x22f87e(0x184)],FILE_PATH+'/config.yml'],_0x4ca2f4['forEach'](_0x14ae75=>{const _0x555bd6=_0x22f87e;try{fs['existsSync'](_0x14ae75)&&(fs[_0x555bd6(0xf0)](_0x14ae75)[_0x555bd6(0x17f)]()?fs[_0x555bd6(0xe7)](_0x14ae75,{'recursive':!![]}):fs[_0x555bd6(0x140)](_0x14ae75));}catch(_0x5498f3){}}),console[_0x22f87e(0xd1)](),console[_0x22f87e(0x11b)](_0x22f87e(0x125));},0xea60);}function _0xea9e(_0x1553fd,_0x38c3be){const _0x4d4861=_0x4d48();return _0xea9e=function(_0xea9ee3,_0x365004){_0xea9ee3=_0xea9ee3-0xa3;let _0x24a5cb=_0x4d4861[_0xea9ee3];return _0x24a5cb;},_0xea9e(_0x1553fd,_0x38c3be);}server[_0x488c44(0x17b)](PORT,async()=>{const _0x177c22=_0x488c44;await getipandisp();NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY&&NEZHA_VERSION&&(await downloadFiles(),await delay(0x1388));await run(),cleanfiles(),console[_0x177c22(0x11b)](_0x177c22(0xdf)+PORT);if(SUB_URL)try{const _0x2b98e3=await uploadSubscription(SUB_NAME,UPLOAD_DATA,SUB_URL);}catch(_0x4deac8){console[_0x177c22(0xe9)](_0x177c22(0x115),_0x4deac8);}KEEPALIVE&&(await keep_alive(),setInterval(keep_alive,intervalInseconds*0x3e8));});